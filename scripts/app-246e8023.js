"use strict";angular.module("PocketDoctor",["ionic","highcharts-ng","PocketDoctor.Global","PocketDoctor.GlobalLoad","PocketDoctor.Login","PocketDoctor.PatList","PocketDoctor.PatInfo","PocketDoctor.BaseInfo","PocketDoctor.Exam","PocketDoctor.Lab","PocketDoctor.OrderInfo","PocketDoctor.VitalSignsMain","PocketDoctor.patCollectList","PocketDoctor.Push","PocketDoctor.Message","ui.rCalendar","ionic-datepicker","ionic-timepicker","PocketDoctor.Schedule","PocketDoctor.User","PocketDoctor.Formulas","PocketDoctor.FormulaList","PocketDoctor.tools","PocketDoctor.Menu","PocketDoctor.AlarmHistory","kyee-ionic-util"]).run(["$ionicPlatform","$state","$rootScope","$location","$ionicSideMenuDelegate","$ionicLoading","$ionicHistory","GlobalService","$http","GlobalLoadService",function(e,t,a,n,i,r,l,o,s,c){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),e.registerBackButtonAction(function(){var e=t.$current.toString();if("login"===e&&navigator.app.exitApp(),e.indexOf("app")>=0){if(i.isOpenLeft())return void i.toggleLeft(!1);var a=new Date;a-o.getExitTime()>2e3?(o.setExitTime(a),"undefined"!=typeof window.plugins.toast&&window.plugins.toast.show("再按一次退出","short","bottom")):("1"===localStorage.mode&&angular.isDefined(localStorage.data)&&localStorage.setItem("data",JSON.stringify(o.getGlobalData())),navigator.app.exitApp())}else{var n=o.getLastPageNode();if(e.indexOf(".")>=0)for(;n.page.name.indexOf(".")>=0&&n.page.name.indexOf("app")<0;)o.popPageNode(),n=o.getLastPageNode();t.go(n.page,n.param)}},301)}),a.$on("$stateChangeStart",function(e,t,a,n,i){var r=o.getLastPageNode();null===r||r.page!==t?o.pushPageNode(n,i):o.popPageNode()})}]).config(["$stateProvider","$urlRouterProvider","$provide","$httpProvider",function(e,t,a,n){n.defaults.withCredentials=!0,n.interceptors.push("myHttpInterceptorService"),e.state("login",{url:"/login",templateUrl:"templates/login/login.html",controller:"LoginCtrl"}).state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu/menu.html",controller:"MenuCtrl"}).state("app.message",{url:"/message",views:{menuContent:{templateUrl:"templates/message/message.html",controller:"MessageCtrl"}}}).state("messageHistory",{url:"/message",templateUrl:"templates/message/messageHistory.html",controller:"MessageHistoryCtrl"}).state("drugReviewDetail",{url:"/drugReviewDetail",templateUrl:"templates/message/drugReviewDetail.html",controller:"drugReviewDetailCtrl",params:{checked:!1}}).state("consultationDetail",{url:"/consultationDetail",templateUrl:"templates/message/consultationDetail.html",controller:"consultationDetailCtrl",params:{consultationInfo:null,checked:!1}}).state("operationDetail",{url:"/operationDetail",templateUrl:"templates/message/operationDetail.html",controller:"OperationDetailCtrl",params:{operationInfo:null}}).state("criticalList",{url:"/criticalList",templateUrl:"templates/message/criticalList.html",controller:"criticalListCtrl"}).state("app.schedule",{url:"/schedule",cache:!1,views:{menuContent:{templateUrl:"templates/schedule/schedule.html",controller:"scheduleCtrl"}}}).state("newSchedule",{url:"/newSchedule",templateUrl:"templates/schedule/newSchedule.html",controller:"newScheduleCtrl"}).state("generalSchedule",{url:"/generalSchedule/:scheduleId",templateUrl:"templates/schedule/generalSchedule.html",controller:"generalScheduleCtrl",params:{event:null}}).state("editSchedule",{url:"/editSchedule/:scheduleId",templateUrl:"templates/schedule/editSchedule.html",controller:"editScheduleCtrl",params:{event:null}}).state("consultationSchedule",{url:"/consultationSchedule/:scheduleId",templateUrl:"templates/schedule/consultationSchedule.html",controller:"consultationScheduleCtrl",params:{event:null}}).state("operationSchedule",{url:"/operationSchedule/:scheduleId",templateUrl:"templates/schedule/operationSchedule.html",controller:"operationScheduleCtrl",params:{event:null}}).state("app.user",{url:"/user",views:{menuContent:{templateUrl:"templates/user/user.html",controller:"UserCtrl"}}}).state("patCollectList",{cache:!1,url:"/patCollectList",templateUrl:"templates/user/patCollection/patCollectlist.html",controller:"patCollectListCtrl"}).state("tools",{url:"/tools",templateUrl:"templates/user/tools/tools.html",controller:"toolsCtrl"}).state("noticeTools",{url:"/noticeTools",templateUrl:"templates/user/tools/noticeTools.html",controller:"noticeToolsCtrl"}).state("formulaList",{url:"/formulaList",cache:!1,"abstract":!0,templateUrl:"templates/user/formula/formulas.html",controller:"FormulasCtrl",onEnter:function(){console.log("enter formulaList")},onExit:function(){console.log("exit formulaList")}}).state("formulaList.commonFormulas",{url:"/commonFormulas",views:{formulaListContent:{templateUrl:"templates/user/formula/commonFormulas.html",controller:"MyCommonFormulaCtrl"}},params:{flag:!1}}).state("formulaList.privateFormulas",{url:"/privateFormulas",views:{formulaListContent:{templateUrl:"templates/user/formula/privateFormulas.html",controller:"MyPrivateFormulaCtrl"}}}).state("formula",{url:"/formula",cache:!1,templateUrl:"templates/user/formula/formulaList.html",controller:"FormulaListCtrl"}).state("addVar",{url:"/formula/addVar",templateUrl:"templates/user/formula/addVar.html",controller:"AddVarCtrl",params:{flag:null,formulaText:null,newArgs:null,varList:null,paraList:null}}).state("commonFormula",{url:"/formula/addFormula/commonFormula",cache:!1,templateUrl:"templates/user/formula/commonFormula.html",controller:"CommonFormulaCtrl",params:{formulaList:null}}).state("newFormula",{url:"/formula/addFormula/newFormula",templateUrl:"templates/user/formula/newFormula.html",controller:"NewFormulaCtrl",params:{update:null,newData:null}}).state("formulaDetail",{url:"/formula/formulaDetail",templateUrl:"templates/user/formula/formulaDetail.html",controller:"FormulaDetailCtrl",params:{uFormula:null,formulaId:null,formulaName:null,patInfo:null,formulaBackUp:null,varList:null}}).state("patSearch",{url:"/formula/formulaDetail/patSearch",templateUrl:"templates/user/formula/patSearch.html",controller:"PatSearchCtrl",params:{formula:null,varList:null}}).state("examFilter",{url:"/examFilter",templateUrl:"templates/pat/exam/examFilter.html",controller:"examFilterCtrl"}).state("examReport",{cache:!1,url:"/examReport/:examNo",templateUrl:"templates/pat/exam/examReport.html",controller:"examReportCtrl",params:{examReport:null}}).state("labFilter",{url:"/labFilter",templateUrl:"templates/pat/lab/labFilter.html",controller:"labFilterCtrl"}).state("labReport",{cache:!1,url:"/labReport/:testNo",templateUrl:"templates/pat/lab/labReport.html",controller:"labReportCtrl"}).state("labTrendChart",{url:"/labTrendChart/:pid&:itemCode",templateUrl:"templates/pat/lab/labTrendChart.html",controller:"labTrendChartCtrl"}).state("app.patList",{url:"/patList",cache:!1,views:{menuContent:{templateUrl:"templates/pat/patList.html",controller:"PatListCtrl"}}}).state("patInfoTabs",{url:"/patInfoTabs/:patientId&:visitId",cache:!1,"abstract":!0,templateUrl:"templates/pat/patInfo.html",controller:"PatInfoCtrl"}).state("orderSearch",{url:"/orderSearch",controller:"OrderSearchCtrl",templateUrl:"templates/pat/order/orderSearch.html"}).state("patInfoTabs.baseInfo",{url:"/baseInfo",params:{data:null},views:{baseInfo:{templateUrl:"templates/pat/baseInfo/baseInfo.html",controller:"BaseInfoCtrl"}}}).state("patInfoTabs.order",{url:"/order",views:{order:{templateUrl:"templates/pat/order/order.html",controller:"OrderInfoCtrl"}},params:{startIndex:0,pagingRecords:20,orderFilterContent:null,data:null}}).state("patInfoTabs.exam",{url:"/exam",views:{exam:{templateUrl:"templates/pat/exam/exam.html",controller:"examInfoCtrl"}},params:{filterContent:null}}).state("patInfoTabs.lab",{url:"/lab",views:{lab:{templateUrl:"templates/pat/lab/lab.html",controller:"labInfosCtrl"}},params:{labFilterValue:null}}).state("patInfoTabs.vitalSigns",{url:"/vitalSigns",views:{vitalSigns:{templateUrl:"templates/pat/vitalSigns/vitalSignsMain.html",controller:"VitalSignsMainCtrl"}},params:{}}).state("patInfoTabs.alarmHistory",{url:"/alarmHistory",views:{alarmHistory:{templateUrl:"templates/pat/alarmHistory/alarmHistory.html",controller:"alarmHistoryCtrl"}}}).state("image",{url:"/image",templateUrl:"templates/user/image.html",controller:"imageCtrl"}).state("setConfig",{url:"setConfig",templateUrl:"templates/user/setConfig.html",controller:"setConfigCtrl"}),t.otherwise("login")}]);var KingYee=new Object;KingYee.BaiduPush={showMessage:function(e){var t=document.getElementsByClassName("messageView");if(!t){var a=angular.element(document.body).injector().get("$state"),n=angular.element(document.body).injector().get("GlobalLoadService");navigator.splashscreen.show(),n.show(),a.go("app.message")}}},angular.module("PocketDoctor").directive("headerBar",function(){return{restrict:"E",templateUrl:"templates/common/dHeaderBar.html"}}),angular.module("PocketDoctor.GlobalLoad",[]).service("GlobalLoadService",["$ionicLoading",function(e){this.show=function(){e.show({noBackdrop:!0})},this.hide=function(){e.hide()}}]),angular.module("PocketDoctor.Global",[]).service("GlobalService",["$state","$ionicSideMenuDelegate",function(e,t){function a(e,t){var a={};return a.page=e,a.param=t,a}var n;this.getExamNo=function(){return n},this.setExamNo=function(e){n=e};var i;this.getTestNo=function(){return i},this.setTestNo=function(e){i=e};var r;this.getUserId=function(){return r},this.setUserId=function(e){r=e};var l=[];this.getPatients=function(){return l},this.setPatients=function(e){l=e};var o;this.getPagingRecords=function(){return o},this.setPagingRecords=function(e){o=e};var s;this.setOrderInfo=function(e){s=e},this.getOrderInfo=function(){return s};var c=new Date;this.setExitTime=function(e){c=e},this.getExitTime=function(){return c};var d=[];this.pushPageNode=function(e,t){var n=a(e,t);d.push(n)},this.popPageNode=function(){return d.pop()},this.getLastPageNode=function(){return 0===d.length?null:d[d.length-1]},this.goBack=function(){var a=e.$current.toString();if("login"===a&&navigator.app.exitApp(),a.indexOf("app")>=0){if(t.isOpenLeft())return void t.toggleLeft(!1);var n=new Date;n-this.getExitTime()>2e3?(this.setExitTime(n),"undefined"!=typeof window.plugins.toast&&window.plugins.toast.show("再按一次退出","short","bottom")):("1"===localStorage.mode&&angular.isDefined(localStorage.data)&&localStorage.setItem("data",JSON.stringify(GlobalService.getGlobalData())),navigator.app.exitApp())}else{var i=this.getLastPageNode();if(a.indexOf(".")>=0)for(;i.page.name.indexOf(".")>=0&&i.page.name.indexOf("app")<0;)this.popPageNode(),i=this.getLastPageNode();e.go(i.page,i.params)}};var u={};this.getGlobalData=function(){return u},this.setGlobalData=function(e){u=e},this.initGlobalData=function(){u={hospitalId:-1,userId:-1,user:{loginInfo:{login:{username:"",password:""},responseTrue:{success:!0,value:null,message:"login success"},responseFalse:{success:!1,value:null,message:"login fail"}},userInfos:[],messages:[],patients:[],schedules:[],settings:[],myCommonFormulas:[],privateFormulas:[],myCommonFormulaDetails:[],paraNames:[],privateFormulaDetails:[],commonFormulas:[],availableParas:[],orders:[],exams:[],labs:[],labReports:[],labTrendCharts:[],operationDetails:[]}}};var m={};this.getMaxPrimaryKey=function(){return m},this.setMaxPrimaryKey=function(e){m=e};var v={};this.getCurrentUserInfo=function(){return v},this.setCurrentUserInfo=function(e){v=e};var p={};this.getPatInfo=function(){return p},this.initPatInfo=function(){p={}},this.setPatientId=function(e){p.patinetId=e},this.getPatientId=function(){return angular.isDefined(p.patinetId)?p.patinetId:null},this.setVisitId=function(e){p.visitId=e},this.getVisitId=function(){return angular.isDefined(p.visitId)?p.visitId:null},this.getPatName=function(){return angular.isDefined(p.patName)?p.patName:null},this.setPatName=function(e){p.patName=e},this.getBaseInfo=function(){return angular.isDefined(p.baseInfo)?p.baseInfo:null},this.setBaseInfo=function(e){p.baseInfo=e},this.getOrderInfo=function(){return angular.isDefined(p.orderInfo)?p.orderInfo:null},this.setOrderInfo=function(e){p.orderInfo=e},this.getOrderStartIndex=function(){return angular.isDefined(p.orderStartIndex)?p.orderStartIndex:null},this.setOrderStartIndex=function(e){p.orderStartIndex=e},this.getOrderFilterContent=function(){return angular.isDefined(p.orderFilterContent)?p.orderFilterContent:null},this.setOrderFilterContent=function(e){p.orderFilterContent=e},this.getIsMore=function(){return angular.isDefined(p.isMore)?p.isMore:void 0},this.setIsMore=function(e){p.isMore=e},this.setExamList=function(e){p.examList=e},this.getExamList=function(){return angular.isDefined(p.examList)?p.examList:null},this.getExamFilterValue=function(){return angular.isDefined(p.examFilterValue)?p.examFilterValue:null},this.setExamFilterValue=function(e){p.examFilterValue=e},this.getExamFilterAllValue=function(){return angular.isDefined(p.examFilterAllValue)?p.examFilterAllValue:null},this.setExamFilterAllValue=function(e){p.examFilterAllValue=e},this.setLabList=function(e){p.labList=e},this.getLabList=function(){return angular.isDefined(p.labList)?p.labList:null},this.setLabFilterValue=function(e){p.labFilterValue=e},this.getLabFilterValue=function(){return angular.isDefined(p.labFilterValue)?p.labFilterValue:null};var g;this.getOperationDetail=function(){return g},this.setOperationDetail=function(e){g=e};var f;this.getMessages=function(){return f},this.setMessages=function(e){f=e};var h;this.getMessageHistory=function(){return h},this.setMessageHistory=function(e){h=e};var b;this.getMessageStartPageIndex=function(){return b},this.setMessageStartPageIndex=function(e){b=e};var C={};this.setFormulaList=function(e){C.formulaList=e},this.getFormulaList=function(){return angular.isDefined(C.formulaList)?C.formulaList:null},this.setFormulasBackUp=function(e){C.formulasBackUp=e},this.getFormulasBackUp=function(){return angular.isDefined(C.formulasBackUp)?C.formulasBackUp:null},this.setMyFormulaList=function(e){C.myFormulaList=e},this.getMyFormulaList=function(){return angular.isDefined(C.myFormulaList)?C.myFormulaList:null},this.setCommonFormulaDetail=function(e){C.commonFormulaDetail=e},this.getCommonFormulaDetail=function(){return angular.isDefined(C.commonFormulaDetail)?C.commonFormulaDetail:null},this.setPrivateFormulaDetail=function(e){C.privateFormulaDetail=e},this.getPrivateFormulaDetail=function(){return angular.isDefined(C.privateFormulaDetail)?C.privateFormulaDetail:null},this.setPatNameList=function(e){C.patNameList=e},this.getPatNameList=function(){return angular.isDefined(C.patNameList)?C.patNameList:null};var I={};this.setVitalSignsData=function(e){I=e},this.getVitalSignsData=function(){return I},this.setHeartBeat=function(e){I.heartBeat=e},this.getHeartBeat=function(){return angular.isDefined(I.heartBeat)?I.heartBeat:null},this.setSpO2=function(e){I.spO2=e},this.getSpO2=function(){return angular.isDefined(I.spO2)?I.spO2:null},this.setBloodPress=function(e){I.bloodPress=e},this.getBloodPress=function(){return angular.isDefined(I.bloodPress)?I.bloodPress:null},this.setIcg=function(e){I.icg=e},this.getIcg=function(){return angular.isDefined(I.icg)?I.icg:null}}]),angular.module("PocketDoctor").service("HttpService",["$q","$http","$filter","GlobalService","$timeout","FormulaCalculate",function(e,t,a,n,i,r){var l=this;l.handleRequest=function(o){var s=e.defer();if("0"===localStorage.mode){var c={};return c.method=o.method,c.url=localStorage.Url+"/"+o.url,o.params&&(c.params=o.params),o.data&&(c.data=o.data.value),t(c).success(function(e){s.resolve(e)}).error(function(e){s.reject(e)}),s.promise}if("1"===localStorage.mode){angular.isDefined(n.getGlobalData())||n.initGlobalData();var c={};return c.method=o.method,c.url=localStorage.Url+"/"+o.url,o.params&&(c.params=o.params),o.data&&(c.data=o.data.value),t(c).success(function(e){if("get"===o.method)if("orders"===o.url)for(var t=0;t<e.value.length;t++)n.getGlobalData().user[o.url].indexOf(e.value[t])<0&&n.getGlobalData().user[o.url].push(e.value[t]);else{if("s"!==o.url[o.url.length-1]&&(o.url+="s"),0===n.getGlobalData().user[o.url].length)n.getGlobalData().user[o.url]=e.value;else for(var a=0,i=e.value.length;i>a;a++){var r=e.value[a],l=0;angular.forEach(n.getGlobalData().user[o.url],function(e){var t=!0;for(var a in e)"$$hashKey"!==a&&(t=t&&e[a]===r[a]);t&&(l+=1)}),1>l&&n.getGlobalData().user[o.url].push(r)}"userInfos"===o.url&&(n.getGlobalData().hospitalId=localStorage.hospitalId,n.getGlobalData().userId=e.value[0].userId,n.getGlobalData().user.loginInfo.login={username:localStorage.name+"/"+localStorage.pass+"@"+localStorage.hospitalId,password:localStorage.pass})}s.resolve(e)}).error(function(e){s.reject(e)}),s.promise}return"2"===localStorage.mode?("login"===o.url?angular.isDefined(localStorage.data)?i(function(){var e=JSON.parse(localStorage.data);o.params.username===e.user.loginInfo.login.username&&o.params.password===e.user.loginInfo.login.password?(n.setGlobalData(e),s.resolve(e.user.loginInfo.responseTrue)):s.resolve(e.user.loginInfo.responseFalse)},200):t.get("config/data.json").success(function(e){o.params.username===e.user.loginInfo.login.username&&o.params.password===e.user.loginInfo.login.password?(localStorage.setItem("data",JSON.stringify(e)),n.setGlobalData(e),s.resolve(e.user.loginInfo.responseTrue)):s.resolve(e.user.loginInfo.responseFalse)}):i(function(){var e=l.preHandle(o),t=null,i=null,c=!0;if("get"===e.method)t="calculations"===e.url?r.calculate(e):0!==Object.keys(e.params).length?angular.isDefined(e.params.itemCodes)?a("myArrayFilter")(n.getGlobalData().user[e.url],e.params.itemCodes,"paraCode"):"historyMessages"===e.url&&angular.isDefined(e.params.infos)?a("filter")(n.getGlobalData().user[e.url],e.params.infos):a("filter")(n.getGlobalData().user[e.url],e.params,!0):n.getGlobalData().user[e.url];else if("post"===e.method)angular.isDefined(e.data.length)?n.getGlobalData().user[e.url]=n.getGlobalData().user[e.url].concat(e.data):n.getGlobalData().user[e.url].push(e.data),i="新增成功";else if("put"===e.method){var d=a("filter")(n.getGlobalData().user[e.url],e.condition,!0);angular.forEach(d,function(t){for(var a in e.updateValue)t[a]=e.updateValue[a]}),i="修改成功"}else if("delete"===e.method){var u=n.getGlobalData().user[e.url],m=a("filter")(u,e.params,!0);m.length>0?(u.splice(u.indexOf(m[0]),1),n.getGlobalData().user[e.url]=u,i="删除成功"):(i="删除失败",c=!1)}var v={success:c,message:i,value:t};s.resolve(l.afterHandle(o,v))},200),s.promise):void 0},l.preHandle=function(e){var t=e.url+"&"+e.method;switch(t){case"orders&get":return l.orderPreHandle(e);case"vitalSigns&get":case"thresholds&get":return l.vitalSignsPreHandle(e);case"historyMessages&get":return l.historyMessagePreHandle(e);default:return l.defaultPreHandle(e)}},l.defaultPreHandle=function(e){var t={};t.method=e.method,t.url=e.url;var a={};if("get"===e.method){if("s"!==e.url.slice(e.url.length-1)&&(t.url=e.url+"s"),e.params){for(var n in e.params)"hospitalId"!==n&&"userId"!==n&&e.params[n]&&(a[n]=e.params[n]);t.params=a}}else if("post"===e.method){if(e.data){t.url=e.url+"s";var i=e.data.primaryKey;angular.isDefined(e.data.value.length)?(angular.forEach(e.data.value,function(t){t[i]=l.getMaxPrimaryKey(e.url,i)}),t.data=e.data.value):(t.data=e.data.value,t.data[i]=l.getMaxPrimaryKey(e.url,i))}}else if("put"===e.method)t.url=e.url+"s",t.condition=e.data.primaryKey,t.updateValue=e.data.value;else if("delete"===e.method&&(t.url=e.url+"s",e.params)){for(var n in e.params)"hospitalId"!==n&&"userId"!==n&&(a[n]=e.params[n]);t.params=a}return t},l.getMaxPrimaryKey=function(e,t){var a=0,i=n.getMaxPrimaryKey(),r=null;return i?i[t]?(a=n.getMaxPrimaryKey()[t],n.getMaxPrimaryKey()[t]=a+1):(r=n.getGlobalData().user[e+"s"],angular.forEach(r,function(e){e[t]>a&&(a=e[t])}),n.getMaxPrimaryKey()[t]=a+1):(r=n.getGlobalData().user[e+"s"],angular.forEach(r,function(e){e[t]>a&&(a=e[t])}),n.setMaxPrimaryKey({primaryKey:a+1})),a+1},l.afterHandle=function(e,t){var a=e.url+"&"+e.method;switch(a){case"orders&get":return l.orderAfterHandle(t);case"schedules&get":return l.scheduleAfterHandle(t);case"messages&get":return l.messageAfterHandle(t);case"operationDetail&get":return l.operationAfterHandle(t);case"historyMessages&get":return l.historyMessageAfterHandle(e,t);default:return t}},l.vitalSignsPreHandle=function(e){var t={};return t.method=e.method,t.url=e.url,t.params={},t},l.orderPreHandle=function(e){var t={};t.method=e.method,t.url=e.url;var a={};if(e.params){for(var n in e.params)"hospitalId"!==n&&"startIndex"!==n&&"pagingRecords"!==n&&(a[n]=e.params[n]);t.params=a}return t},l.orderAfterHandle=function(e){return e.value=e.value,e},l.scheduleAfterHandle=function(e){var t=e.value,n=null,i=null,r=a("date")(new Date,"yyyy-MM-dd HH:mm").split(" ")[0],l=r.split("-");return l[1]=parseInt(l[1])-1,angular.forEach(t,function(e){0!==e.scheduleClass&&(n=a("date")(new Date(e.start),"yyyy-MM-dd HH:mm").split(" ")[1].split(":"),i=a("date")(new Date(e.end),"yyyy-MM-dd HH:mm").split(" ")[1].split(":"),e.start=new Date(l[0],l[1],l[2],n[0],n[1]).getTime(),e.end=new Date(l[0],l[1],l[2],i[0],i[1]).getTime())}),e.value=t,e},l.messageAfterHandle=function(e){var t=e.value,n=null,i=null,r=a("date")(new Date,"yyyy-MM-dd HH:mm").split(" ")[0],l=r.split("-");return l[1]=parseInt(l[1])-1,angular.forEach(t,function(e){1===e.type&&(n=a("date")(new Date(e.operationTime),"yyyy-MM-dd HH:mm").split(" ")[1].split(":"),i=a("date")(new Date(e.applyTime),"yyyy-MM-dd HH:mm").split(" ")[1].split(":"),e.operationTime=new Date(l[0],l[1],l[2],n[0],n[1]).getTime(),e.applyTime=new Date(l[0],l[1],l[2],i[0],i[1]).getTime())}),e.value=t,e},l.operationAfterHandle=function(e){var t=e.value,n=null,i=null,r=a("date")(new Date,"yyyy-MM-dd HH:mm").split(" ")[0],l=r.split("-");return l[1]=parseInt(l[1])-1,angular.forEach(t,function(e){n=a("date")(new Date(e.operationTime),"yyyy-MM-dd HH:mm").split(" ")[1].split(":"),i=a("date")(new Date(e.applyTime),"yyyy-MM-dd HH:mm").split(" ")[1].split(":"),e.operationTime=new Date(l[0],l[1],l[2],n[0],n[1]).getTime(),e.applyTime=new Date(l[0],l[1],l[2],i[0],i[1]).getTime()}),e.value=t,e},l.historyMessagePreHandle=function(e){var t={};t.method=e.method,t.url=e.url;var a={};return angular.isDefined(e.params.keyWords)&&""!==e.params.keyWords?(e.params.keyWords.includes("检查")?a.type=4:e.params.keyWords.includes("检验")?a.type=5:e.params.keyWords.includes("手术")?a.type=1:a.infos=e.params.keyWords,t.params=a):t.params={},t},l.historyMessageAfterHandle=function(e,t){var a=[];angular.forEach(t.value,function(e){var n={};for(var i in e)n[i]=e[i];a[t.value.indexOf(e)]=n});var n=e.params.pageNum;return t.value=a.splice(10*n,10),t}}]),angular.module("patInfoStorage",[]).factory("$localstorage",["$window",function(e){return{set:function(t,a){e.localStorage[t]=a},get:function(t,a){return e.localStorage[t]||a},setObject:function(t,a){e.localStorage[t]=JSON.stringify(a)},getObject:function(t){return JSON.parse(e.localStorage[t]||"{}")}}}]),angular.module("PocketDoctor.Login",[]),angular.module("PocketDoctor.Menu",[]),angular.module("PocketDoctor.Message",[]),angular.module("PocketDoctor.Push",[]),angular.module("PocketDoctor.Schedule",["ui.rCalendar"]),angular.module("PocketDoctor.User",[]),angular.module("PocketDoctor").filter("myArrayFilter",function(){return function(e,t,a){var n=[];return angular.forEach(e,function(e){if(t.indexOf(e[a])>-1){var i=t.indexOf(e[a]);n[i]=e}}),n}}),angular.module("PocketDoctor").filter("deliverTimeFilter",["$filter",function(e){return function(t){if(void 0!==t||null!==t)var a=t.split(" "),n=a[0].split("-");var i=n[1]+"-"+n[2],r=a[1].split(":"),l=r[0]+":"+r[1],o=e("date")(new Date,"yyyy-MM-dd");if(void 0!==o||null!==t)var s=o.split(" "),c=s[0].split("-");return n[0]===c[0]&&n[1]===c[1]&&(parseInt(n[2])===parseInt(c[2])&&(i="今天"),parseInt(n[2])===parseInt(c[2])-1&&(i="昨天"),parseInt(n[2])===parseInt(c[2])-2&&(i="前天")),i+" "+l}}]),angular.module("PocketDoctor").service("FormulaCalculate",["$filter","GlobalService",function($filter,GlobalService){this.calculate=function(config){if(config){if(3===config.params.flag||4===config.params.flag){var node=null;node=3===config.params.flag?"myCommonFormulaDetails":"privateFormulas";var formula=$filter("filter")(GlobalService.getGlobalData().user[node],{id:config.params.id},!0),formulaExpression;0===formula.length?(formula=$filter("filter")(GlobalService.getGlobalData().user[node],{uFormulaId:config.params.id},!0),formulaExpression=formula[0].formulaText):formulaExpression=formula[0].formulaExpression;for(var reg=/[A-Za-z]|[\u4e00-\u9fa5]/,replaceStr=[],str="",i=0;i<formulaExpression.length;i++)reg.test(formulaExpression.charAt(i))?(str+=formulaExpression.charAt(i),i===formulaExpression.length-1&&str.length>0&&replaceStr.push(str)):str.length>0&&(replaceStr.push(str),str="");for(var j=0;j<replaceStr.length;j++)formulaExpression=formulaExpression.replace(replaceStr[j],config.params.params[j]);return-1!==formulaExpression.search("/0")?"除数不能为0":eval(formulaExpression)}return"离线无法计算"}return"参数错误"}}]),angular.module("PocketDoctor").factory("_",["$window",function(e){return e._}]),angular.module("PocketDoctor.Login").controller("LoginCtrl",["$scope","$state","$http","$ionicPopup","$ionicHistory","$ionicPlatform","LoginService","PushService","GlobalLoadService","$stateParams","GlobalService",function(e,t,a,n,i,r,l,o,s,c,d){e.$on("$ionicView.beforeEnter",function(t){a.get("config/hospitalConfig.json").success(function(t){angular.forEach(t,function(t){t.hospitalId.toString()===localStorage.hospitalId&&(e.hospitalData=t)})})}),r.ready(function(){e.$on("$ionicView.afterEnter",function(t,a){"exit"===a.direction&&("1"===localStorage.mode&&angular.isDefined(localStorage.data)&&localStorage.setItem("data",JSON.stringify(d.getGlobalData())),i.clearHistory(),e.user.name="",e.user.password="")})}),e.user={},e.doLogin=function(){var e="shixz",a="shixz";localStorage.name=e,localStorage.pass=a,s.show(),l.login(e,a).then(function(i){"login success"===i.message?(localStorage.name=e,localStorage.pass=a,l.getUserInfo(e).then(function(e){s.hide(),"object"==typeof e.value[0]?(d.setCurrentUserInfo(e.value[0]),t.go("app.message")):n.alert({title:"提醒",template:"加载用户信息失败！",okText:"确定"})},function(){s.hide(),n.alert({title:"提醒",template:"加载用户信息失败！",okText:"确定"})})):(s.hide(),n.alert({title:"提醒",template:"登录失败！",okText:"确定"}))},function(){s.hide(),n.alert({title:"提醒",template:"登录失败！",okText:"确定"})})},e.setStatus=function(){{var e=document.getElementsByClassName("loginLogo")[0],a=e.getAttribute("counter"),n=e.getAttribute("time");(new Date).getTime()}if(e.setAttribute("counter",(parseInt(a)+1).toString()),"0"==a)e.setAttribute("time",(new Date).getTime().toString());else if("9"==a){var i=(new Date).getTime();5e3>i-n&&t.go("setConfig"),e.setAttribute("counter","0")}}}]),angular.module("PocketDoctor.Login").factory("authService",["$rootScope","httpBufferService",function(e,t){return{loginConfirmed:function(e,a){var n=a||function(e){return e};t.retryAll(n)},loginCancelled:function(e,a){t.rejectAll(a)}}}]),angular.module("PocketDoctor.Login").factory("httpBufferService",["$injector",function(e){function t(t,n){function i(e){console.log(e),n.resolve(e)}function r(e){console.log("buffer"+e),n.reject(e)}a=a||e.get("$http"),a({method:"post",url:localStorage.Url+"/login",params:{username:localStorage.name+"/"+localStorage.pass+"@"+localStorage.hospitalId,password:localStorage.pass}}).then(function(){console.log("重新登录成功"),a(t).then(i,r)},function(){})}var a,n=[];return{append:function(e,t){n.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<n.length;++t)n[t].deferred.reject(e);n=[]},retryAll:function(e){for(var a=0;a<n.length;++a)t(e(n[a].config),n[a].deferred);n=[]},retryHttp:function(e,a){t(e,a),n=[]}}}]),angular.module("PocketDoctor.Login").service("LoginService",["HttpService",function(e){this.login=function(t,a){var n={url:"login",method:"post",params:{username:t+"/"+a+"@"+localStorage.hospitalId,password:a}};return e.handleRequest(n)},this.getUserInfo=function(t){var a={url:"userInfo",method:"get",params:{hospitalId:localStorage.hospitalId,hospitalUserId:t.toLocaleUpperCase()}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.Login").factory("myHttpInterceptorService",["$q","httpBufferService",function(e,t){return{request:function(e){return e},requestError:function(t){return e.reject(t)},response:function(a){if("unauthorized"===a.data.message){console.log("重新登录");var n=e.defer();return t.retryHttp(a.config,n),n.promise}return a},responseError:function(t){return e.reject(t)}}}]),angular.module("PocketDoctor.Menu").controller("MenuCtrl",["$filter","$scope","$state","$http","GlobalService",function(e,t,a,n,i){t.$on("$ionicView.afterEnter",function(){t.message={},angular.isDefined(i.getMessages())&&null!==i.getMessages()&&(t.message.count=e("filter")(i.getMessages(),{readTimes:0},!0).length),localStorage.images?t.img=localStorage.curImg?localStorage.curImg:localStorage.images.split(",")[0]:n.get("config/config.json").success(function(e){localStorage.images=e.images,t.img=localStorage.curImg?localStorage.curImg:localStorage.images.split(",")[0]}),i.getCurrentUserInfo()&&(t.username=i.getCurrentUserInfo().userName,t.job=i.getCurrentUserInfo().job)}),t.userImage=function(){a.go("image")},t.toMessageView=function(){a.go("app.message")},t.toPatlistView=function(){a.go("app.patList")},t.toScheduleView=function(){a.go("app.schedule")},t.toUserView=function(){a.go("app.user")}}]),angular.module("PocketDoctor.Message").controller("consultationDetailCtrl",["$scope","$state","$stateParams","$ionicPopup",function(e,t,a,n){e.$on("$ionicView.afterEnter",function(){e.consultation=a.consultationInfo,e.checked=a.checked}),e.backToMessage=function(){window.history.go(-1)},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToMessage,center:"会诊详情"},e.checkAgree=function(){"2"===localStorage.mode&&n.alert({title:"提醒",template:"离线版本，无法审核！",okText:"确定"})},e.checkRefuse=function(){"2"===localStorage.mode&&n.alert({title:"提醒",template:"离线版本，无法审核！",okText:"确定"})}}]),angular.module("PocketDoctor.Message").controller("criticalListCtrl",["$scope","$state",function(e,t){e.backToMessage=function(){window.history.go(-1)},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToMessage,center:"危急值列表"}}]),angular.module("PocketDoctor.Message").controller("drugReviewDetailCtrl",["$scope","$state","$ionicPopup","$stateParams",function(e,t,a,n){e.backToMessage=function(){window.history.go(-1)},e.$on("$ionicView.afterEnter",function(){e.checked=n.checked}),e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToMessage,center:"药物审核详情"},e.checkAgree=function(){"2"===localStorage.mode&&a.alert({title:"提醒",template:"离线版本，无法审核！",okText:"确定"})},e.checkRefuse=function(){"2"===localStorage.mode&&a.alert({title:"提醒",template:"离线版本，无法审核！",okText:"确定"})}}]),angular.module("PocketDoctor.Message").controller("MessageCtrl",["$filter","$scope","$state","$timeout","PushService","MessageService","$ionicPopup","GlobalService","GlobalLoadService",function(e,t,a,n,i,r,l,o,s){t.$on("$ionicView.afterEnter",function(){n(function(){"undefined"!=typeof navigator.splashscreen&&navigator.splashscreen.hide()},2e3),t.dataLoaded=!1,t.messages=[],t.deleteMsg=[!1],angular.isDefined(o.getMessages())&&null!==o.getMessages()&&0!==o.getMessages().length?(t.dataLoaded=!0,t.messages=o.getMessages()):t.refresh(!0)}),t.refresh=function(a){a||(t.dataLoaded=!0),r.getMessageData().then(function(a){t.messages=a.value,o.setMessages(a.value);var n=e("filter")(a.value,{readTimes:0},!0);n.length>0&&(t.message.count=n.length),t.dataLoaded||(t.dataLoaded=!0),t.$broadcast("scroll.refreshComplete")},function(){angular.isDefined(window.plugins.toast)&&window.plugins.toast.show("加载失败","short","center"),t.$broadcast("scroll.refreshComplete")})},t.messageHistory=function(){a.go("messageHistory")},t.deleteMessage=function(e){var a=t.messages[e],n=a.id,i=l.confirm({
title:"温馨提示",template:"确定了解该消息了吗?",cancelText:"取消",okText:"确定"});i.then(function(e){e&&a.type&&(t.deleteMsg[a.type+","+a.id]=!0,s.show(),r.deleteMessage(a.type,n).then(function(){s.hide(),t.refresh(!0),l.alert({title:"提示",template:"删除成功",okText:"确定"})},function(){}))})},t.toExamReport=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=n.examNo;o.setExamNo(i),o.setPatientId(null),o.setVisitId(null),a.go("examReport",{examNo:i})},function(e){})},t.toLabReport=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=n.testNo;o.setTestNo(i),a.go("labReport",{testNo:i})},function(e){})},t.toOperationDetail=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=n;a.go("operationDetail",{operationInfo:i})},function(e){})},t.toDrugReviewDetail=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=6===n.type;a.go("drugReviewDetail",{checked:i})},function(e){})},t.toConsultationDetail=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=8===n.type;a.go("consultationDetail",{consultationInfo:n,checked:i})},function(e){})}}]),angular.module("PocketDoctor.Message").controller("MessageHistoryCtrl",["$filter","$scope","$state","$timeout","PushService","MessageService","$ionicPopup","GlobalService","GlobalLoadService",function(e,t,a,n,i,r,l,o,s){o.setMessageStartPageIndex(0);var c=!1;t.$on("$ionicView.afterEnter",function(){t.dataLoaded=!1,t.messages=[],t.isMore=!1,angular.isDefined(o.getMessageHistory())&&null!==o.getMessageHistory()&&0!==o.getMessageHistory().length?(t.messages=o.getMessageHistory(),t.dataLoaded=!0,c=!1,t.isMore=!0,t.$broadcast("scroll.infiniteScrollComplete")):t.refresh(!0)}),t.refresh=function(e){o.setMessageStartPageIndex(0),e||(t.messages=[],t.dataLoaded=!0),t.askForMessageHistory("refresh")},t.askForMessageHistory=function(e){var a=angular.isDefined(t.searchText)?t.searchText:"";r.getMessageHistory(a).then(function(a){t.isMore=10===a.value.length,a.value.length>0&&(t.messages=t.messages.length>0?t.messages.concat(a.value):a.value,o.setMessageHistory(t.messages),o.setMessageStartPageIndex(o.getMessageStartPageIndex()+1)),"refresh"===e&&t.$broadcast("scroll.refreshComplete"),"infinite"===e&&t.$broadcast("scroll.infiniteScrollComplete"),t.dataLoaded=!0},function(){t.isMore=!1,t.dataLoaded=!0,angular.isDefined(window.plugins.toast)&&window.plugins.toast.show("加载失败","short","center"),"refresh"===e&&t.$broadcast("scroll.refreshComplete"),"infinite"===e&&t.$broadcast("scroll.infiniteScrollComplete")})},t.loadMore=function(){c?t.askForMessageHistory("infinite"):(c=!0,t.$broadcast("scroll.infiniteScrollComplete"))},t.backToMessage=function(){a.go("app.message")},t.toSearch=function(){t.refresh(!1)},t.deleteMessage=function(e){console.log("history cannot delete")},t.toExamReport=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=n.examNo;o.setExamNo(i),o.setPatientId(null),o.setVisitId(null),a.go("examReport",{examNo:i})},function(e){})},t.toLabReport=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=n.testNo;o.setTestNo(i),a.go("labReport",{testNo:i})},function(e){})},t.toOperationDetail=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=n;a.go("operationDetail",{operationInfo:i})},function(e){})},t.toDrugReviewDetail=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=6===n.type;a.go("drugReviewDetail",{checked:i})},function(e){})},t.toConsultationDetail=function(e){var n=t.messages[e];r.updateMessage(n.type,n.id,n.readTimes).then(function(e){t.refresh();var i=8===n.type;a.go("consultationDetail",{consultationInfo:n,checked:i})},function(e){})}}]),angular.module("PocketDoctor.Message").controller("OperationDetailCtrl",["$scope","$state","$stateParams",function(e,t,a){e.$on("$ionicView.afterEnter",function(){e.operation=a.operationInfo}),e.backToMessage=function(){window.history.go(-1)},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToMessage,center:"手术详情"}}]),angular.module("PocketDoctor.Message").directive("consultationAgree",function(){return{restrict:"E",templateUrl:"templates/message/dConsultationAgree.html"}}),angular.module("PocketDoctor.Message").directive("consultationCheck",["$state",function(e){return{restrict:"E",templateUrl:"templates/message/dConsultationCheck.html",link:function(t,a,n){t.toConsultationCheckDetailView=function(){e.go("consultationCheckDetail")}}}}]),angular.module("PocketDoctor.Message").directive("consultationNotice",["$state",function(e){return{restrict:"E",templateUrl:"templates/message/dConsultationNotice.html",link:function(t,a,n){t.toConsultationDetailView=function(){e.go("consultationDetail")}}}}]),angular.module("PocketDoctor.Message").directive("consultationRefuse",function(){return{restrict:"E",templateUrl:"templates/message/dConsultationRefuse.html"}}),angular.module("PocketDoctor.Message").directive("consultationReview",["$state",function(e){return{restrict:"E",templateUrl:"templates/message/dConsultationReview.html",link:function(t,a,n){t.toConsultationReviewDetailView=function(){e.go("consultationReviewDetail")}}}}]),angular.module("PocketDoctor.Message").directive("criticalCard",["GlobalService","$state",function(e,t){return{restrict:"E",templateUrl:"templates/message/dCriticalCard.html"}}]),angular.module("PocketDoctor.Message").directive("criticalCards",["$state",function(e){return{restrict:"E",templateUrl:"templates/message/dCriticalCards.html",link:function(t,a,n){t.toCriticalListView=function(){e.go("criticalList")}}}}]),angular.module("PocketDoctor.Message").directive("criticalInfo",function(){return{restrict:"E",templateUrl:"templates/message/dCriticalInfo.html"}}),angular.module("PocketDoctor.Message").directive("drugReviewInfo",function(){return{restrict:"E",templateUrl:"templates/message/dDrugReviewInfo.html"}}),angular.module("PocketDoctor.Message").directive("drugReview",["$state",function(e){return{restrict:"E",templateUrl:"templates/message/dDrugReview.html",link:function(t,a,n){t.toDrugReviewCheckDetailView=function(){e.go("drugReviewCheckDetail")}}}}]),angular.module("PocketDoctor.Message").directive("drugReviewNotice",["$state",function(e){return{restrict:"E",templateUrl:"templates/message/dDrugReviewNotice.html",link:function(t,a,n){t.toDrugReviewDetailView=function(){e.go("drugReviewDetail")}}}}]),angular.module("PocketDoctor.Message").directive("examReport",["$state","GlobalService",function(){return{restrict:"E",templateUrl:"templates/message/dExamReport.html"}}]),angular.module("PocketDoctor.Message").directive("labReport",["$state","GlobalService",function(){return{restrict:"E",templateUrl:"templates/message/dLabReport.html"}}]),angular.module("PocketDoctor.Message").directive("messageCard",function(){return{restrict:"E",templateUrl:"templates/message/dMessageCard.html"}}),angular.module("PocketDoctor.Message").directive("operationDetailInfo",["$state",function(){return{restrict:"E",templateUrl:"templates/message/dOperationDetailInfo.html"}}]),angular.module("PocketDoctor.Message").directive("operationNotice",["$state",function(e){return{restrict:"E",templateUrl:"templates/message/dOperationNotice.html",link:function(t){t.onTouch=function(){e.go("operationDetail",{operationInfo:t.message})}}}}]),angular.module("PocketDoctor.Message").directive("operationSchedule",function(){return{restrict:"E",templateUrl:"templates/message/dOperationSchedule.html"}}),angular.module("PocketDoctor.Message").service("MessageService",["HttpService","GlobalService",function(e,t){this.getMessageData=function(){var a={url:"messages",method:"get",params:{userId:t.getCurrentUserInfo().userId}};return e.handleRequest(a)},this.getMessageHistory=function(a){var n={url:"historyMessages",method:"get",params:{userId:t.getCurrentUserInfo().userId,keyWords:a,pageNum:t.getMessageStartPageIndex()}};return e.handleRequest(n)},this.deleteMessage=function(t,a){var n={url:"message",method:"delete",params:{type:t,id:a,hospitalId:localStorage.hospitalId}};return e.handleRequest(n)},this.updateMessage=function(t,a,n){var i={url:"message",method:"put",data:{primaryKey:{type:t,id:a},value:{type:t,id:a,hospitalId:localStorage.hospitalId,readTimes:n+1}}};return e.handleRequest(i)}}]),angular.module("PocketDoctor.AlarmHistory",[]),angular.module("PocketDoctor.BaseInfo",["patInfoStorage"]),angular.module("PocketDoctor.Exam",[]),angular.module("PocketDoctor.Lab",[]),angular.module("PocketDoctor.OrderInfo",[]),angular.module("PocketDoctor.PatInfo",["PocketDoctor.PatList"]),angular.module("PocketDoctor.PatList",[]),angular.module("PocketDoctor.VitalSignsMain",[]),angular.module("PocketDoctor.Push").service("PushService",["$q","$http","UserInfoService",function(e,t,a){var n=this;n.bindPush=function(){function e(e){var n,i=e.userid,r=(e.appid,e.channelid);a.getUserInfo().then(function(e){n=e.value[0].userId,console.log("userId"+n),t({method:"put",url:localStorage.Url+"/user",data:{userId:n,pushUserId:i,pushChannelId:r,tag:"",deviceType:3}}).success(function(e){console.log("pushSuccess"+e)}).error(function(e){console.log("pushError"+e)})},function(){})}function n(){console.log("绑定失败！")}window.baidupush&&(window.baidupush.bindbaiduPush(),document.addEventListener("BaiduPushBindSuccess",e,!1),document.addEventListener("BaiduPushBindFail",n,!1))},n.push=function(e){n.msg=JSON.parse(e),n.id=n.msg.messageId,console.log(n.id);var t=document.getElementsByClassName("messageView");if(t){var a=angular.element(t).scope();a.addMessageData(n.id)}},n.getMsgContentById=function(a){console.log(a);var n=e.defer();return t({method:"get",url:localStorage.Url+"/getMessage/messageId",params:{messageId:a}}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),angular.module("PocketDoctor.Push").service("UserInfoService",["$http","$q",function(e,t){this.getUserInfo=function(){var a=t.defer();return e({method:"get",url:localStorage.Url+"/queryUserInfo",params:{userName:localStorage.name.toUpperCase(),hospitalId:localStorage.hospitalId}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise}}]),angular.module("PocketDoctor.Schedule").controller("consultationScheduleCtrl",["$scope","$state","$filter","ConsultationService",function(e,t,a,n){e.header={},e.$on("$ionicView.afterEnter",function(){e.event=t.params.event,n.getConsultation(e.event.fk_schedule).then(function(t){e.consultation=t.value[0]})}),e.backToSchedule=function(){t.go("app.schedule")},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToSchedule,center:"日程详情"}}]),angular.module("PocketDoctor.Schedule").controller("dNewScheduleCtrl",["$scope","$ionicPopup",function(e,t){e.repeatClick=function(){e.items=["永不","一次","每天","每周","每月"],e.popup=t.show({cssClass:"selectPopup",templateUrl:"templates/schedule/selectPopup.html",scope:this}),this.backToExit=function(){e.popup&&e.popup.close()},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToExit,center:"请选择"},this.itemClick=function(t){e.event.repeatRate=t,e.popup&&e.popup.close()}},e.remindClick=function(){e.items=["20分","30分","一个小时","一个半小时","两个小时"],e.popup=t.show({cssClass:"selectPopup",templateUrl:"templates/schedule/selectPopup.html",scope:this}),e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToExit,center:"请选择"},this.backToExit=function(){e.popup&&e.popup.close()},this.itemClick=function(t){e.event.remind=t,e.popup&&e.popup.close()}}}]),angular.module("PocketDoctor.Schedule").controller("editScheduleCtrl",["$scope","$state","$ionicPopup","$filter","EditScheduleService","GlobalLoadService","GlobalService",function(e,t,a,n,i,r,l){e.header={},e.$on("$ionicView.afterEnter",function(){e.oldData={};for(var a in t.params.event)e.oldData[a]=t.params.event[a];e.event={};for(var a in t.params.event)e.event[a]=t.params.event[a];e.event.start&&e.event.end&&(e.event.startdate=new Date(e.event.start),e.event.starttime=new Date(e.event.start),e.event.enddate=new Date(e.event.end),e.event.endtime=new Date(e.event.end))}),e.cancelEditSchedule=function(){var n=a.confirm({cancelText:"取消",okText:"确定",title:"提示",template:"确定要离开该页面吗?"});n.then(function(a){a&&(e.event=e.oldData,t.go("generalSchedule",{event:e.oldData}))})},e.confirmEditSchedule=function(){if(e.event){if(!e.event.title)return void a.alert({title:"提示",template:"请先填写标题",okText:"确定"});if(e.event.title.length>50)return void a.alert({title:"提示",template:"标题最多输入50个字",okText:"确定"});if(e.event.place&&e.event.place.length>50)return void a.alert({title:"提示",template:"地点最多输入50个字",okText:"确定"});if(e.event.start=new Date(n("date")(new Date(e.event.startdate),"yyyy-MM-dd")+" "+n("date")(new Date(e.event.starttime),"HH:mm")).valueOf(),e.event.end=new Date(n("date")(new Date(e.event.enddate),"yyyy-MM-dd")+" "+n("date")(new Date(e.event.endtime),"HH:mm")).valueOf(),e.event.allDay){if(e.event.start>e.event.end)return void a.alert({title:"提示",template:"开始时间不能大于结束时间",okText:"确定"})}else if(e.event.start>=e.event.end)return void a.alert({title:"提示",template:"开始时间必须小于结束时间",okText:"确定"});r.show(),e.event.createTime=new Date(e.event.createTime).valueOf(),e.event.lastModify=(new Date).valueOf();var l={scheduleId:e.event.scheduleId,fk_schedule:e.event.fk_schedule,userId:e.event.userId,title:e.event.title,place:e.event.place,allDay:e.event.allDay,start:e.event.start,end:e.event.end,repeatRate:e.event.repeatRate,lastModify:e.event.lastModify,createTime:e.event.createTime,content:e.event.content,remind:e.event.remind,scheduleClass:e.event.scheduleClass};i.editSchedule(l).then(function(){r.hide(),t.go("app.schedule")})}},e.header={leftIsText:!0,leftText:"取消",leftClick:e.cancelEditSchedule,center:"编辑日程",rightIsText:!0,rightText:"完成",rightClick:e.confirmEditSchedule}}]),angular.module("PocketDoctor.Schedule").controller("generalScheduleCtrl",["$scope","$state","$filter","$ionicPopup","DelScheduleService","GlobalService",function(e,t,a,n,i,r){e.header={},e.$on("$ionicView.afterEnter",function(){e.$apply(function(){e.event=t.params.event})}),e.backToSchedule=function(){t.go("app.schedule")},e.editSchedule=function(){t.go("editSchedule",{event:e.event,scheduleId:e.event.scheduleId})},e.deleteSchedule=function(){var a=n.confirm({title:"提示",template:"确定要删除该日程吗?",cancelText:"取消",okText:"确定"});a.then(function(a){a&&i.delSchedule(e.event.scheduleId).then(function(){t.go("app.schedule")})})},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToSchedule,center:"日程详情",rightIsText:!0,rightText:"编辑",rightClick:e.editSchedule}}]),angular.module("PocketDoctor.Schedule").controller("newScheduleCtrl",["$scope","$state","$ionicPopup","$filter","AddScheduleService","GlobalLoadService","GlobalService",function(e,t,a,n,i,r,l){e.header={},e.$on("$ionicView.afterEnter",function(){e.event={};var t=n("date")(new Date,"yyyy-MM-dd HH:mm"),a=n("date")(new Date((new Date).setHours((new Date).getHours()+2)),"yyyy-MM-dd HH:mm");e.event.startdate=new Date(t),e.event.starttime=new Date(t),e.event.enddate=new Date(a),e.event.endtime=new Date(a)}),e.cancelAddSchedule=function(){var e=a.confirm({cancelText:"取消",okText:"确定",title:"提示",template:"确定要离开该页面吗?"});e.then(function(e){e&&t.go("app.schedule")})},e.confirmAddSchedule=function(){if(e.event){if(!e.event.title)return void a.alert({title:"提示",template:"请先填写标题",okText:"确定"});if(e.event.title.length>50)return void a.alert({title:"提示",template:"标题最多输入50个字",okText:"确定"});if(e.event.place&&e.event.place.length>50)return void a.alert({title:"提示",template:"地点最多输入50个字",okText:"确定"});if(e.event.start=new Date(n("date")(new Date(e.event.startdate),"yyyy-MM-dd")+" "+n("date")(new Date(e.event.starttime),"HH:mm")).valueOf(),e.event.end=new Date(n("date")(new Date(e.event.enddate),"yyyy-MM-dd")+" "+n("date")(new Date(e.event.endtime),"HH:mm")).valueOf(),e.event.allDay){if(e.event.start>e.event.end)return void a.alert({title:"提示",template:"开始时间不能大于结束时间",okText:"确定"})}else if(e.event.start>=e.event.end)return void a.alert({title:"提示",template:"开始时间必须小于结束时间",okText:"确定"});r.show(),e.event.createTime=(new Date).valueOf(),e.event.lastModify=(new Date).valueOf();var o={fk_schedule:0,userId:l.getCurrentUserInfo().userId,title:e.event.title,place:e.event.place?e.event.place:"",allDay:e.event.allDay?e.event.allDay:!1,start:e.event.start,end:e.event.end,repeatRate:e.event.repeatRate?e.event.repeatRate:"",lastModify:e.event.lastModify,createTime:e.event.createTime,content:e.event.content?e.event.content:"",remind:e.event.remind?e.event.remind:"",scheduleClass:0};i.addSchedule(o).then(function(){r.hide(),t.go("app.schedule")})}},e.header={leftIsText:!0,leftText:"取消",leftClick:e.cancelAddSchedule,center:"新增日程",rightIsText:!0,rightText:"添加",rightClick:e.confirmAddSchedule}}]),angular.module("PocketDoctor.Schedule").controller("operationScheduleCtrl",["$scope","$state","$filter","OperationService","GlobalService",function(e,t,a,n,i){e.header={},e.refresh=function(){n.getOperation(e.event.fk_schedule).then(function(t){e.operation=t.value[0],i.setOperationDetail(t.value[0])})},e.$on("$ionicView.afterEnter",function(){e.event=t.params.event,angular.isDefined(i.getOperationDetail())&&i.getOperationDetail().operationNoticeId===e.event.fk_schedule?e.operation=i.getOperationDetail():e.refresh()}),e.backToSchedule=function(){t.go("app.schedule")},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.backToSchedule,center:"日程详情"}}]),angular.module("PocketDoctor.Schedule").controller("scheduleCtrl",["$filter","$scope","$state","ScheduleService",function(e,t,a,n){t.changeMode=function(e){t.mode=e},t.today=function(){t.currentDate=new Date},t.isToday=function(){var e=new Date,a=new Date(t.currentDate);return e.setHours(0,0,0,0),a.setHours(0,0,0,0),e.getTime()===a.getTime()},t.$on("$ionicView.afterEnter",function(){t.loadEvents()}),t.loadEvents=function(){n.getSchedulePromise().then(function(e){t.eventSource=[],angular.forEach(e.value,function(e){e.startTime=new Date(e.start),e.endTime=new Date(e.end),e.createTime=new Date(e.createTime),e.lastModify=new Date(e.lastModify),t.eventSource.push(e)})},function(){})},t.onEventSelected=function(e){0===e.scheduleClass?a.go("generalSchedule",{event:e,scheduleId:e.scheduleId}):1===e.scheduleClass?a.go("consultationSchedule",{event:e,scheduleId:e.scheduleId}):2===e.scheduleClass&&a.go("operationSchedule",{event:e,scheduleId:e.scheduleId})},t.newSchedule=function(){a.go("newSchedule")}}]),angular.module("PocketDoctor.Schedule").directive("consultationInfo",function(){return{restrict:"E",templateUrl:"templates/schedule/dConsultationInfo.html"}}),angular.module("PocketDoctor.Schedule").directive("newSchedule",function(){return{restrict:"E",templateUrl:"templates/schedule/dNewSchedule.html",controller:"dNewScheduleCtrl"}}),angular.module("PocketDoctor.Schedule").directive("operationInfo",function(){return{restrict:"E",templateUrl:"templates/schedule/dOperationInfo.html"}}),angular.module("PocketDoctor.Schedule").directive("scheduleBaseInfo",function(){return{restrict:"E",templateUrl:"templates/schedule/dScheduleBaseInfo.html"}}),angular.module("PocketDoctor.Schedule").directive("scheduleIntro",function(){return{restrict:"E",templateUrl:"templates/schedule/dScheduleIntro.html"}}),angular.module("PocketDoctor.Schedule").service("AddScheduleService",["HttpService",function(e){this.addSchedule=function(t){var a={url:"schedule",method:"post",data:{primaryKey:"scheduleId",value:t}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.Schedule").service("ConsultationService",["HttpService",function(e){this.getConsultation=function(t){var a={url:"consultationDetail",method:"get",params:{hospitalId:localStorage.hospitalId,consultationId:t}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.Schedule").service("DelScheduleService",["HttpService",function(e){this.delSchedule=function(t){var a={url:"schedule",method:"delete",params:{scheduleId:t}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.Schedule").service("EditScheduleService",["HttpService",function(e){this.editSchedule=function(t){var a={url:"schedule",method:"put",data:{primaryKey:{scheduleId:t.scheduleId},value:t}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.Schedule").service("OperationService",["HttpService",function(e){this.getOperation=function(t){var a={url:"operationDetail",method:"get",params:{hospitalId:localStorage.hospitalId,operationNoticeId:t}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.Schedule").service("ScheduleService",["HttpService","GlobalService",function(e,t){this.getSchedulePromise=function(){var a={url:"schedules",method:"get",params:{userId:t.getCurrentUserInfo().userId}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.FormulaList",["ionic"]),angular.module("PocketDoctor.Formulas",[]),angular.module("PocketDoctor.patCollectList",[]),angular.module("PocketDoctor.tools",[]);var KyeeUtilModule=angular.module("kyee-ionic-util",[]);angular.module("PocketDoctor.AlarmHistory").controller("alarmHistoryCtrl",["$scope","alarmHistoryService",function(e,t){t.getAlarmHistroyPromise().then(function(t){e.alarmHistoryList=t.value},function(){})}]),angular.module("PocketDoctor.AlarmHistory").service("alarmHistoryService",["$q","$http","HttpService","GlobalService",function(e,t,a,n){this.getAlarmHistroyPromise=function(){var t=(e.defer,{});t.patientId=n.getPatientId(),t.visitId=n.getVisitId(),t.hospitalId=localStorage.hospitalId,t.hospitalUserId=n.getCurrentUserInfo().hospitalUserId;var i={params:t,url:"alertHistories",method:"get"};return a.handleRequest(i)}}]),angular.module("PocketDoctor.BaseInfo").controller("BaseInfoCtrl",["$scope","$stateParams","GlobalService",function(e,t,a){e.$on("$ionicView.beforeEnter",function(){e.header.rightIsText=!1,e.header.center=a.getPatInfo().patName+"("+a.getPatInfo().baseInfo.bedNo+"床)",e.baseInfo=a.getBaseInfo(),e.baseInfo.dateOfBirth=new Date(e.baseInfo.dateOfBirth).getTime()})}]),angular.module("PocketDoctor.Exam").controller("examInfoCtrl",["$scope","$stateParams","$state","$rootScope","$ionicPlatform","GlobalService","examInfoService",function(e,t,a,n,i,r,l){var o=null;e.hideOrShow=function(e){return"初步报告"===e},e.queryExamReport=function(e){"初步报告"===e.resultStatus&&a.go("examReport",{examReport:e})},e.refresh=function(t){e.ExamList=[],t||(e.dataLoaded=!0),l.getExamInfosPromise(r.getExamFilterValue()).then(function(t){if(e.ExamList=t.value,r.setExamList(e.ExamList),null===r.getExamFilterValue()){o=t.value;var a=e.queryExamFilterValue();r.setExamFilterAllValue(a)}e.dataLoaded||(e.dataLoaded=!0),e.$broadcast("scroll.refreshComplete")},function(){angular.isDefined(window.plugins.toast)&&window.plugins.toast.show("加载失败","short","center"),e.$broadcast("scroll.refreshComplete")})},e.$on("$ionicView.afterEnter",function(t,n){if(e.dataLoaded=!1,r.setExamNo(null),null!==(e.ExamList=r.getExamList())&&_.isEqual(a.params.filterContent,r.getExamFilterValue()))e.dataLoaded=!0;else{var i=null;null!==a.params.filterContent&&(i={},i.examClassFilterText=void 0===a.params.filterContent.examClassFilterText?null:a.params.filterContent.examClassFilterText,i.examSubClassFilterText=void 0===a.params.filterContent.examSubClassFilterText?null:a.params.filterContent.examSubClassFilterText,i.examStatusFilterText=void 0===a.params.filterContent.examStatusFilterText?null:a.params.filterContent.examStatusFilterText),r.setExamFilterValue(i),e.refresh(!0)}}),e.queryExamFilterValue=function(){for(var e=[],t=[],a=0,n=0,i=0;i<o.length;++i)-1===e.indexOf(o[i].examClass)&&(e[n++]=o[i].examClass),-1===t.indexOf(o[i].resultStatus)&&(t[a++]=o[i].resultStatus);for(var r=[],i=0;n>i;++i){for(var l=[],s=0,c=0;c<o.length;++c)o[c].examClass===e[i]&&-1===l.indexOf(o[c].examSubClass)&&(l[s++]=o[c].examSubClass);var d={};d.examClass=e[i],d.examSubClass=l,r[i]=d}return[r,t]}}]),angular.module("PocketDoctor.Exam").controller("examFilterCtrl",["$scope","$stateParams","$state","GlobalService","examInfoService",function(e,t,a,n,i){e.header={},e.ExamSubClass=[];var r=n.getExamFilterAllValue();if(null!==r){e.ExamItem=r[0];for(var l=0,o=0;o<r[0].length;++o)for(var s=0;s<r[0][o].examSubClass.length;++s)e.ExamSubClass[l++]=r[0][o].examSubClass[s],e.allExamSubClass=e.ExamSubClass;e.ResultStatus=r[1]}if(e.examClassFlag=[],e.examSubClassFlag=[],e.examStatusFlag=[],e.queryExamFilter={},null!==n.getExamFilterValue()&&void 0!==n.getExamFilterValue()){var c=n.getExamFilterValue();if(null!==c.examClassFilterText){e.examClassFlag[c.examClassFilterText]=!0,e.queryExamFilter.examClassFilterText=c.examClassFilterText;for(var o=0;o<r[0].length;++o)r[0][o].examClass==c.examClassFilterText&&(e.ExamSubClass=r[0][o].examSubClass,e.examSubClassFlag[c.examSubClassFilterText]=!0)}null!==c.examSubClassFilterText&&(e.examSubClassFlag[c.examSubClassFilterText]=!0,e.queryExamFilter.examSubClassFilterText=c.examSubClassFilterText),null!==c.examStatusFilterText&&(e.examStatusFlag[c.examStatusFilterText]=!0,e.queryExamFilter.examStatusFilterText=c.examStatusFilterText)}if(null!==n.getExamFilterValue()&&void 0!==n.getExamFilterValue()){var c=n.getExamFilterValue();if(null!==c.examClassFilterText){e.examClassFlag[c.examClassFilterText]=!0;for(var o=0;o<r[0].length;++o)r[0][o].examClass==c.examClassFilterText&&(e.ExamSubClass=r[0][o].examSubClass)}null!==c.examSubClassFilterText&&(e.examSubClassFlag[c.examSubClassFilterText]=!0),null!==c.examStatusFilterText&&(e.examStatusFlag[c.examStatusFilterText]=!0)}e.queryExamClassText=function(t){if(!0===e.examClassFlag[t])e.examClassFlag=[!1],e.queryExamFilter.examClassFilterText=null,e.ExamSubClass=e.allExamSubClass;else{e.examClassFlag=[!1],e.examClassFlag[t]=!0,e.queryExamFilter.examClassFilterText=t;for(var a=0;a<r[0].length;++a)r[0][a].examClass==t&&(e.ExamSubClass=r[0][a].examSubClass)}e.examSubClassFlag=[!1],e.queryExamFilter.examSubClassFilterText=null},e.queryExamSubClassText=function(t){!0===e.examSubClassFlag[t]?(e.examSubClassFlag=[!1],e.queryExamFilter.examSubClassFilterText=null):(e.examSubClassFlag=[!1],e.examSubClassFlag[t]=!0,e.queryExamFilter.examSubClassFilterText=t)},e.queryExamStatusText=function(t){!0===e.examStatusFlag[t]?(e.examStatusFlag=[!1],e.queryExamFilter.examStatusFilterText=null):(e.examStatusFlag=[!1],e.examStatusFlag[t]=!0,e.queryExamFilter.examStatusFilterText=t)},e.$parent.$parent.okFn=function(){a.go("patInfoTabs.exam",{filterContent:e.queryExamFilter}),e.closeModal()},e.$on("$ionicView.beforeEnter",function(){null===n.getExamFilterValue()&&(e.examClassFlag=[!1],e.examSubClassFlag=[!1],e.examStatusFlag=[!1],e.queryExamFilter.examClassFilterText=null,e.queryExamFilter.examSubClassFilterText=null,e.queryExamFilter.examStatusFilterText=null,e.ExamSubClass=e.allExamSubClass)})}]),angular.module("PocketDoctor.Exam").controller("examReportCtrl",["$scope","$state","$stateParams","examInfoService","GlobalService",function(e,t,a,n,i){e.header={},e.examReport=a.examReport,(void 0===e.examReport||null===e.examReport)&&n.getExamInfosPromise().then(function(t){e.examReport=t.value[0]},function(){}),e.goBackExam=function(){window.history.go(-1)},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.goBackExam,center:"检查报告单"}}]),angular.module("PocketDoctor.Exam").directive("examList",function(){return{restrict:"E",templateUrl:"templates/pat/exam/dExamlist.html",scope:!0}}),angular.module("PocketDoctor.Exam").service("examFilterService",["$q","$http","$cacheFactory","GlobalService","HttpService",function(e,t,a,n,i){this.getExamFilterPromise=function(t){var a=(e.defer(),{});a.patientId=n.getPatientId(),a.visitId=n.getVisitId(),a.hospitalId=localStorage.hospitalId,void 0!==t.examClassFilterText&&(a.examClass=t.examClassFilterText),void 0!==t.examSubClassFilterText&&(a.examSubClass=t.examSubClassFilterText),void 0!==t.examStatusFilterText&&(a.resultStatus=t.examStatusFilterText);var r={url:"exams",method:"get",params:a};return i.handleRequest(r)}}]),angular.module("PocketDoctor.Exam").service("examInfoService",["$q","$http","$cacheFactory","GlobalService","HttpService",function(e,t,a,n,i){this.getExamInfosPromise=function(t){var a=(e.defer(),{});a.patientId=n.getPatientId(),a.visitId=n.getVisitId(),a.hospitalId=localStorage.hospitalId,void 0!==n.getExamNo()&&null!==n.getExamNo()&&""!==n.getExamNo()&&(a.examNo=n.getExamNo()),null!==t&&void 0!==t&&(void 0!==t.examClassFilterText&&(a.examClass=t.examClassFilterText),void 0!==t.examSubClassFilterText&&(a.examSubClass=t.examSubClassFilterText),void 0!==t.examStatusFilterText&&(a.resultStatus=t.examStatusFilterText));var r={url:"exams",method:"get",params:a};return i.handleRequest(r)}}]),angular.module("PocketDoctor.Lab").controller("labInfosCtrl",["$scope","$stateParams","$state","$ionicPlatform","labInfoService","GlobalService",function(e,t,a,n,i,r){e.hideOrShow=function(e){return"确认报告"===e},e.queryLabReport=function(e){"确认报告"===e.examResultStatusName&&(r.setTestNo(e.testNo),a.go("labReport",{testNo:e.testNo}))},e.refresh=function(a){e.LabList=[],a||(e.dataLoaded=!0),i.getLabInfoPromise(t.labFilterValue).then(function(t){e.$broadcast("scroll.refreshComplete"),a&&(e.dataLoaded=!0),e.LabList=t.value,r.setLabList(e.LabList)},function(){angular.isDefined(window.plugins.toast)&&window.plugins.toast.show("加载失败","short","center"),e.$broadcast("scroll.refreshComplete")})},e.$on("$ionicView.afterEnter",function(a,n){e.dataLoaded=!1,null===(e.LabList=r.getLabList())||t.labFilterValue!==r.getLabFilterValue()?(r.setLabFilterValue(t.labFilterValue),e.refresh(!0)):e.dataLoaded=!0})}]),angular.module("PocketDoctor.Lab").controller("labFilterCtrl",["$scope","$stateParams","$state","GlobalService",function(e,t,a,n){e.header={};var i=["收到申请","已执行","初步报告","确认报告"];if(e.flag=[!1],e.queryLabStatusText=function(t){!0===e.flag[t]?(e.flag=[!1],e.labStatusFilterText=null):(e.flag=[!1],e.flag[t]=!0,e.labStatusFilterText=i[t])},null!==n.getLabFilterValue()&&void 0!==n.getLabFilterValue()){var r=n.getLabFilterValue();if(null!==r){var l=i.indexOf(r);e.flag[l]=!0}}e.$parent.$parent.okFn=function(){a.go("patInfoTabs.lab",{labFilterValue:e.labStatusFilterText}),e.closeModal()},e.$on("$ionicView.beforeEnter",function(){null===n.getLabFilterValue()&&(e.flag=[!1,!1,!1,!1])})}]),angular.module("PocketDoctor.Lab").controller("labReportCtrl",["$scope","$state","$stateParams","GlobalService","labReportService","$ionicPopup",function(e,t,a,n,i,r){e.labReportDateTimeList=[],e.labReportList=[],i.getLabReportPromise(a.testNo).then(function(t){t.value.length>0?(e.labReportList=t.value,e.setDateTimeList()):r.alert({title:"提示",template:"没有详细检验报告信息",okText:"确定"})},function(){}),e.setDateTimeList=function(){for(var t in e.labReportList)e.labReportDateTimeList.indexOf(e.labReportList[t].resultDateTime)<0&&e.labReportDateTimeList.push(e.labReportList[t].resultDateTime)},e.goBackLastPage=function(){window.history.go(-1)},e.hideOrShow=function(e){return parseFloat(e)},e.queryLabTrendChart=function(a){parseFloat(a.result)&&(n.setPatientId(e.labReportList[0].patientId),t.go("labTrendChart",{pid:n.getPatientId(),itemCode:a.reportItemCode}))},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.goBackLastPage,center:"检验报告单"}}]).filter("filterList",function(){return function(e,t){var a=[];for(var n in e)e[n].resultDateTime===t&&a.push(e[n]);return a}}),angular.module("PocketDoctor.Lab").controller("labTrendChartCtrl",["$scope","$state","$stateParams","$filter","GlobalService","ChartService","$ionicPopup",function(e,t,a,n,i,r,l){e.header={},r.getCharts(a.itemCode).then(function(t){if(t=t.value,t.length>0){for(var a=t[0].reportItemName+" "+t[0].name,n=[],i=[],r=[],o=[],s=[],c=t[0].units,d=0;d<t.length;d++)parseFloat(t[d].result)&&(n.push(parseFloat(t[d].result)),o.push(parseFloat(t[d].result))),t[d].referenceRange&&(i.push(parseFloat(t[d].referenceRange.split("～")[1])),
r.push(parseFloat(t[d].referenceRange.split("～")[0]))),t[d].resultDateTime&&s.push(t[d].resultDateTime);n.length||i.length||r.length?e.chartConfig={series:[{name:"曲线图",data:n,type:"line",color:"blue"},{name:"最大值",data:i,type:"line",color:"green"},{name:"最小值",data:r,type:"line",color:"green"},{name:"柱状图",data:o,type:"column",color:"red"}],xAxis:{categories:s,labels:{step:2,rotation:-45,style:{fontSize:"10px",fontFamily:"Verdana, sans-serif"}}},yAxis:{title:{text:c}},title:{text:a}}:(l.alert({title:"提示",template:"该检验结果没有趋势图",okText:"确定"}),window.history.go(-1))}}),e.goBackLastPage=function(){window.history.go(-1)},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.goBackLastPage,center:"趋势图"}}]),angular.module("PocketDoctor.Lab").directive("labList",function(){return{restrict:"E",templateUrl:"templates/pat/lab/dLablist.html",scope:!0}}),angular.module("PocketDoctor.Lab").directive("labReportList",function(){return{restrict:"E",templateUrl:"templates/pat/lab/dLabReportlist.html"}}),angular.module("PocketDoctor.Lab").service("labReportService",["$q","$http","HttpService",function(e,t,a){this.getLabReportPromise=function(e){var t={url:"labReport",method:"get",params:{testNo:e,hospitalId:localStorage.hospitalId}};return a.handleRequest(t)}}]),angular.module("PocketDoctor.Lab").service("labInfoService",["$q","$http","GlobalService","HttpService",function(e,t,a,n){this.getLabInfoPromise=function(e){var t={};t.patientId=a.getPatientId(),t.visitId=a.getVisitId(),t.hospitalId=localStorage.hospitalId,null!==e&&void 0!==e&&(t.examResultStatusName=e);var i={url:"labs",method:"get",params:t};return n.handleRequest(i)}}]),angular.module("PocketDoctor.Lab").service("ChartService",["$state","$http","$stateParams","GlobalService","HttpService",function(e,t,a,n,i){this.getCharts=function(e){var t={url:"labTrendChart",method:"get",params:{patientId:n.getPatientId(),reportItemCode:e,hospitalId:localStorage.hospitalId}};return i.handleRequest(t)}}]),angular.module("PocketDoctor.OrderInfo").directive("orderInfo",function(){return{restrict:"E",templateUrl:"templates/pat/order/dOrderInfo.html",scope:!0}}),angular.module("PocketDoctor.OrderInfo").controller("OrderInfoCtrl",["$scope","$state","$http","$stateParams","$filter","OrderInfoService","GlobalService",function(e,t,a,n,i,r,l){function o(){n.startIndex=0,r.getPagingOrderInfo().then(function(t){console.log("refresh order"),l.setOrderInfo(t.value),e.orderPagingInfo=i("filter")(l.getOrderInfo(),l.getOrderFilterContent(),!0),n.startIndex=l.getPagingRecords(),e.orderInfo=e.orderPagingInfo.slice(0,n.startIndex),e.isMore=e.orderInfo.length<e.orderPagingInfo.length,e.$broadcast("scroll.refreshComplete"),e.dataLoaded=!0},function(){e.isMore=!1,e.dataLoaded=!0,angular.isDefined(window.plugins.toast)&&window.plugins.toast.show("无法连接网络","center","bottom")})}e.$on("$ionicView.beforeEnter",function(){e.dataLoaded=!1,e.orderPagingInfo=null,n.startIndex=0,l.setPagingRecords(n.pagingRecords),e.filterContent={},null==l.getOrderFilterContent()&&void 0==l.getOrderFilterContent()&&l.setOrderFilterContent(e.filterContent),void 0==l.getOrderInfo()||null==l.getOrderInfo()?e.refresh(!0):(null!==t.params.data?(e.orderPagingInfo=t.params.data,l.setOrderFilterContent(t.params.orderFilterContent)):(l.setOrderFilterContent({}),e.orderPagingInfo=i("filter")(l.getOrderInfo(),l.getOrderFilterContent(),!0)),e.orderInfo=e.orderPagingInfo.slice(0,l.getPagingRecords()),e.isMore=e.orderInfo.length<e.orderPagingInfo.length,s=!1,e.$broadcast("scroll.infiniteScrollComplete"),e.dataLoaded=!0)}),e.refresh=function(t){t||(e.dataLoaded=!0),o()};var s=!1;e.loadMore=function(){s?void 0!==e.orderInfo&&(e.isMore=e.orderInfo.length<e.orderPagingInfo.length,e.$broadcast("scroll.infiniteScrollComplete"),n.startIndex+l.getPagingRecords()>=e.orderPagingInfo.length?(console.log("最后一页"),e.orderPagingInfo.length!=e.orderInfo.length&&(e.orderInfo=e.orderInfo.concat(e.orderPagingInfo.slice(n.startIndex,l.getOrderInfo().length+1))),console.log(e.orderInfo.length)):(console.log("中间页"),e.orderInfo=e.orderInfo.concat(e.orderPagingInfo.slice(n.startIndex,n.startIndex+20)),console.log(e.orderInfo.length)),n.startIndex=n.startIndex+l.getPagingRecords()):(s=!0,e.$broadcast("scroll.infiniteScrollComplete"))}}]),angular.module("PocketDoctor.OrderInfo").controller("OrderSearchCtrl",["$scope","$state","$stateParams","$filter","GlobalService","OrderInfoService",function(e,t,a,n,i,r){if(e.header={},e.longTempMark=[!1,!1],e["class"]=[!1,!1,!1,!1,!1,!1,!1],e.status=[!1,!1,!1,!1,!1],e.longTempText=["长期","临时"],e.statusText=["待提交","新开","执行","停止","作废"],e.classText=["药疗","处置","膳食","护理","手术","检查","化验"],e.filterContent={},null!==i.getOrderFilterContent()&&void 0!==i.getOrderFilterContent()){if(null!==i.getOrderFilterContent().repeatIndicator&&void 0!==i.getOrderFilterContent().repeatIndicator){var l=e.longTempText.indexOf(i.getOrderFilterContent().repeatIndicator);e.longTempMark[l]=!0,e.filterContent.repeatIndicatorFilterText=e.longTempText[l]}if(null!==i.getOrderFilterContent().orderClass&&void 0!==i.getOrderFilterContent().orderClass){var o=e.classText.indexOf(i.getOrderFilterContent().orderClass);e["class"][o]=!0,e.filterContent.orderClassFilterText=e.classText[o]}if(null!==i.getOrderFilterContent().orderStatus&&void 0!==i.getOrderFilterContent().orderStatus){var s=e.statusText.indexOf(i.getOrderFilterContent().orderStatus);e.status[s]=!0,e.filterContent.orderStatusFilterText=e.statusText[s]}}e.SearchLongClick=function(t){!0===e.longTempMark[t]?(e.longTempMark=[!1],e.repeatIndicatorFilterText=null,e.filterContent.repeatIndicatorFilterText=null):(e.longTempMark=[!1],e.longTempMark[t]=!0,e.filterContent.repeatIndicatorFilterText=e.longTempText[t])},e.SearchOrderClassClick=function(t){!0===e["class"][t]?(e["class"]=[!1],e.orderClassFilterText=null,e.filterContent.orderClassFilterText=null):(e["class"]=[!1],e["class"][t]=!0,e.filterContent.orderClassFilterText=e.classText[t])},e.SearchOrderStatusClick=function(t){!0===e.status[t]?(e.status=[!1],e.orderStatusFilterText=null,e.filterContent.orderStatusFilterText=null):(e.status=[!1],e.status[t]=!0,e.filterContent.orderStatusFilterText=e.statusText[t])},e.$parent.$parent.okFn=function(){var a={};null!=e.filterContent&&(void 0!==e.filterContent.repeatIndicatorFilterText&&null!==e.filterContent.repeatIndicatorFilterText&&(a.repeatIndicator=e.filterContent.repeatIndicatorFilterText),void 0!==e.filterContent.orderClassFilterText&&null!==e.filterContent.orderClassFilterText&&(a.orderClass=e.filterContent.orderClassFilterText),void 0!==e.filterContent.orderStatusFilterText&&null!==e.filterContent.orderStatusFilterText&&(a.orderStatus=e.filterContent.orderStatusFilterText),e.orderfilterInfo=n("filter")(i.getOrderInfo(),a,!0),t.go("patInfoTabs.order",{orderFilterContent:a,data:e.orderfilterInfo})),e.closeModal()},e.cancelFn=function(){e.closeModal()},e.orderSearchBackClick=function(){t.go("patInfoTabs.order",{startIndex:i.getOrderStartIndex(),orderFilterContent:i.getOrderFilterContent()})},e.$on("$ionicView.beforeEnter",function(){null===i.getOrderFilterContent()&&(e.longTempMark=[!1,!1],e["class"]=[!1,!1,!1,!1,!1,!1,!1],e.status=[!1,!1,!1,!1,!1])})}]),angular.module("PocketDoctor.OrderInfo").service("OrderInfoService",["$q","$http","$state","$stateParams","GlobalService","HttpService",function(e,t,a,n,i,r){this.getPagingOrderInfo=function(){var e={};e.patientId=i.getPatientId(),e.visitId=i.getVisitId(),e.hospitalId=localStorage.hospitalId;var t={url:"orders",method:"get",params:e};return r.handleRequest(t)}}]),angular.module("PocketDoctor.PatInfo").controller("PatInfoCtrl",["$scope","$state","$ionicModal","$stateParams","$http","$ionicTabsDelegate","$ionicSlideBoxDelegate","$ionicScrollDelegate","$ionicHistory","examInfoService","GlobalService",function(e,t,a,n,i,r,l,o,s,c,d){e.currentIndex=0,e.stateCollection=["patInfoTabs.baseInfo",null,null,null,null,null],e.selectTabWithIndex=function(t){e.currentIndex=t},e.slideHasChanged=function(t){null===e.stateCollection[t]&&e.changeState(t),e.currentIndex=t},e.swipeChangeTabs=function(){},e.changeState=function(a){switch(a){case 1:t.go("patInfoTabs.order",{startIndex:d.getOrderStartIndex(),orderFilterContent:d.getOrderFilterContent()}),e.stateCollection[a]="patInfoTabs.order";break;case 2:t.go("patInfoTabs.exam"),e.stateCollection[a]="patInfoTabs.exam";break;case 3:t.go("patInfoTabs.lab",{labFilterValue:d.getLabFilterValue()}),e.stateCollection[a]="patInfoTabs.lab";break;case 4:t.go("patInfoTabs.alarmHistory"),e.stateCollection[a]="patInfoTabs.alarmHistory";break;case 5:t.go("patInfoTabs.vitalSigns"),e.stateCollection[a]="patInfoTabs.vitalSigns";break;default:t.go("patInfoTabs.baseInfo")}},e.searchFileClick=function(){var n="templates/pat/";"patInfoTabs.order"===t.current.name?n+="order/orderSearch.html":"patInfoTabs.exam"===t.current.name?n+="exam/examFilter.html":"patInfoTabs.lab"===t.current.name&&(n+="lab/labFilter.html"),a.fromTemplateUrl(n,{animation:"kyee-side-box-animation",scope:e}).then(function(t){e.modal=t,e.openModal()})},e.okFn=function(){console.log("in ok")},e.cancelFn=function(){e.closeModal()},e.openModal=function(){e.modal.isShown()?e.modal.hide():e.modal.show()},e.closeModal=function(){e.modal.remove()},e.goBackLastPage=function(){e.selectTabWithIndex(0),d.goBack()},e.header={leftIsText:!1,leftClick:e.goBackLastPage,leftIsIcon:!0,leftIcon:"default",center:d.getPatInfo().patName+"("+d.getPatInfo().baseInfo.bedNo+"床)",rightIsText:!0,rightText:"筛选",rightClick:e.searchFileClick}}]),angular.module("PocketDoctor.PatInfo").directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,a,n){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}]),angular.module("PocketDoctor.PatInfo").directive("tabSlideBox",["$ionicHistory","$timeout","$window","$ionicSlideBoxDelegate","$ionicScrollDelegate","$state","GlobalService",function($ionicHistory,$timeout,$window,$ionicSlideBoxDelegate,$ionicScrollDelegate,$state,GlobalService){return{restrict:"A, E, C",link:function(e,t,a,n){function i(){{var e=angular.element(o.querySelector(".tsb-icons")),t=e.find("a"),n=e[0].querySelector(".tsb-ic-wrp"),i=t.length;n.querySelector(".scroll")}angular.forEach(t,function(e,t){var a=angular.element(e);a.on("click",function(){d.slide(t)}),a.attr("icon-off")&&a.attr("class",a.attr("icon-off"))});var l=a.tab;("undefined"==typeof a.tab||l>=i||0>l)&&(l=0),0==l&&r(0),$timeout(function(){d.slide(l)},0)}function r(e){var t=angular.element(o.querySelector(".tsb-icons")),a=t.find("a"),n=t[0].querySelector(".tsb-ic-wrp"),i=(a.length,n.querySelector(".scroll")),r=t[0].offsetWidth/2,s=angular.element(a[e]),c=angular.element(t[0].querySelector(".active"));if(s&&s.length){var d=s[0].offsetWidth,m=s[0].offsetLeft;c.attr("icon-off")?c.attr("class",c.attr("icon-off")):c.removeClass("active"),s.attr("icon-on")&&s.attr("class",s.attr("icon-on")),s.addClass("active");var v=r-m-d/2+5;if(i){var p=n.offsetWidth,g=Math.abs(l(i.style.webkitTransform)),f=100,h=40;(m+d+h>g+p||g>m-f)&&(v>0&&(v=0),u.scrollTo(Math.abs(v),0,!0))}else{var v=r-m-d/2+5+"px";n.style.webkitTransform="translate3d("+v+",0,0)"}}}function l(e){return e=e.replace("translate3d(",""),e=e.replace("translate(",""),parseInt(e)}var o=t[0],s=t;s.addClass("tabbed-slidebox"),"bottom"===a.tabsPosition&&s.addClass("btm");var c=o.querySelector(".slider").getAttribute("delegate-handle"),d=$ionicSlideBoxDelegate;c&&(d=d.$getByHandle(c));var u=$ionicScrollDelegate;c&&(u=u.$getByHandle(c));var m=e.events;m.on("slideChange",function(e){r(e.index)}),m.on("ngRepeatFinished",function(e){i()}),i()},controller:["$scope","$attrs","$element",function($scope,$attrs,$element){$scope.events={},$scope.events.on=function(e,t){return e.split(" ").forEach(function(e){$scope.events[e]||($scope.events[e]=[]),$scope.events[e].push(t)}),this},$scope.events.trigger=function(e,t){return angular.forEach($scope.events[e],function(e){e.call(null,t)}),this},$scope.slideHasChanged=function(index){switch($scope.events.trigger("slideChange",{index:index}),index){case 1:$state.go("patInfoTabs.order",{startIndex:GlobalService.getOrderStartIndex(),orderFilterContent:GlobalService.getOrderFilterContent()}),$scope.header.rightIsText="筛选";break;case 2:$state.go("patInfoTabs.exam"),$scope.header.rightIsText="筛选";break;case 3:$state.go("patInfoTabs.lab",{labFilterValue:GlobalService.getLabFilterValue()}),$scope.header.rightIsText="筛选";break;case 4:$state.go("patInfoTabs.alarmHistory"),$scope.header.rightIsText=!1;break;case 5:$state.go("patInfoTabs.vitalSigns"),$scope.header.rightIsText=!1;break;default:$state.go("patInfoTabs.baseInfo"),$scope.header.rightIsText=!1}$timeout(function(){$scope.onSlideMove&&$scope.onSlideMove({index:eval(index)})},100)},$scope.$on("ngRepeatFinished",function(e){$scope.events.trigger("ngRepeatFinished",{event:e})})}]}}]),angular.module("PocketDoctor.PatList").controller("PatListCtrl",["$ionicListDelegate","$scope","$http","$state","$ionicPopup","$ionicLoading","$stateParams","$ionicHistory","GlobalLoadService","GlobalService","PatListService",function(e,t,a,n,i,r,l,o,s,c,d){t.attentionPersonFlag=!1,t.patientListFlag=!1,t.deptList=[],t.attentionDeptList=[],t.wholePatList=[],t.addToDeptList=function(e){t.deptList.indexOf(e)<0&&t.deptList.push(e)},t.addToAttentionDeptList=function(e){t.attentionDeptList.indexOf(e)<0&&t.attentionDeptList.push(e)},t.prepareData=function(){t.wholePatList=c.getPatients(),0!==t.wholePatList.length?(t.setDeptList(),t.dataLoaded=!0):t.refresh(!0)},t.setDeptList=function(){for(var e in t.wholePatList)1==t.wholePatList[e].acceptAttention?t.addToAttentionDeptList(t.wholePatList[e].toDeptName):t.addToDeptList(t.wholePatList[e].toDeptName);t.patientListFlag=0!==Object.keys(t.deptList).length,t.attentionPersonFlag=0!==Object.keys(t.attentionDeptList).length},t.refresh=function(e){e||(t.dataLoaded=!0),d.getPatListPromise().then(function(e){s.hide(),t.wholePatList=e.value,c.setPatients(e.value),t.setDeptList(),t.$broadcast("scroll.refreshComplete"),t.dataLoaded=!0},function(){angular.isDefined(window.plugins.toast)&&window.plugins.toast.show("加载失败","short","center"),t.$broadcast("scroll.refreshComplete")})},t.goPatientItem=function(e){(null===c.getPatInfo()||c.getPatientId()!==e.patientId||c.getVisitId()!==e.visitId)&&(c.initPatInfo(),c.setPatientId(e.patientId),c.setVisitId(e.visitId),c.setPatName(e.name),c.setBaseInfo(e)),n.go("patInfoTabs.baseInfo")},t.collect=function(t){var a=null;s.show(),-1===t.acceptAttention&&-1===t.acceptCollection?(t.acceptCollection=1,t.acceptAttention=0,a="add",d.updatePatientAttention(t,a).then(function(){e.closeOptionButtons(),s.hide()})):1===t.acceptAttention&&0===t.acceptCollection&&(t.acceptCollection=1,a="update",d.updatePatientAttention(t,a).then(function(){e.closeOptionButtons(),s.hide()}))},t.attention=function(e){s.show();var a=e.acceptAttention,n=e.acceptCollection,i=null;-1===a&&-1===n?(e.acceptAttention=1,e.acceptCollection=0,i="add",d.updatePatientAttention(e,i).then(function(){t.refresh()})):0===a&&1===n||-1===a&&1===n?(e.acceptAttention=1,i="update",d.updatePatientAttention(e,i).then(function(){t.refresh()})):1===a&&1===n?(e.acceptAttention=0,i="update",d.updatePatientAttention(e,i).then(function(){t.refresh()})):1===a&&0===n&&(e.acceptAttention=-1,e.acceptCollection=-1,i="delete",d.updatePatientAttention(e,i).then(function(){t.refresh()}))},t.$on("$ionicView.afterEnter",function(){t.dataLoaded=!1,t.prepareData()})}]).filter("patListFilter",function(){return function(e,t,a){var n=[];for(var i in e){if(t){if(1!=e[i].acceptAttention)continue}else if(1==e[i].acceptAttention)continue;e[i].toDeptName===a&&n.push(e[i])}return n}}),angular.module("PocketDoctor.PatList").directive("patList",function(){return{restrict:"E",templateUrl:"templates/pat/dPatList.html"}}),angular.module("PocketDoctor.PatList").service("PatListService",["$q","$http","GlobalService","HttpService",function(e,t,a,n){this.getPatListPromise=function(){var e={url:"patients",method:"get",params:{userId:a.getCurrentUserInfo().userId,hospitalId:localStorage.hospitalId}};return n.handleRequest(e)},this.updatePatientAttention=function(e,t){var i={url:"patient",method:"put",data:{primaryKey:{patientId:e.patientId},value:{patientId:e.patientId,userId:a.getCurrentUserInfo().userId,acceptAttention:e.acceptAttention,acceptCollection:e.acceptCollection,followAttentionFlag:t}}};return n.handleRequest(i)}}]),angular.module("PocketDoctor.VitalSignsMain").controller("VitalSignsMainCtrl",["$scope","$state","$ionicModal","$stateParams","$ionicPopup","$filter","$ionicBackdrop","GlobalService","VitalSignsMainService",function(e,t,a,n,i,r,l,o,s){e.thresholds=null,e.max=100,e.min=0,e.variableChange={},e.nativeData={},e.changeValue={},e.changeValue.heartThreshold={},e.changeValue.spO2Threshold={},e.changeValue.bloodPressThreshold={},e.heartBeatId=!0,e.spO2Id=!0,e.bloodPressId=!0,e.flag=!1,e.myModal=l,e.$on("$ionicView.beforeEnter",function(){s.getVitalSignsPromise().then(function(t){e.thresholds=t.value.thresholds,e.vitalSigns=t.value.vitalSigns,e.heartBeatData=e.vitalSigns.心率,e.heartBeatData.type=1,e.spO2data=e.vitalSigns.SpO2,e.spO2data.type=2,e.bloodPressData=e.vitalSigns.血压,e.bloodPressData.type=3;for(var a=0;a<e.thresholds.length;a++)switch(e.thresholds[a].vitalSignsName){case"心率":e.changeValue.heartThreshold=e.thresholds[a],e.heartBeatData.thresholds=e.thresholds[a];break;case"SpO2":case"血氧饱和度":e.changeValue.spO2Threshold=e.thresholds[a],e.spO2data.thresholds=e.thresholds[a];break;case"血压":e.bloodChange=e.thresholds[a],e.changeValue.bloodPressThreshold=e.thresholds[a]}e.heartBeatChartConfig=e.chartConfig(e.heartBeatData.itemName,e.changeValue.heartThreshold,e.heartBeatData.data,e.heartBeatData.times,e.heartBeatData.itemUnit),e.spO2ChartConfig=e.chartConfig(e.spO2data.itemName,e.changeValue.spO2Threshold,e.spO2data.data,e.spO2data.times,e.spO2data.itemUnit),e.bloodPressConfig=e.config(e.bloodPressData)},function(){})}),e.doEdit=function(t){switch(e.upperId=null,t){case 1:e.heartBeatId=!1,e.variableChange=e.changeValue.heartThreshold,e.upperId="heartBeatBlock",e.nextNode="spO2Block";break;case 2:e.spO2Id=!1,e.variableChange=e.changeValue.spO2Threshold,e.upperId="spO2Block",e.nextNode="bloodPressBlock";break;case 3:e.bloodPressId=!1,e.variableChange=e.bloodChange,e.upperId="bloodPressBlock"}e.nativeData.topValue=e.variableChange.topValue,e.nativeData.minValue=e.variableChange.minValue,e.flag=!0,e.myModal.retain(),e.blockClass="blockCardClass"},e.doCompleted=function(t,a,n,r){switch(t){case 1:e.heartBeatId=!0;break;case 2:e.spO2Id=!0;break;case 3:e.bloodPressId=!0,e.variableChange=e.bloodChange}return e.flag=!1,e.myModal.release(),parseInt(e.variableChange.topValue)<parseInt(e.variableChange.minValue)?(i.alert({title:"提示",template:"最大值不小于最小值",okText:"确定"}),e.variableChange.topValue=e.nativeData.topValue,void(e.variableChange.minValue=e.nativeData.minValue)):void s.updateLimitValuePromise(a,n,e.variableChange.topValue,e.variableChange.minValue,r,!0).then(function(t){e.result=t.message,t.success||i.alert({title:"提示",template:e.result,okText:"确定"}),console.log(e.result)},function(){})},e.chartConfig=function(e,t,a,n,i){return{options:{chart:{type:"spline"},legend:{enabled:!1},credits:{enabled:!1}},series:[{name:e,color:"#0099ff",data:a,marker:{fillColor:"white",lineWidth:2,radius:3,lineColor:"#0099ff"}}],title:{text:""},xAxis:{lineColor:"#666666",lineDashStyle:"longdash",startOnTick:!0,categories:n,tickWidth:0,title:{text:""},type:"datetime",labels:{step:6,align:"left",formatter:function(){return r("date")(new Date(this.value),"HH:mm")}}},yAxis:{gridLineColor:"transparent",gridLineDashStyle:"longdash",title:{text:""},labels:{enabled:!1},plotLines:[{value:t.minValue,color:"#66cc66",dashStyle:"line",width:1,label:{text:t.minValue+i,style:{color:"#66cc66",fontSize:"20px"}}},{value:t.topValue,color:"#ff6666",dashStyle:"line",width:1,label:{text:t.topValue+i,style:{color:"#ff6666",fontSize:"20px"}}}]}}},e.config=function(e){return{itemName:e.itemName,itemCode:e.itemCode,maxDataValue:e.data[0],minDataValue:e.data[1],itemUnit:e.itemUnit,type:3}},e.$watchCollection("bloodChange",function(){})}]),angular.module("PocketDoctor.VitalSignsMain").directive("vitalSignsCard",function(){return{require:"^vitalSignsDom",restrict:"AE",templateUrl:"templates/pat/vitalSigns/dVitalSignsCard.html",scope:{iconCls:"@",titleData:"=",chartConfig:"=",doEdit:"&",doCompleted:"&",editOrCompleted:"=",upperId:"=",nextNode:"=",upperCls:"@",variableChange:"="},link:function(e,t,a,n){e.edit=function(){e.doEdit({type:e.titleData.type});var a=n.replaceBlank(e.upperCls);n.bottomToUp(e.$parent,a,t,e.upperId)},e.completed=function(){e.doCompleted({type:e.titleData.type,itemCode:e.titleData.itemCode,itemName:e.titleData.itemName,itemUnit:e.titleData.itemUnit}),n.upToBottom(e.$parent,t,e.upperId)},e.$watchCollection("variableChange",function(){if(void 0!==e.titleData){{e.titleData.type}e.configNow=e.chartConfig,e.changeNow=e.variableChange,e.configNow.yAxis.plotLines[0].value=e.changeNow.minValue,e.configNow.yAxis.plotLines[1].value=e.changeNow.topValue,e.configNow.yAxis.min=parseInt(e.changeNow.minValue)-5,e.configNow.yAxis.max=parseInt(e.changeNow.topValue)+5,e.configNow.yAxis.plotLines[0].label.text=e.changeNow.minValue+e.titleData.itemUnit,e.configNow.yAxis.plotLines[1].label.text=e.changeNow.topValue+e.titleData.itemUnit}})}}}),angular.module("PocketDoctor.VitalSignsMain").directive("vitalSignsDiv",function(){return{require:"^vitalSignsDom",restrict:"AE",templateUrl:"templates/pat/vitalSigns/dVitalSignsDiv.html",scope:{bloodPressConfig:"=",doEdit:"&",doCompleted:"&",bloodPressId:"=",upperId:"=",upperCls:"@",bloodChange:"="},link:function(e,t,a,n){e.edit=function(){e.doEdit({type:e.bloodPressConfig.type});var a=n.replaceBlank(e.upperCls);n.bottomToUp(e.$parent,a,t,e.upperId)},e.completed=function(){e.doCompleted({type:e.bloodPressConfig.type,itemCode:e.bloodPressConfig.itemCode,itemName:e.bloodPressConfig.itemName,itemUnit:e.bloodPressConfig.itemUnit}),n.upToBottom(e.$parent)}}}}),angular.module("PocketDoctor.VitalSignsMain").directive("vitalSignsDom",function(){return{restrict:"AE",controller:["$scope","$ionicBody",function(e,t){this.bottomToUp=function(e,a,n,i){var r=$("<div></div>").css({position:"absolute",zIndex:1e6,width:"100%"});r.attr("id","clickLand"),r.css({top:"91px"}),r.append(n),t.append(r),e.viewCards=$("#viewCardId").children().get(0)},this.replaceBlank=function(e){var t=$("<div></div>").addClass(e);return t.attr("id","replaceDivId"),t},this.upToBottom=function(t,a,n){return void 0===n&&(n=e.upperId),t.viewCards=$("#viewCardId").children().get(0),"bloodPressBlock"===e.upperId?(t.viewCards.appendChild($("#"+n)[0]),this):(t.viewCards.insertBefore($("#"+n)[0],$("#"+e.nextNode)[0]),void $("#clickLand").remove())}}]}}),angular.module("PocketDoctor.VitalSignsMain").service("VitalSignsMainService",["HttpService","GlobalService",function(e,t){this.getVitalSignsPromise=function(){var a={method:"get",url:"vitalSigns",params:{patientId:t.getPatientId(),visitId:t.getVisitId(),hospitalId:localStorage.hospitalId,hospitalUserId:t.getCurrentUserInfo().userId,recordNumber:30}};return e.handleRequest(a)},this.updateLimitValuePromise=function(a,n,i,r,l,o){var s={method:"put",url:"newThreshold",data:{primaryKey:{patientId:t.getPatientId(),visitId:t.getVisitId(),vitalSignsCode:a},value:{hospitalId:localStorage.hospitalId,hospitalUserId:t.getCurrentUserInfo().userId,patientId:t.getPatientId(),visitId:t.getVisitId(),vitalSignsCode:a,vitalSignsName:n,topValue:i,minValue:r,unit:l,flag:o}}};return e.handleRequest(s)}}]),angular.module("PocketDoctor.FormulaList").controller("CommonFormulaCtrl",["$scope","$ionicPopup","$state","$stateParams","GlobalService","CommonFormulaService","GlobalLoadService",function(e,t,a,n,i,r){e.header={},e.selectedList=[],e.len=0,null!==n.formulaList&&void 0!==a.params.formulaList&&(e.len=a.params.formulaList.length),r.getFormulaPromise().then(function(t){e.formulaList=[],e.myList=_.xor(_.pluck(_.where(a.params.formulaList),"formulaId"),_.pluck(_.where(t.value),"formulaId")),e.len=t.value.length;for(var n=0;n<e.len;n++)_.includes(e.myList,t.value[n].formulaId)&&e.formulaList.push(t.value[n])},function(){}),e.addToSelectedList=function(t){e.flag=!1,e.flag===!1&&(e.selectedList.push(e.formulaList[t]),e.formulaList.splice(t,1))},e.deleteFromSelectedList=function(t){e.formulaList.push(e.selectedList[t]),e.selectedList.splice(t,1)},e.toSave=function(){var t=e.selectedList;r.getInsertMyFormulaPromise(t).then(function(t){e.message=t.value,a.go("formulaList.commonFormulas",{flag:!0})},function(){})},e.doBack=function(){a.go("formulaList.commonFormulas")},e.header={leftIsText:!0,leftText:"取消",leftClick:e.doBack,center:"添加通用公式",rightIsText:!0,rightText:"保存",rightClick:e.toSave}}]),angular.module("PocketDoctor.FormulaList").controller("FormulaDetailCtrl",["$scope","$ionicPopup","$state","$stateParams","$ionicModal","GlobalService","FormulaDetailService","GlobalLoadService","PatSearchService",function(e,t,a,n,i,r,l,o,s){e.header={},e.flag=0,e.params=[],e.formulaName=n.formulaName,e.showPatName=!1,e.calculateFlag=!1,e.formula={},e.uFormula=!1,e.variablesTransfer=function(t){e.calculateFlag=!0;var a=e.formula.formulaText,n=a.length,i=/[\u4e00-\u9fa5]/,r=/[A-Za-z]/;e.showList=[];for(var l=0;n>l;l++){var s;if(i.test(a[l])&&null!==a[l]&&void 0!==a[l]){for(s=l;i.test(a[s+1])&&null!==a[s+1]&&void 0!==a[s+1];)s+=1;var c={};c.name=a.substring(l,s+1),l=s,c.attr=null,e.showList.push(c)}else if(r.test(a[l])&&null!==a[l]&&void 0!==a[l]){for(s=l;r.test(a[s+1])&&null!==a[s+1]&&void 0!==a[s+1];)s+=1;var d=a.substring(l,s+1);l=s,c={},c.name=d,c.attr=null,e.showList.push(c)}else;}return o.hide(),e.showList},e.variablesShow=function(t){var a=/[A-Za-z]/;e.showList=[],e.itemCodes=[];for(var n in t.withConstantOp){var i=t.withConstantOp[n];a.test(i)&&null!==i&&void 0!==i&&e.itemCodes.push(i)}return e.itemCodes.length>0&&l.getParaNamePromise(e.itemCodes).then(function(t){o.hide();for(var a=t.value.length,n=0;a>n;n++){var i=t.value[n],r={};r.name=i.paraName,r.unit=i.unit,r.attr=null,e.showList.push(r)}t=null},function(){}),e.showList},e.fromFormulaList=function(){null!==n.uFormula&&void 0!==n.uFormula?(e.uFormula=!0,n.uFormula=r.getPrivateFormulaDetail(),e.formula={},e.id=n.uFormula.uFormulaId,e.formula.id=n.uFormula.uFormulaId,e.formula.formulaName=n.uFormula.formulaName,e.formulaName=e.formula.formulaName,e.formula.formulaExpression=n.uFormula.formulaText,e.formula.formulaText=n.uFormula.formulaText,e.formula.result=null,e.formula.creator=null,e.header.center=e.formula.formulaName,e.showList=e.variablesTransfer(e.formula)):(e.id=n.formulaId,null===r.getCommonFormulaDetail()||e.id!==r.getCommonFormulaDetail().formulaId?l.getFormulaDetailPromise(n.formulaId).then(function(t){e.formula=t.value[0],e.formulaName=e.formula.formulaName,e.header.center=e.formulaName,e.showList=e.variablesShow(e.formula),r.setCommonFormulaDetail(e.formula)},function(){}):(e.formula=r.getCommonFormulaDetail(),e.header.center=e.formula.formulaName,e.showList=e.variablesShow(e.formula)))},e.selectedAndFromPatList=function(a){e.patientId=a.patientId,e.patientName=a.name,e.id=e.formula.id,"kyee"===e.formula.creator?(e.flag=1,e.showPatName=!0,l.doCalculation(e.id,e.flag,e.patientId,e.params).then(function(a){if(a.message?(t.alert({title:"提示",template:a.message,okText:"确定"}),e.result=""):e.result=a.value.result,a.value.value)for(var n=a.value.value.length,i=0;n>i&&null!==a.value.value[i];i++)e.showList[i].attr=parseFloat(a.value.value[i])},function(){})):(e.flag=2,e.showPatName=!0,l.doCalculation(e.id,e.flag,e.patientId,e.params).then(function(a){if(a.message?(t.alert({title:"提示",template:a.message,okText:"确定"}),e.result=""):e.result=a.value.result,a.value.value)for(var n=a.value.value.length,i=0;n>i&&null!==a.value.value[i];i++)e.showList[i].attr=parseFloat(a.value.value[i])},function(){}))},e.doCalculate=function(){var a=!0;e.params=[],e.uFormula===!1&&null===n.formulaId&&(e.id=n.formulaBackUp.id);for(var i=0;i<e.showList.length;i++){if(void 0===e.showList[i].attr||""===e.showList[i].attr||null===e.showList[i].attr){t.alert({title:"提示",template:"请输入0至9999的合法变量值！"}),a=!1;break}e.params.push(e.showList[i].attr)}a&&(null===e.formula.creator?(e.flag=4,o.show(),l.doCalculation(e.formula.id,e.flag,e.patientId,e.params).then(function(a){e.params=null,o.hide(),"除数不能为0"===a.value||"除数不能为0"===a.message?t.alert({title:"提示",template:"除数不能为0"}):e.result=a.value},function(){})):(e.flag=3,o.show(),l.doCalculation(e.id,e.flag,e.patientId,e.params).then(function(a){e.params=null,o.hide(),"除数不能为0"===a.value||"除数不能为0"===a.message?t.alert({title:"提示",template:"除数不能为0"}):e.result=a.value},function(){})))},e.doClear=function(){if(e.showPatName=!1,void 0!==e.showList)for(var t=0;t<e.showList.length;t++)e.showList[t].attr=null,e.result=null},e.doBack=function(){e.showPatName=!1,a.go("kyee"===e.formula.creator?"formulaList.commonFormulas":"formulaList.privateFormulas")},i.fromTemplateUrl("templates/user/formula/patSearch.html",{animation:"kyee-side-box-animation",scope:e}).then(function(t){e.modal=t,null===(e.patList=r.getPatNameList())&&s.getPatSearchInfoPromise().then(function(t){e.patList=t.value,r.setPatNameList(e.patList)},function(){})}),e.doSearch=function(){a.go("patSearch",{formula:e.formula,varList:e.showList})},e.openModal=function(){e.modal._isShown?e.closeModal(!1):e.modal.show()},e.toRemember=function(t){e.paraIndex=t},e.closeModal=function(t){t&&(e.patIndex!==e.paraIndex&&(e.doClear(),e.patIndex=e.paraIndex),e.patInfo=e.patList[e.patIndex],e.selectedAndFromPatList(e.patInfo)),e.modal.hide()},e.$on("$destroy",function(){e.modal.remove()}),e.$on("$ionicView.beforeEnter",function(){e.fromFormulaList(),e.doClear()}),e.$on("$ionicView.beforeLeave",function(){e.modal._isShown&&e.closeModal(!1)}),e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.doBack,center:e.formulaName,rightIsIcon:!0,rightIcon:"ion-person",rightClick:e.openModal}}]),angular.module("PocketDoctor.FormulaList").controller("FormulaListCtrl",["$scope","$state","GlobalService","FormulaListService",function(e,t,a,n){e.header={},e.formulaList=[],e.myFormulaList=[],e.toDetail=function(e){t.go("formulaDetail",{formulaId:e})},e.toMyDetail=function(e){t.go("formulaDetail",{uFormula:e})},e.doBack=function(){t.go("app.user")},e.toAdd=function(){t.go("commonFormula",{formulaList:e.formulaList})},e.toAddMine=function(){t.go("newFormula")},e.doRemove=function(t){e.sqId=t.sqId,n.removePromise(e.sqId).then(function(){n.getFormulaListPromise().then(function(t){e.formulaList=t.value},function(){})},function(){})},e.doDelete=function(t){e.uFormulaId=t.uFormulaId,n.deletePromise(e.uFormulaId).then(function(){n.getMyFormulaListPromise().then(function(t){e.myFormulaList=t.value},function(){})},function(){})},e.doEdit=function(e){t.go("newFormula",{update:e})},e.refresh=function(){n.getFormulaListPromise().then(function(t){e.formulaList=t.value,a.setFormulaList(e.formulaList),n.getMyFormulaListPromise().then(function(t){e.myFormulaList=t.value,a.setMyFormulaList(e.myFormulaList),e.dataLoaded||(e.dataLoaded=!0),e.$broadcast("scroll.refreshComplete")},function(){})},function(){})},e.$on("$ionicView.afterEnter",function(t,n){e.dataLoaded=!1,null===(e.formulaList=a.getFormulaList())||null===(e.myFormulaList=a.getMyFormulaList())?e.refresh():e.dataLoaded=!0}),e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.doBack,center:"医学公式"}}]),angular.module("PocketDoctor.Formulas").controller("FormulasCtrl",["$scope","$state","GlobalService",function(e,t,a){e.header={},e.classColor={},"formulaList.commonFormulas"===t.current.name&&(e.classColor.commonFormulaColor="pressedColor",e.classColor.privateFormulaColor=""),"formulaList.privateFormulas"===t.current.name&&(e.classColor.commonFormulaColor="",e.classColor.privateFormulaColor="pressedColor"),e.commonFormulasClick=function(){t.go("formulaList.commonFormulas"),e.classColor.commonFormulaColor="pressedColor",e.classColor.privateFormulaColor="";

},e.privateFormulasClick=function(){t.go("formulaList.privateFormulas"),e.classColor.commonFormulaColor="",e.classColor.privateFormulaColor="pressedColor"},e.goBackLastPage=function(){t.go("app.user")},e.addFormulaClick=function(){"pressedColor"===e.classColor.commonFormulaColor?t.go("commonFormula",{formulaList:a.getFormulasBackUp()}):t.go("newFormula")},e.header={leftIsText:!1,leftClick:e.goBackLastPage,leftIsIcon:!0,leftIcon:"default",center:"医学公式",rightIsText:!0,rightText:"添加",rightClick:e.addFormulaClick}}]),angular.module("PocketDoctor.FormulaList").controller("MyCommonFormulaCtrl",["$scope","$state","$stateParams","GlobalService","FormulaListService",function(e,t,a,n,i){e.header={},e.formulaList=[],e.toDetail=function(e,a){t.go("formulaDetail",{formulaId:e,formulaName:a})},e.doBack=function(){t.go("app.user")},e.toAdd=function(){t.go("commonFormula",{formulaList:e.formulaList})},e.doRemove=function(t){e.sqId=t.sqId,i.removePromise(e.sqId).then(function(){i.getFormulaListPromise().then(function(t){e.formulaList=t.value,n.setFormulasBackUp(e.formulaList),n.setFormulaList(null)},function(){})},function(){})},e.refresh=function(){i.getFormulaListPromise().then(function(t){e.formulaList=t.value,n.setFormulasBackUp(e.formulaList),n.setFormulaList(e.formulaList),e.dataLoaded||(e.dataLoaded=!0),e.$broadcast("scroll.refreshComplete")},function(){})},e.$on("$ionicView.afterEnter",function(t,i){e.dataLoaded=!1,null===(e.formulaList=n.getFormulaList())||a.flag===!0?e.refresh():e.dataLoaded=!0}),e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.doBack,center:"医学公式"}}]),angular.module("PocketDoctor.FormulaList").controller("MyPrivateFormulaCtrl",["$scope","$state","GlobalService","FormulaListService",function(e,t,a,n){e.header={},e.myFormulaList=[],e.toMyDetail=function(n){t.go("formulaDetail",{uFormula:e.myFormulaList[n]}),a.setPrivateFormulaDetail(e.myFormulaList[n])},e.doBack=function(){t.go("app.user")},e.toAddMine=function(){t.go("newFormula")},e.doDelete=function(t){e.uFormulaId=t.uFormulaId,n.deletePromise(e.uFormulaId).then(function(){n.getMyFormulaListPromise().then(function(t){e.myFormulaList=t.value},function(){}),a.setMyFormulaList(null)},function(){})},e.doEdit=function(e){t.go("newFormula",{update:e})},e.refresh=function(){n.getMyFormulaListPromise().then(function(t){e.myFormulaList=t.value,a.setMyFormulaList(e.myFormulaList),e.dataLoaded||(e.dataLoaded=!0),e.$broadcast("scroll.refreshComplete")},function(){})},e.$on("$ionicView.afterEnter",function(t,n){e.dataLoaded=!1,null===(e.myFormulaList=a.getMyFormulaList())?e.refresh():e.dataLoaded=!0}),e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.doBack,center:"医学公式"}}]),angular.module("PocketDoctor.FormulaList").controller("NewFormulaCtrl",["$scope","$state","$stateParams","$ionicPopup","NewFormulaService",function(e,t,a,n,i){e.header={},i.getVariablesPromise().then(function(t){e.variablesList=t.value},function(){}),e.newFormulaText="",e.flag=!1,e.varList=[],e.params=[];var r=/[\u4e00-\u9fa5]/;if(a.update){e.newFormulaText=a.update.formulaText,e.flag=!0,e.newArgs=0;for(var l=e.newFormulaText.length,o=0;l>o;)if(r.test(e.newFormulaText.substring(o,o+1))){for(var s=o+1;r.test(e.newFormulaText.substring(s,s+1));)s+=1;var c=e.newFormulaText.substring(o,s);e.params.push(c),o=s}else o++}else a.newData&&(e.newFormulaText=a.newData.formulaTextShow,e.newArgs=a.newData.newArgs,e.params=a.newData.params,e.varList=a.newData.varList);e.toSubmit=function(){null===e.newFormulaText||void 0===e.newFormulaText||""===e.newFormulaText?n.alert({title:"提示",template:"请先编辑公式！",okText:"确定"}):a.update?(t.go("addVar",{flag:a.update,formulaText:e.newFormulaText,newArgs:e.newArgs,varList:e.varList,paraList:e.params}),e.newFormulaText=""):(t.go("addVar",{formulaText:e.newFormulaText,newArgs:e.newArgs,varList:e.varList,paraList:e.params}),e.newFormulaText="")},e.doBack=function(){t.go("formulaList.privateFormulas")},e.addValue=function(t){if((void 0===e.newFormulaText||""===e.newFormulaText)&&(e.newFormulaText="",e.params=[],e.varList=[],e.params=[],e.newArgs=0),"arg"!==t)if(null!==e.newFormulaText&&void 0!==e.newFormulaText&&""!==e.newFormulaText||"+"!==t&&"."!==t&&"*"!==t&&"^"!==t&&"/"!==t){var a=e.newFormulaText.length;if("/"===e.newFormulaText.charAt(a-1)&&"0"===t)n.alert({title:"提示",template:"除数不能为0！",okText:"确定"});else{var i=/[\u4e00-\u9fa5]/;i.test(t)&&(void 0===e.params&&(e.params=[]),e.params.push(t)),e.newFormulaText=e.newFormulaText+t}}else;else{e.newArgs++;var r="变量"+e.newArgs,l={};l.name=r,l.value=null,e.varList.push(l),e.newFormulaText=e.newFormulaText+r}},e.clear=function(){void 0===e.newFormulaText||""===e.newFormulaText?n.alert({title:"提示",template:"请输入！",okText:"确定"}):(e.newFormulaText="",e.params=[],e.newArgs=0,e.varList=[])},e.clearOne=function(){if(void 0===e.newFormulaText||""===e.newFormulaText)n.alert({title:"提示",template:"请输入！",okText:"确定"});else{var t=e.newFormulaText,a=e.newFormulaText.length;if(e.newArgs>9&&"变量"===e.newFormulaText.substring(a-4,a-2))e.newArgs--,e.varList.pop(),e.newFormulaText=e.newFormulaText.substring(0,a-4);else if("变量"===e.newFormulaText.substring(a-3,a-1))e.newArgs--,e.varList.pop(),e.newFormulaText=e.newFormulaText.substring(0,a-3);else if(r.test(t.substring(a-1,a))){var i=e.params.pop().length;e.newFormulaText=e.newFormulaText.substring(0,a-i)}else e.newFormulaText=e.newFormulaText.substring(0,a-1)}},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.doBack,center:"自定义公式",rightIsText:!0,rightText:"下一步",rightClick:e.toSubmit}}]),angular.module("PocketDoctor.FormulaList").controller("PatSearchCtrl",["$scope","$state","$stateParams","PatSearchService",function(e,t,a,n){n.getPatSearchInfoPromise().then(function(t){e.patList=t.value},function(){}),e.toRemember=function(t){e.paraIndex=t},e.toCancel=function(){t.go("formulaDetail",{formulaBackUp:a.formula,varList:a.varList})},e.toCalculate=function(){t.go("formulaDetail",{patInfo:e.patList[e.paraIndex],formulaBackUp:a.formula,varList:a.varList})}}]),angular.module("PocketDoctor.FormulaList").controller("AddVarCtrl",["$scope","$state","$ionicPopup","$stateParams","GlobalService","AddVarService",function(e,t,a,n,i,r){e.header={},e.obj={},e.obj.formulaId=null,e.obj.formulaTextShow=n.formulaText,e.obj.varList=n.varList,e.obj.params=n.paraList,e.obj.formulaName=null,e.obj.newArgs=n.newArgs,n.flag&&(e.obj.formulaId=n.flag.uFormulaId,e.obj.formulaName=n.flag.formulaName),e.toSave=function(){var l=0;e.obj.varList!==[]&&e.obj.varList&&(l=e.obj.varList.length);var o=e.obj.formulaTextShow,s=null,c=null;if(l>0)for(var d=0;l>d;d++){if(s=e.obj.varList[d].name,c=e.obj.varList[d].value,null===c||""===c){var u=a.alert({title:"提示",template:"请输入合法变量名",okText:"确定"});return}if(c.length>8)return void(u=a.alert({title:"提示",template:"变量名称超长",okText:"确定"}));o=o.replace(s,c)}if(e.obj.formulaTextShow=o,e.obj.formulaTextShow.length>200){a.alert({title:"提示",template:"公式内容不可超过200字",okText:"确定"})}else if(null!==e.obj.formulaName&&""!==e.obj.formulaName)if(e.obj.formulaName.length>8){a.alert({title:"提示",template:"公式名称超长",okText:"确定"})}else n.flag?r.updateFormulaPromise(e.obj).then(function(n){e.result=n.message;var r=a.alert({title:"提示",template:e.result,okText:"确定"});r.then(function(){"修改成功"===e.result&&(i.setMyFormulaList(null),t.go("formulaList.privateFormulas"))})}):r.newFormulaPromise(e.obj).then(function(n){e.result=n.message;var r=a.alert({title:"提示",template:e.result,okText:"确定"});r.then(function(){"新增成功"===e.result&&(i.setMyFormulaList(null),t.go("formulaList.privateFormulas"))})});else{a.alert({title:"提示",template:"请输入合法公式名",okText:"确定"})}},e.doBack=function(){t.go("newFormula",{newData:e.obj})},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.doBack,center:"自定义变量",rightIsText:!0,rightText:"保存",rightClick:e.toSave}}]),angular.module("PocketDoctor.FormulaList").directive("formulaShowList",function(){return{restrict:"E",replace:!0,scope:{attr:"=myAttr"},link:function(e,t,a){var n=/[A-Za-z]/;if(n.test(a.myattr)){var i=document.createElement("input");i.type="number",i.placeholder="请输入数字",t[0].appendChild(i)}else{var r=document.createElement("input");r.value=a.myattr,r.readOnly=!0,t[0].appendChild(r)}}}}),angular.module("PocketDoctor.FormulaList").directive("patSearchList",function(){return{restrict:"E",templateUrl:"templates/user/formula/dPatSearchList.html"}}),angular.module("PocketDoctor.FormulaList").service("CommonFormulaService",["HttpService","GlobalService",function(e,t){this.getFormulaPromise=function(){var a={method:"get",url:"commonFormulas",params:{userId:t.getCurrentUserInfo().userId}};return e.handleRequest(a)},this.getInsertMyFormulaPromise=function(a){for(var n=[],i=a.length,r=0;i>r;r++){var l={};l.userId=t.getCurrentUserInfo().userId,l.formulaId=a[r].formulaId,l.formulaName=a[r].formulaName,n.push(l)}var o={method:"post",url:"myCommonFormula",data:{primaryKey:"sqId",value:n}};return e.handleRequest(o)}}]),angular.module("PocketDoctor.FormulaList").service("FormulaDetailService",["HttpService",function(e){this.getFormulaDetailPromise=function(t){var a={method:"get",url:"myCommonFormulaDetail",params:{id:t}};return e.handleRequest(a)},this.getMyFormulaDetailPromise=function(t){var a={method:"get",url:"privateFormulaDetail",params:{id:t}};return e.handleRequest(a)},this.getParaNamePromise=function(t){var a={method:"get",url:"paraNames",params:{hospitalId:localStorage.hospitalId,itemCodes:t}};return e.handleRequest(a)},this.doCalculation=function(t,a,n,i){(null===n||void 0===n)&&(n="patientId"),(i===!1||i===[]||null===i||void 0===i)&&(i=["params"]);var r={method:"get",url:"calculations",params:{hospitalId:localStorage.hospitalId,id:t,flag:a,pid:n,params:i}};return e.handleRequest(r)}}]),angular.module("PocketDoctor.FormulaList").service("FormulaListService",["HttpService","GlobalService",function(e,t){this.getFormulaListPromise=function(){var a={method:"get",url:"myCommonFormulas",params:{userId:t.getCurrentUserInfo().userId}};return e.handleRequest(a)},this.getMyFormulaListPromise=function(){var a={method:"get",url:"privateFormulas",params:{userId:t.getCurrentUserInfo().userId}};return e.handleRequest(a)},this.removePromise=function(t){var a={method:"delete",url:"myCommonFormula",params:{sqId:t}};return e.handleRequest(a)},this.deletePromise=function(t){var a={method:"delete",url:"privateFormula",params:{uFormulaId:t}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.FormulaList").service("NewFormulaService",["HttpService",function(e){this.getVariablesPromise=function(){var t={method:"get",url:"availableParas",params:{hospitalId:localStorage.hospitalId}};return e.handleRequest(t)}}]),angular.module("PocketDoctor.FormulaList").service("PatSearchService",["HttpService","GlobalService",function(e,t){this.getPatSearchInfoPromise=function(){var a={method:"get",url:"patients",params:{userId:t.getCurrentUserInfo().userId,hospitalId:localStorage.hospitalId}};return e.handleRequest(a)}}]),angular.module("PocketDoctor.FormulaList").service("AddVarService",["HttpService","GlobalService",function(e,t){this.newFormulaPromise=function(a){var n={method:"post",url:"privateFormula",data:{primaryKey:"uFormulaId",value:{formulaName:a.formulaName,formulaText:a.formulaTextShow,userId:t.getCurrentUserInfo().userId}}};return e.handleRequest(n)},this.updateFormulaPromise=function(a){var n={method:"put",url:"privateFormula",data:{primaryKey:{uFormulaId:a.formulaId},value:{uFormulaId:a.formulaId,formulaName:a.formulaName,formulaText:a.formulaTextShow,userId:t.getCurrentUserInfo().userId}}};return e.handleRequest(n)}}]),angular.module("PocketDoctor.patCollectList").controller("patCollectListCtrl",["$scope","$state","$ionicPopup","$filter","GlobalService","PatListService","GlobalLoadService",function(e,t,a,n,i,r,l){e.header={},e.goPatientItem=function(e){(null===i.getPatInfo()||i.getPatientId()!==e.patientId||i.getVisitId()!==e.visitId)&&(i.initPatInfo(),i.setPatientId(e.patientId),i.setVisitId(e.visitId),i.setPatName(e.name),i.setBaseInfo(e)),t.go("patInfoTabs.baseInfo")},0!==i.getPatients().length?e.patCollectLists=n("filter")(i.getPatients(),{acceptCollection:1},!0):r.getPatListPromise().then(function(t){t.value.length>0&&(i.setPatients(t.value),e.patCollectLists=n("filter")(i.getPatients(),{acceptCollection:1},!0))},function(){}),e.refresh=function(){r.getPatListPromise().then(function(t){l.hide(),t.value.length>0&&(i.setPatients(t.value),e.patCollectLists=n("filter")(i.getPatients(),{acceptCollection:1},!0))},function(){})},e.cancelCollect=function(t){var a=null;l.show(),1===t.acceptCollection&&1===t.acceptAttention?(t.acceptCollection=0,a="update",r.updatePatientAttention(t,a).then(function(){e.refresh()})):0===t.acceptAttention&&1===t.acceptCollection&&(t.acceptAttention=-1,t.acceptCollection=-1,a="delete",r.updatePatientAttention(t,a).then(function(){e.refresh()}))},e.toUserView=function(){t.go("app.user")},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.toUserView,center:"收藏病人"}}]),angular.module("PocketDoctor.patCollectList").directive("patCollectList",function(){return{restrict:"E",templateUrl:"templates/user/patCollection/dPatCollectlist.html"}}),angular.module("PocketDoctor.tools").controller("noticeToolsCtrl",["$scope","$state","$ionicPopup","noticeToolsService","updateNoticeToolsService",function(e,t,a,n,i){e.header={},n.queryToolsPromise().then(function(t){e.InitToolsResult=t.value[0],e.ToolsResult={};for(var a in e.InitToolsResult)e.ToolsResult[a]=e.InitToolsResult[a]}),e.cancelTools=function(){e.ToolsResult=e.InitToolsResult,t.go("tools")},e.isCheck=function(e){return 1===e},e.acceptNoticeChange=function(t){0===e.ToolsResult[t]?e.ToolsResult[t]=1:1===e.ToolsResult[t]&&(e.ToolsResult[t]=0)},e.executeTools=function(){i.updateNoticeToolsPromise(e.ToolsResult).then(function(a){e.result=a.message,t.go("tools")})},e.header={leftIsText:!0,leftText:"取消",leftClick:e.cancelTools,center:"通用设置",rightIsText:!0,rightText:"确定",rightClick:e.executeTools}}]),angular.module("PocketDoctor.tools").controller("toolsCtrl",["$scope","$state",function(e,t){e.header={},e.goToUser=function(){t.go("app.user")},e.userSetting=function(){t.go("image")},e.noticeTools=function(){t.go("noticeTools")},e.header={leftIsIcon:!0,leftIcon:"default",leftClick:e.goToUser,center:"设置"}}]),angular.module("PocketDoctor.tools").service("noticeToolsService",["GlobalService","HttpService",function(e,t){this.queryToolsPromise=function(){var a={method:"get",url:"userConfig",params:{userId:e.getCurrentUserInfo().userId}};return t.handleRequest(a)}}]),angular.module("PocketDoctor.tools").service("updateNoticeToolsService",["GlobalService","HttpService",function(e,t){this.updateNoticeToolsPromise=function(a){var n={method:"put",url:"userConfig",data:{primaryKey:{userId:e.getCurrentUserInfo().userId},value:{userId:e.getCurrentUserInfo().userId,acceptOperationNotice:a.acceptOperationNotice,acceptCriticalValueNotice:a.acceptCriticalValueNotice,acceptConsultationNotice:a.acceptConsultationNotice,acceptDrugReviewNotice:a.acceptDrugReviewNotice,acceptOperationArrangement:a.acceptOperationArrangement,acceptNewExamReport:0,acceptNewLabReport:0}}};return t.handleRequest(n)}}]),KyeeUtilModule.directive("ionSideboxView",function(){return{scope:{title:"@",cancelFn:"&",okFn:"&",okDisabled:"="},restrict:"E",transclude:!0,replace:!0,template:'<div class="modal sidebox-wrapper"><div class="bar bar-header bar-light"><button class="button button-clear sidebox-button-cancel" ng-click="cancelFn()" ng-disabled={{cancelDisabled}}>取消</button><h1 class="title sidebox-title">{{title}}</h1><button class="button button-clear sidebox-button-ok" ng-disabled="okDisabled" ng-click="okFn()">确定</button></div><div class="sidebox-content has-header" ng-transclude></div></div>',compile:function(e){return function(e,t,a,n){t.parent().parent().addClass("sidebox")}}}}),angular.module("PocketDoctor.User").controller("imageCtrl",["$scope","$state","$http","GlobalService",function(e,t,a,n){e.goBack=function(){n.goBack()},e.$on("$ionicView.afterEnter",function(){e.images=localStorage.images.split(","),e.selectImage=localStorage.curImg?localStorage.curImg:e.images[0],e.imageClass=[],e.imageClass=[!1],e.imageClass[e.selectImage]=!0}),e.confirm=function(){localStorage.curImg=e.selectImage,t.go("app.user")},e.select=function(t){e.imageClass=[!1],e.imageClass[t]=!0,e.selectImage=t},e.header={leftIsText:!0,leftText:"取消",leftClick:e.goBack,center:"设置头像",rightIsText:!0,rightText:"确定",rightClick:e.confirm}}]),angular.module("PocketDoctor.User").controller("setConfigCtrl",["$scope","$state","$ionicPopup",function(e,t,a){e.header={},e.url={},e.url.value=localStorage.Url,e.selectItem=function(t){e.selectmode=t},e.goBack=function(){t.go("login")},e.confirm=function(){var n=new RegExp("^http://*");if(void 0!==e.selectmode&&null!==e.selectmode&&(localStorage.mode=e.selectmode),void 0!==e.url.value&&null!==e.url.value){if(!n.test(e.url.value))return void a.alert({title:"提醒",template:"请输入以http://开头的地址！",okText:"确定"});localStorage.Url=e.url.value}t.go("login")},e.checked=function(e){return e===localStorage.mode},e.header={leftIsText:!0,leftText:"取消",leftClick:e.goBack,center:"设置配置",rightIsText:!0,rightText:"确定",rightClick:e.confirm}}]),angular.module("PocketDoctor.User").controller("UserCtrl",["$scope","$state","$http","$timeout","GlobalService",function(e,t,a,n,i){e.$on("$ionicView.afterEnter",function(){localStorage.images?e.img=localStorage.curImg?localStorage.curImg:localStorage.images.split(",")[0]:a.get("config/config.json").success(function(t){localStorage.images=t.images,e.img=localStorage.curImg?localStorage.curImg:localStorage.images.split(",")[0]}),i.getCurrentUserInfo()&&(e.username=i.getCurrentUserInfo().userName,e.job=i.getCurrentUserInfo().job)}),e.logout=function(){angular.isDefined(navigator.splashscreen)&&(navigator.splashscreen.show(),n(function(){navigator.splashscreen.hide()},2e3)),i.setPatients([]),i.initPatInfo(),i.setMessages([]),t.go("login")},e.toToolsView=function(){t.go("tools")},e.toPatCollectListView=function(){t.go("patCollectList")},e.toFormulaView=function(){t.go("formulaList.commonFormulas")},e.userImage=function(){t.go("image")}}]),angular.module("PocketDoctor").run(["$templateCache",function(e){e.put("templates/login/login.html",'<ion-pane class="loginView">\n    <ion-content>\n        <div class="loginLogo" ng-click="setStatus()" counter="0" time="0"  >\n            <div class="name" ng-bind="hospitalData[\'hospitalName\']"></div>\n            <div class="nameEn"  ng-bind="hospitalData[\'hospitalNameEn\']"></div>\n        </div>\n        <form ng-submit="doLogin()">\n            <div class="list list-inset">\n                <label class="item item-input">\n                    <i class="icon ion-person placeholder-icon"></i>\n                    <input type="text" placeholder="用户名" ng-model="user[\'name\']">\n                </label>\n                <label class="item item-input">\n                    <i class="icon ion-locked placeholder-icon"></i>\n                    <input type="password" placeholder="密码" ng-model="user[\'password\']">\n                </label>\n            </div>\n            <button class="button button-block loginBtn mobileAppBaseBtn" type="submit">\n                登录\n            </button>\n        </form>\n    </ion-content>\n</ion-pane>\n'),e.put("templates/common/dHeaderBar.html",'<ion-header-bar align-title="center" class="stable mobileAppBaseBtn">\r\n    <div class="buttons">\r\n        <button class="button button-clear no-animation mobileAppBaseBtn"\r\n                ng-click="header.leftClick()" ng-if="header.leftIsText">\r\n            {{header.leftText}}\r\n        </button>\r\n        <button class="button icon-left {{header.leftIcon==\'default\'?\'ion-chevron-left\':header.leftIcon}} button-clear mobileAppBaseBtn"\r\n                ng-click="header.leftClick()"\r\n                ng-if="header.leftIsIcon">{{header.leftIconText}}\r\n        </button>\r\n    </div>\r\n    <h1 class="title mobileAppBaseBtn">{{header.center}}</h1>\r\n\r\n    <div class="buttons">\r\n        <button class="button button-clear no-animation mobileAppBaseBtn"\r\n                ng-click="header.rightClick()" ng-if="header.rightIsText">\r\n            {{header.rightText}}\r\n        </button>\r\n        <button class="button icon-right {{header.rightIcon}} button-clear mobileAppBaseBtn"\r\n                ng-click="header.rightClick()"\r\n                ng-if="header.rightIsIcon"></button>\r\n    </div>\r\n</ion-header-bar>'),e.put("templates/menu/menu.html",'<ion-side-menus enable-menu-with-back-views="false">\n    <ion-side-menu-content>\n        <ion-nav-bar class="mobileAppBaseBtn" align-title="center" animation="slide-in-up">\n        </ion-nav-bar>\n        <ion-nav-view name="menuContent"></ion-nav-view>\n    </ion-side-menu-content>\n\n    <ion-side-menu side="left" class="sideMenu">\n        <ion-content>\n            <div class="list"></div>\n            <div class="list"></div>\n            <div class="list"></div>\n            <div class="list card menuUser">\n                <div class="item menuUserImage menuItem">\n                    <img class="menuItemImage" ng-src="images/{{img}}" ng-click="userImage()">\n                </div>\n                <div class="item menuUserInfo menuItem">\n                    <div>{{username}}</div>\n                    <div>{{job}}</div>\n                </div>\n\n            </div>\n            <div class="list">\n                <div class="item item-icon-left nav-clear menu-close menuItem" ng-click="toMessageView()">\n                    <i class="icon ion-chatbubble-working"></i>\n                    消息\n                    <span class="badge badge-assertive" ng-if="message.count">{{message.count}}</span>\n                </div>\n                <div class="item item-icon-left nav-clear menu-close menuItem" ng-click="toPatlistView()">\n                    <i class="icon ion-clipboard"></i>\n                    病人\n                </div>\n                <div class="item item-icon-left nav-clear menu-close menuItem" ng-click="toScheduleView()">\n                    <i class="icon ion-calendar"></i>\n                    日程\n                </div>\n                <div class="item item-icon-left nav-clear menu-close menuItem" ng-click="toUserView()">\n                    <i class="icon ion-person"></i>\n                    我的\n                </div>\n            </div>\n        </ion-content>\n    </ion-side-menu>\n</ion-side-menus>\n'),e.put("templates/pat/dPatList.html",'<div class="deptDivide" ng-bind="dept"></div>\r\n<ion-item ng-repeat="pat in wholePatList | patListFilter:isAttentionList : dept | orderBy: \'bedNo\'" ng-click="goPatientItem(pat)"  class="item item-icon-left">\r\n    <div class="icon" ng-class="{\'男\':\'icon-man red\',\'女\':\'icon-woman blue\'}[pat[\'sex\']]"></div>\r\n    <div class="patientContent" >\r\n        <div class="patientName">{{pat[\'name\']}}</div>\r\n        <div class="patientBed">{{pat[\'bedNo\']}}床</div>\r\n        <div class="patientClass">{{pat[\'nurseClassName\']}}</div>\r\n        <div class="patientStatus" ng-class="{\'危\':\'firstClass\',\'重\':\'secondClass\',\'一般\':\'thirdClass\'}[pat[\'patientStatusName\']]">{{pat[\'patientStatusName\']}}</div>\r\n    </div>\r\n    <ion-option-button ng-show="pat[\'acceptAttention\']==-1" class="attentionButtonStyle" ng-click="attention(pat,$index)">\r\n        关注\r\n    </ion-option-button>\r\n    <ion-option-button ng-show="pat[\'acceptAttention\']==0" class="attentionButtonStyle" ng-click="attention(pat,$index)">\r\n        关注\r\n    </ion-option-button>\r\n    <ion-option-button ng-show="pat[\'acceptAttention\']==1" class="notattentionButtonStyle" ng-click="attention(pat,$index)">\r\n        取消关注\r\n    </ion-option-button>\r\n    <ion-option-button  ng-show="pat[\'acceptCollection\']==-1" class="collectFlagClass" ng-click="collect(pat)">\r\n        收藏\r\n    </ion-option-button>\r\n    <ion-option-button  ng-show="pat[\'acceptCollection\']==0" class="collectFlagClass" ng-click="collect(pat)">\r\n        收藏\r\n    </ion-option-button>\r\n</ion-item>\r\n'),e.put("templates/pat/patInfo.html",'<ion-view class="patDetailCls">\r\n    <header-bar></header-bar>\r\n  <!--  <ion-nav-bar class="stable mobileAppBaseBtn bar bar-heade">\r\n        <ion-nav-button>\r\n            <ion-nav-back-button class="button icon-left ion-chevron-left button-clear mobileAppBaseBtn">\r\n            </ion-nav-back-button>\r\n        </ion-nav-button>\r\n    </ion-nav-bar>-->\r\n    <tab-slide-box>\r\n        <div class="tsb-icons">\r\n            <div class="tsb-ic-wrp tabs tabs-top">\r\n                <ion-scroll direction="x" class="tsb-hscroll">\r\n                    <!--  <a ng-click="selectTabWithIndex(0)" ui-sref="patInfoTabs.baseInfo">病人信息</a>-->\r\n                    <a ng-click="selectTabWithIndex(0)">基本信息</a>\r\n                    <a ng-click="selectTabWithIndex(1)">医嘱</a>\r\n                    <a ng-click="selectTabWithIndex(2)">检查</a>\r\n                    <a ng-click="selectTabWithIndex(3)">检验</a>\r\n                    <a ng-click="selectTabWithIndex(4)">报警记录</a>\r\n                    <a ng-click="selectTabWithIndex(5)">生命体征</a>\r\n                   <!-- <a ui-sref="patInfoTabs.vitalSigns">生命体征</a>-->\r\n                </ion-scroll>\r\n            </div>\r\n        </div>\r\n        <ion-slide-box show-pager="false" locking="true" on-slide-changed="slideHasChanged($index)">\r\n            <ion-slide>\r\n                <ion-nav-view name="baseInfo"></ion-nav-view>\r\n            </ion-slide>\r\n            <ion-slide>\r\n                <ion-nav-view name="order"></ion-nav-view>\r\n            </ion-slide>\r\n            <ion-slide>\r\n                <ion-nav-view name="exam"></ion-nav-view>\r\n            </ion-slide>\r\n            <ion-slide>\r\n                <ion-nav-view name="lab"></ion-nav-view>\r\n            </ion-slide>\r\n            <ion-slide>\r\n                <ion-nav-view name="alarmHistory"></ion-nav-view>\r\n            </ion-slide>\r\n            <ion-slide>\r\n                <ion-nav-view name="vitalSigns"></ion-nav-view>\r\n            </ion-slide>\r\n\r\n        </ion-slide-box>\r\n    </tab-slide-box>\r\n</ion-view>\r\n\r\n\r\n'),e.put("templates/pat/patList.html",'<ion-view view-title="病人" class="patientListView" hide-back-button="true">\n    <ion-nav-buttons side="left">\n        <button class="button button-icon button-clear ion-navicon mobileAppBaseBtn" menu-toggle="left">\n        </button>\n    </ion-nav-buttons>\n    <ion-content>\n        <ion-refresher pulling-icon="ion-ios-arrow-down" spinner="dots" on-refresh="refresh(false)"></ion-refresher>\n        <ion-spinner ng-if="!dataLoaded" icon="dots" class="load-spinner"></ion-spinner>\n        <ion-list>\n            <div class="attentionMarskdiv" ng-show="attentionPersonFlag">我关注的病人</div>\n            <pat-list ng-repeat="dept in attentionDeptList" ng-init="isAttentionList=true"></pat-list>\n            <div class="attentionMarskdiv" ng-show="patientListFlag">我的病人</div>\n            <pat-list ng-repeat="dept in deptList" ng-init="isAttentionList=false"></pat-list>\n        </ion-list>\n    </ion-content>\n</ion-view>\n'),e.put("templates/message/consultationDetail.html",'<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content class="detailView">\r\n        <consultation-info></consultation-info>\r\n        <div class="detailButtons" ng-if="checked">\r\n            <button class="button button-assertive detailButton" ng-click="checkRefuse()">\r\n                拒绝\r\n            </button>\r\n            <button class="button button-balanced detailButton" ng-click="checkAgree()">\r\n                同意\r\n            </button>\r\n        </div>\r\n    </ion-content>\r\n</ion-pane>'),e.put("templates/message/criticalList.html",'<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content class="">\r\n        <critical-info></critical-info>\r\n    </ion-content>\r\n</ion-pane>'),e.put("templates/message/dConsultationAgree.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card consultationAgree-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-suc icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                会诊状态更新\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="agree-class">同意</div>\r\n            </div>\r\n        </div>\r\n        <div class="message-content noborder-content">\r\n            <div class="row">\r\n                <div>右侧腹股沟斜疝</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">1床</div>\r\n                <div class="name-class">谷增光</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dConsultationCheck.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card consultationCheck-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-huizhen icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                来自xxx的会诊申请\r\n            </div>\r\n            <div class="status-class">\r\n                未审核\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="consultation-name">右侧腹股沟斜疝</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">1床</div>\r\n                <div class="name-class">谷增光</div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="unread-class">\r\n                <div ng-if="message.readTimes==0">新</div>\r\n            </div>\r\n            <div class="row message-footer" ng-click="toConsultationDetail($index)">\r\n                <div class="col">查看详情</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dConsultationNotice.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card consultationNotice-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-test icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                会诊通知\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="consultation-name">{{message.diagnosis}}</div>\r\n                <div class="consultation-dept">{{message.deptName}}</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">{{message.patBedNo}}床</div>\r\n                <div class="name-class">{{message.patientName}}</div>\r\n                <div class="time-class">{{message.attendTime}}</div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="unread-class">\r\n                <div ng-if="message.readTimes==0">新</div>\r\n            </div>\r\n            <div class="row message-footer" ng-click="toConsultationDetail($index)">\r\n                <div class="col">查看详情</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dConsultationRefuse.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card consultationRefuse-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-ref icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                会诊状态更新\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="refuse-class">主治医生不同意</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="reason-class">理由：病人不需要会诊</div>\r\n            </div>\r\n        </div>\r\n        <div class="message-content noborder-content">\r\n            <div class="row">\r\n                <div>右侧腹股沟斜疝</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">1床</div>\r\n                <div class="name-class">谷增光</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),
e.put("templates/message/dConsultationReview.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card consultationReview-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-huizhen icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                会诊审核\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="agree-details">主治医师同意</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="consultation-name">右侧腹股沟斜疝</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">1床</div>\r\n                <div class="name-class">谷增光</div>\r\n                <div class="time-class">2010-07-06 10:28</div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="unread-class">\r\n                <div ng-if="message.readTimes==0">新</div>\r\n            </div>\r\n            <div class="row message-footer" ng-click="toConsultationDetail($index)">\r\n                <div class="col">查看详情</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dCriticalCard.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card critical-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-weiji icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                危急值\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="critical-name">{{message.itemName}}</div>\r\n                <div class="critical-name">{{message.itemValue}}{{message.itemUnit}}</div>\r\n				<div class="critical-value">{{message.flag=="-"?"正常":message.flag}}({{message.range}})</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">{{message.patBedNo}}床</div>\r\n                <div class="name-class">{{message.patientName}}</div>\r\n                <div class="time-class">{{message.itemTime | date:\'yyyy-MM-dd HH:mm\'}}</div>\r\n            </div>\r\n        \r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dCriticalCards.html",'<div>\r\n    <div class="messageTime"> {{message.deliverTime | deliverTimeFilter}}</div>\r\n    <div class="card">\r\n        <div class="item item-divider item-icon-left message-item-header alertColor">\r\n            <i class="icon ion-alert-circled alertColor"></i>\r\n            危急值集成\r\n        </div>\r\n        <div class="item item-text-wrap">\r\n            <p class="messageHighlightInfo">白细胞数</p>\r\n            <p class="messageHighlightInfo alertColor">0.4*109/L</p>\r\n            <p><i class="icon ion-person"></i><span class="messagePatName">谷增光</span><span class="bedNo">1床</span></p>\r\n            <p><i class="icon ion-clock"></i><span class="messageItemTime">2015-1-23 13:32:31</span></p>\r\n        </div>\r\n        <div class="item item-divider item-icon-right message-item-footer" ng-click="toCriticalList()">\r\n            <a>\r\n                未读危急值\r\n                <span class="badge badge-assertive criticalItemNo">0</span>\r\n                <i class="icon ion-chevron-right messageItemDetailArrow"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("templates/message/dCriticalInfo.html",'<div>\r\n    <div class="messageTime"> {{message.deliverTime | deliverTimeFilter}}</div>\r\n    <div class="card">\r\n        <div class="item item-divider item-icon-left message-item-header alertColor">\r\n            <i class="icon ion-alert-circled alertColor"></i>\r\n            危急值\r\n        </div>\r\n        <div class="item item-text-wrap">\r\n            <p class="messageHighlightInfo">白细胞数</p>\r\n            <p class="messageHighlightInfo alertColor">0.4*109/L</p>\r\n            <p><i class="icon ion-person"></i><span class="messagePatName">谷增光</span><span class="bedNo">1床</span></p>\r\n            <p><i class="icon ion-clock"></i><span class="messageItemTime">2015-1-23 13:32:31</span></p>\r\n        </div>\r\n        <div class="item item-divider item-icon-right message-item-footer">\r\n            <a>\r\n                详情\r\n                <i class="icon ion-chevron-right messageItemDetailArrow"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("templates/message/dDrugReview.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card drugreview-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-med icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                药物审核\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="drug-name">{{message.drugName}}</div>\r\n                <div class="drug-value">{{message.drugValue}}</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">{{message.patBedNo}}床</div>\r\n                <div class="name-class">{{message.patientName}}</div>\r\n                <div class="time-class">{{message.reportDateTime}}</div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="unread-class">\r\n                <div ng-if="message.readTimes==0">新</div>\r\n            </div>\r\n            <div class="row message-footer" ng-click="toDrugReviewDetail($index)">\r\n                <div class="col">查看详情</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n'),e.put("templates/message/dDrugReviewInfo.html",'<div class="list list-insert">\r\n    <label class="item item-input">\r\n        <span class="input-label">申请医生</span>\r\n        <label class="selectField">石献州</label>\r\n    </label>\r\n    <label class="item item-input">\r\n        <span class="input-label">申请药物</span>\r\n        <label class="selectField">青霉素</label>\r\n    </label>\r\n    <label class="item item-input">\r\n        <span class="input-label">用量</span>\r\n        <label class="selectField">500g</label>\r\n    </label>\r\n    <label class="item item-input">\r\n        <span class="input-label">病人科别</span>\r\n        <label class="selectField">普通外科</label>\r\n    </label>\r\n    <label class="item item-input">\r\n        <span class="input-label">病人姓名</span>\r\n        <label class="selectField">谷增光</label>\r\n    </label>\r\n    <label class="item item-input">\r\n        <span class="input-label">病人年龄</span>\r\n        <label class="selectField">43</label>\r\n    </label>\r\n    <label class="item item-input">\r\n        <span class="input-label">病人诊断</span>\r\n        <label class="selectField">右侧腹股沟斜疝</label>\r\n    </label>\r\n    <label class="item item-input">\r\n        <span class="input-label">病人床位</span>\r\n        <label class="selectField">1床</label>\r\n    </label>\r\n    <label class="item item-input">\r\n        <span class="input-label">审核状态</span>\r\n        <label class="selectField">{{checked?"未审核":"已审核"}}</label>\r\n    </label>\r\n</div>'),e.put("templates/message/dDrugReviewNotice.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card drugreviewNotice-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-med icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                药物审核通知\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="check-status">拒绝</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="refuse-reason">拒绝原因：药品剂量超标</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">1床</div>\r\n                <div class="name-class">谷增光</div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="unread-class">\r\n                <div ng-if="message.readTimes==0">新</div>\r\n            </div>\r\n            <div class="row message-footer" ng-click="toDrugReviewDetail($index)">\r\n                <div class="col">查看详情</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dExamReport.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card exam-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-check icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                检查\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="exam-class">{{message.examClass}}</div>\r\n                <div class="exam-subclass">{{message.examSubClass}}</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">{{message.patientBedNo}}床</div>\r\n                <div class="name-class">{{message.patientName}}</div>\r\n                <div class="time-class">{{message.examDateTime}}</div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="unread-class">\r\n                <div ng-if="message.readTimes==0">新</div>\r\n            </div>\r\n            <div class="row message-footer" ng-click="toExamReport($index)">\r\n                <div class="col">查看详情</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dLabReport.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card lab-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-test icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                检验\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="lab-class">{{message.subject}}</div>\r\n                <div class="lab-subclass">{{message.specimen}}</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">{{message.patientBedNo}}床</div>\r\n                <div class="name-class">{{message.patientName}}</div>\r\n                <div class="time-class">{{message.requestedDateTime}}</div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="unread-class">\r\n                <div ng-if="message.readTimes==0">新</div>\r\n            </div>\r\n            <div class="row message-footer" ng-click="toLabReport($index)">\r\n                <div class="col">查看详情</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dMessageCard.html",'<div>\r\n    <operation-notice ng-if="message.type==1"></operation-notice>\r\n    <lab-report ng-if="message.type==5"></lab-report>\r\n    <exam-report ng-if="message.type==4"></exam-report>\r\n\r\n    <critical-card ng-if="message.type==6"></critical-card>\r\n    <drug-review ng-if="message.type==2"></drug-review>\r\n    <consultation-check ng-if="message.type==7"></consultation-check>\r\n    <consultation-review ng-if="message.type==8"></consultation-review>\r\n    <consultation-agree ng-if="message.type==9"></consultation-agree>\r\n    <consultation-refuse ng-if="message.type==10"></consultation-refuse>\r\n    <consultation-notice ng-if="message.type==11"></consultation-notice>\r\n    <drug-review-notice ng-if="message.type==12"></drug-review-notice>\r\n</div>'),e.put("templates/message/dOperationDetailInfo.html",'<div class="list list-insert" ng-model="operation">\r\n    <div class="item item-input">\r\n        <div class="input-label">手术名称</div>\r\n        <div class="autoHeight">{{operation.operationName}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">手术时间</div>\r\n        <div class="autoHeight">{{operation.operationTime|date:\'yyyy/MM/dd HH:mm\'}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">手术室</div>\r\n        <div class="autoHeight">{{operation.operationRoomLocation}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">手术台次</div>\r\n        <div class="autoHeight">{{operation.sequence}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人姓名</div>\r\n        <div class="autoHeight">{{operation.patientName}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人性别</div>\r\n        <div class="autoHeight">{{operation.patientSex}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人床号</div>\r\n        <div class="autoHeight">{{operation.patientBedNo}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">手术医生</div>\r\n        <div class="autoHeight">{{operation.surgeon}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第一手术助手</div>\r\n        <div class="autoHeight">{{operation.firstAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第二手术助手</div>\r\n        <div class="autoHeight">{{operation.secondAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第三手术助手</div>\r\n        <div class="autoHeight">{{operation.thirdAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第四手术助手</div>\r\n        <div class="autoHeight">{{operation.fourthAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">输血者</div>\r\n        <div class="autoHeight">{{operation.bloodTranDoctor}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">麻醉医生</div>\r\n        <div class="autoHeight">{{operation.anesthesiaDoctor}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">麻醉助手</div>\r\n        <div class="autoHeight">{{operation.anesthesiaAssistant}}</div>\r\n    </div>\r\n</div>'),e.put("templates/message/dOperationNotice.html",'<div>\r\n    <div class="deliver-time">\r\n        {{message.deliverTime | deliverTimeFilter}}\r\n    </div>\r\n    <div class="card operation-card" on-hold="deleteMessage($index)">\r\n        <div class="row message-header">\r\n            <div class="icon-shoushu icon-class">\r\n            </div>\r\n            <div class="message-title">\r\n                手术通知\r\n            </div>\r\n        </div>\r\n        <div class="message-content">\r\n            <div class="row">\r\n                <div class="operation-name">{{message.operationName}}</div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="bedno-class">{{message.patientBedNo}}床</div>\r\n                <div class="name-class">{{message.patientName}}</div>\r\n                <div class="time-class">{{message.operationTime | date:\'yyyy-MM-dd HH:mm\'}}</div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="unread-class">\r\n                <div ng-if="message.readTimes==0">新</div>\r\n            </div>\r\n            <div class="row message-footer" ng-click="toOperationDetail($index)">\r\n                <div class="col">查看详情</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/message/dOperationSchedule.html",'<div>\r\n    <div class="messageTime">2015-1-23 14:02:59</div>\r\n    <div class="card">\r\n        <div class="item item-divider item-icon-left message-item-header">\r\n            <i class="icon ion-scissors normalColor"></i>\r\n            <div class="todayOperation normalColor">今日手术</div>\r\n            <div class="tomorrowOperation normalColor">明日手术</div>\r\n        </div>\r\n        <div class="item item-text-wrap">\r\n            <div class="operationInfos">\r\n                <a href="#/operationDetail">\r\n                    <p>谷增光</p>\r\n                    <p>阑尾切除</p>\r\n                </a>\r\n            </div>\r\n            <div class="operationInfos">\r\n                <a href="#/operationDetail">\r\n                    <p>谷增光</p>\r\n                    <p>阑尾切除</p>\r\n                </a>\r\n            </div>\r\n            <div class="operationInfos">\r\n                <a href="#/operationDetail">\r\n                    <p>谷增光</p>\r\n                    <p>阑尾切除</p>\r\n                </a>\r\n            </div>\r\n            <div class="operationInfos">\r\n                <a href="#/operationDetail">\r\n                    <p>谷增光</p>\r\n                    <p>阑尾切除</p>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("templates/message/drugReviewDetail.html",'<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content class="detailView">\r\n        <drug-review-info></drug-review-info>\r\n        <div class="detailButtons" ng-if="checked">\r\n            <button class="button button-assertive detailButton" ng-click="checkRefuse()">\r\n                拒绝\r\n            </button>\r\n            <button class="button button-balanced detailButton" ng-click="checkAgree()">\r\n                同意\r\n            </button>\r\n        </div>\r\n    </ion-content>\r\n</ion-pane>'),e.put("templates/message/message.html",'<ion-view view-title="消息">\n    <ion-nav-buttons side="left">\n        <button class="button button-icon button-clear ion-navicon mobileAppBaseBtn" menu-toggle="left">\n        </button>\n    </ion-nav-buttons>\n    <ion-nav-buttons side="right">\n        <button class="button-clear icon-history mobileAppBaseBtn message-history"\n                ng-click="messageHistory()">\n        </button>\n    </ion-nav-buttons>\n    <ion-content class="messageView">\n        <ion-refresher pulling-icon="ion-ios-arrow-down" spinner="dots" on-refresh="refresh(false)"></ion-refresher>\n        <ion-spinner ng-if="!dataLoaded" icon="dots" class="load-spinner"></ion-spinner>\n        <message-card ng-repeat="message in messages" ></message-card>\n    </ion-content>\n</ion-view>\n'),e.put("templates/message/messageHistory.html",'<ion-view class="messageHistoryView">\n    <ion-header-bar align-title="center" class="stable mobileAppBaseBtn bar bar-header disable-user-behavior">\n        <div class="buttons">\n            <button class="button icon-left ion-chevron-left button-clear mobileAppBaseBtn"\n                ng-click="backToMessage()">\n            </button>\n        </div>\n        <div class="search-input">\n            <label class="item item-input">\n                <span class="icon icon-search placeholder-icon"></span>\n                <input type="text" placeholder="请输入关键字" ng-model=\'searchText\'>\n            </label>\n        </div>\n        <div class="buttons searchBtn">\n            <button class="button button-clear mobileAppBaseBtn"\n                    ng-click="toSearch()">搜索\n            </button>\n        </div>\n    </ion-header-bar>\n    <ion-content class="messageView">\n        <ion-refresher pulling-icon="ion-ios-arrow-down" spinner="dots" on-refresh="refresh(false)"></ion-refresher>\n        <ion-spinner ng-if="!dataLoaded" icon="dots" class="load-spinner"></ion-spinner>\n        <message-card ng-repeat="message in messages track by $index" ></message-card>\n		<ion-infinite-scroll ng-if="isMore" on-infinite="loadMore()" distance="1%" spinner="dots">\n        </ion-infinite-scroll>\n    </ion-content>\n</ion-view>\n'),e.put("templates/message/operationDetail.html",'<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content class="">\r\n        <operation-detail-info></operation-detail-info>\r\n    </ion-content>\r\n</ion-pane>'),e.put("templates/schedule/consultationSchedule.html",'<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content ng-model="event">\r\n        <schedule-base-info></schedule-base-info>\r\n        <consultation-info></consultation-info>\r\n        <schedule-intro></schedule-intro>\r\n    </ion-content>\r\n</ion-pane>'),e.put("templates/schedule/dConsultationInfo.html",'<div class="list list-insert" ng-model="consultation">\r\n    <div class="item item-input">\r\n        <div class="input-label">会诊序列号</div>\r\n        <div class="autoHeight">{{consultation.consultationApplyNo}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">会诊类型</div>\r\n        <div class="autoHeight">{{consultation.consultationType}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人姓名</div>\r\n        <div class="autoHeight">{{consultation.name}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人床号</div>\r\n        <div class="autoHeight">{{consultation.bedNo}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人科室</div>\r\n        <div class="autoHeight">{{consultation.deptName}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">主治医生</div>\r\n        <div class="autoHeight">{{consultation.doctorName}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">诊断基本信息</div>\r\n        <div class="autoHeight">{{consultation.diagnosis}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">参与科室</div>\r\n        <div class="autoHeight">{{consultation.invitedDeptName}}</div>\r\n    </div>\r\n</div>'),e.put("templates/schedule/dNewSchedule.html",'<div class="list dNewSchedule">\r\n    <div class="item item-input">\r\n        <input type="text" placeholder="标题" ng-model="event.title">\r\n    </div>\r\n    <div class="item item-input">\r\n        <input type="text" placeholder="地点" ng-model="event.place">\r\n    </div>\r\n    <ion-toggle ng-model="event.allDay" toggle-class="toggle-calm">全天</ion-toggle>\r\n		<div class="item item-input">\r\n		    <div class="input-label">开始</div>\r\n			<div style="width:65%">\r\n			<ionic-datepicker style="width:50%;float:left;height:1.5em;" idate="event.startdate" >{{event.startdate| date:\'yyyy-MM-dd\'}}\r\n			</ionic-datepicker>\r\n			<ionic-timepicker style="width:50%;float:left;height:1.5em;" itime="event.starttime" format="24" step="1">{{event.starttime| date:\'HH:mm\'}}\r\n			</ionic-timepicker>\r\n			</div>\r\n		</div>\r\n	<div class="item item-input">\r\n		    <div class="input-label">结束</div>\r\n			<div style="width:65%">\r\n			<ionic-datepicker style="width:50%;float:left;height:1.5em;" idate="event.enddate" >{{event.enddate| date:\'yyyy-MM-dd\'}}\r\n			</ionic-datepicker>\r\n			<ionic-timepicker style="width:50%;float:left;height:1.5em;" itime="event.endtime" format="24" step="1">{{event.endtime| date:\'HH:mm\'}}\r\n			</ionic-timepicker>\r\n			</div>\r\n		</div>\r\n    <div class="item item-input">\r\n        <div class="input-label">重复</div>\r\n        <div class="selectField" ng-click="repeatClick()">{{event.repeatRate}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">提醒</div>\r\n        <div class="selectField" ng-click="remindClick()">{{event.remind}}</div>\r\n    </div>\r\n    <div class="item item-input introCls">\r\n        <textarea rows="8" ng-model="event.content" placeholder="说明" class="breakCls"> </textarea>\r\n    </div>\r\n</div>\r\n'),e.put("templates/schedule/dOperationInfo.html",'<div class="list list-insert" ng-model="operation">\r\n    <div class="item item-input">\r\n        <div class="input-label">手术名称</div>\r\n        <div class="autoHeight">{{operation.operationName}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">手术台次</div>\r\n        <div class="autoHeight">{{operation.sequence}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">手术等级</div>\r\n        <div class="autoHeight">{{operation.operationLevel}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">手术时间</div>\r\n        <div class="autoHeight">{{operation.operationTime|date:\'yyyy/MM/dd HH:mm\'}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">手术医生</div>\r\n        <div class="autoHeight">{{operation.surgeon}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人姓名</div>\r\n        <div class="autoHeight">{{operation.patientName}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人性别</div>\r\n        <div class="autoHeight">{{operation.patientSex}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">病人床号</div>\r\n        <div class="autoHeight">{{operation.patientBedNo}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第一助手</div>\r\n        <div class="autoHeight">{{operation.firstAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第二助手</div>\r\n        <div class="autoHeight">{{operation.secondAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第三助手</div>\r\n        <div class="autoHeight">{{operation.thirdAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第四助手</div>\r\n        <div class="autoHeight">{{operation.fourthAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第一台上护士</div>\r\n        <div class="autoHeight">{{operation.firstOperationNurse}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第二台上护士</div>\r\n        <div class="autoHeight">{{operation.secondOperationNurse}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第一助理护士</div>\r\n        <div class="autoHeight">{{operation.firstSupplyNurse}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">第二助理护士</div>\r\n        <div class="autoHeight">{{operation.secondSupplyNurse}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">麻醉医生</div>\r\n        <div class="autoHeight">{{operation.anesthesiaDoctor}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">麻醉助手</div>\r\n        <div class="autoHeight">{{operation.anesthesiaAssistant}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">麻醉方法</div>\r\n        <div class="autoHeight">{{operation.anesthesiaMethod}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">隔离标志</div>\r\n        <div class="autoHeight">{{operation.seperateFlag}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">输血医生</div>\r\n        <div class="autoHeight">{{operation.bloodTranDoctor}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">申请日期</div>\r\n        <div class="autoHeight">{{operation.applyTime|date:\'yyyy/MM/dd HH:mm\'}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">申请者</div>\r\n        <div class="autoHeight">{{operation.applicant}}</div>\r\n    </div>\r\n    <!--<div class="item item-input">-->\r\n    <!--<div class="input-label">手术助手</div>-->\r\n    <!--<div class="autoHeight">{{operation.assistant}}</div>-->\r\n    <!--</div>-->\r\n    <div class="item item-input">\r\n        <div class="input-label">术前准备</div>\r\n        <div class="autoHeight">{{operation.preparation}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">主要诊断</div>\r\n        <div class="autoHeight">{{operation.patientDiagnose}}</div>\r\n    </div>\r\n</div>'),e.put("templates/schedule/dScheduleBaseInfo.html",'<div class="list list-insert dNewSchedule">\r\n    <div class="item item-input introCls">\r\n        <div class="input-label">标题</div>\r\n        <div class="autoHeight">{{event.title}}</div>\r\n    </div>\r\n    <div class="item item-input introCls">\r\n        <div class="input-label">地点</div>\r\n        <div class="autoHeight">{{event.place}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">时间</div>\r\n        <div class="autoHeight" ng-if="event.allDay">{{event.startTime|date:\'yyyy/MM/dd\'}}</div>\r\n        <div class="autoHeight"  ng-if="!event.allDay">{{event.startTime|date:\'yyyy/MM/dd HH:mm\'}}</div>\r\n    </div>\r\n    <div class="item item-input">\r\n        <div class="input-label">结束</div>\r\n        <div class="autoHeight" ng-if="event.allDay">{{event.endTime|date:\'yyyy/MM/dd\'}}</div>\r\n        <div class="autoHeight"  ng-if="!event.allDay">{{event.endTime|date:\'yyyy/MM/dd HH:mm\'}}</div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/schedule/dScheduleIntro.html",'<div class="dNewSchedule">\r\n    <div class="item item-input introCls">\r\n        <textarea name="comment" rows="8" ng-model="event.content" placeholder="说明" ng-disabled="true" class="breakCls">\r\n        </textarea>\r\n    </div>\r\n</div>'),e.put("templates/schedule/editSchedule.html",'<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content ng-model="event">\r\n        <new-schedule></new-schedule>\r\n    </ion-content>\r\n</ion-pane>\r\n'),e.put("templates/schedule/generalSchedule.html",'<ion-pane class="generalScheduleView">\r\n    <header-bar></header-bar>\r\n    <ion-content ng-model="event">\r\n        <schedule-base-info></schedule-base-info>\r\n        <schedule-intro></schedule-intro>\r\n    </ion-content >\r\n    <ion-footer-bar class="bar-assertive whiteBackground">\r\n        <div class="button-bar">\r\n            <button class="button" ng-click="deleteSchedule()">删除</button>\r\n        </div>\r\n    </ion-footer-bar>\r\n</ion-pane>'),e.put("templates/schedule/newSchedule.html",'<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content ng-model="event">\r\n        <new-schedule></new-schedule>\r\n    </ion-content>\r\n</ion-pane>\r\n'),e.put("templates/schedule/operationSchedule.html","<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n        <schedule-base-info></schedule-base-info>\r\n        <operation-info></operation-info>\r\n        <schedule-intro></schedule-intro>\r\n    </ion-content>\r\n</ion-pane>"),e.put("templates/schedule/schedule.html",'<ion-view view-title="日程" class="calendarMainView">\n    <ion-nav-buttons side="left">\n        <button class="button button-icon button-clear ion-navicon mobileAppBaseBtn" menu-toggle="left">\n        </button>\n    </ion-nav-buttons>\n    <ion-nav-buttons side="right">\n        <button class="button button-icon ion-plus mobileAppBaseBtn"\n                ng-click="newSchedule()">\n        </button>\n    </ion-nav-buttons>\n    <div class="well well-sm">\n        <calendar ng-model="currentDate" calendar-mode="mode" event-source="eventSource"\n                  event-selected="onEventSelected(event)"\n                  format-month-title="yyyy-MM"\n                  format-week-title="yyyy-MM"\n                  format-day-title="yyyy-MM-dd" ></calendar>\n    </div>\n    <div class="button-bar">\n        <button type="button" class="button mobileAppBaseBtn" ng-class="{actived:mode===\'month\'}"\n                ng-click="changeMode(\'month\')">\n            月\n        </button>\n        <button type="button" class="button mobileAppBaseBtn" ng-class="{actived:mode===\'week\'}"\n                ng-click="changeMode(\'week\')">\n            周\n        </button>\n        <button type="button" class="button mobileAppBaseBtn" ng-class="{actived:mode===\'day\'}"\n                ng-click="changeMode(\'day\')">\n            日\n        </button>\n        <button type="button" class="button mobileAppBaseBtn" ng-disabled="isToday()"\n                ng-click="today()">\n            今\n        </button>\n    </div>\n</ion-view>\n'),
e.put("templates/schedule/selectPopup.html",'<ion-pane>\r\n    <header-bar></header-bar>\r\n    <ion-content scroll="true">\r\n        <ion-list>\r\n            <ion-item ng-repeat="item in items" ng-click="itemClick(item)">\r\n               {{item}}\r\n            </ion-item>\r\n        </ion-list>\r\n    </ion-content>\r\n</ion-pane>'),e.put("templates/user/image.html",'<ion-view class="imageView">\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n        <div class="imageTitle">经典头像</div>\r\n        <div class="imageContent">\r\n            <div ng-repeat="image in images" ng-class="{true:\'select\',false:\'unselect\'}[imageClass[image]]">\r\n                <img ng-src="images/{{image}}" ng-click="select(image)">\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/user/setConfig.html",'<ion-view class="setConfigView">\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n        <label class="item item-input"> 后台地址：\r\n            <input type="text" placeholder="请输入后台服务器的地址" ng-model="url[\'value\']" >\r\n        </label>\r\n        </div>\r\n        <div class="content">模式选择</div>\r\n        <div class="list" >\r\n\r\n            <label class="item item-radio" >\r\n                <input type="radio" name="group" ng-checked="checked(\'0\')" ng-click="selectItem(0)">\r\n                <div class="item-content">\r\n                    在线模式\r\n                </div>\r\n                <i class="radio-icon ion-checkmark"></i>\r\n            </label>\r\n\r\n            <label class="item item-radio">\r\n                <input type="radio" name="group" ng-checked="checked(\'1\')" ng-click="selectItem(1)" >\r\n\r\n                <div class="item-content">\r\n                    录制模式\r\n                </div>\r\n                <i class="radio-icon ion-checkmark"></i>\r\n            </label>\r\n\r\n            <label class="item item-radio">\r\n                <input type="radio" name="group"  ng-checked="checked(\'2\')" ng-click="selectItem(2)">\r\n                <div class="item-content">\r\n                    离线模式\r\n                </div>\r\n                <i class="radio-icon ion-checkmark"></i>\r\n            </label>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/user/user.html",'<ion-view view-title="我的">\r\n    <ion-nav-buttons side="left">\r\n        <button class="button button-icon button-clear ion-navicon mobileAppBaseBtn" menu-toggle="left">\r\n        </button>\r\n    </ion-nav-buttons>\r\n    <ion-content class="userView">\r\n        <div class="list"></div>\r\n        <div class="list">\r\n            <a class="item item-thumbnail-left">\r\n                <img class="userImage" src="images/{{img}}" ng-click="userImage()">\r\n\r\n                <h2 class="userInfo">{{username}}</h2>\r\n\r\n                <p class="userInfo">{{job}}</p>\r\n            </a>\r\n        </div>\r\n        <div class="list">\r\n            <a class="item item-icon-left item-icon-right" ng-click="toToolsView()">\r\n                <i class="icon ion-gear-b settingIcon"></i>\r\n                设置\r\n                <i class="icon ion-chevron-right userItemGear"></i>\r\n            </a>\r\n            <a class="item item-icon-left item-icon-right" ng-click="toPatCollectListView()">\r\n                <i class="icon ion-person-stalker patientStoreIcon"></i>\r\n                病人收藏\r\n                <i class="icon ion-chevron-right userItemGear"></i>\r\n            </a>\r\n            <a class="item item-icon-left item-icon-right" ng-click="toFormulaView()">\r\n                <i class="icon ion-calculator formulaIcon"></i>\r\n                医学公式\r\n                <i class="icon ion-chevron-right userItemGear"></i>\r\n            </a>\r\n        </div>\r\n        <div class="list"></div>\r\n        <div class="userClose" ng-click="logout()">注销</div>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/pat/alarmHistory/alarmHistory.html","<ion-view view-title={{titleView}} class=\"alarmHistoryView\">\r\n    <ion-content class=\"contentCls\">\r\n\r\n        <div ng-repeat=\"alarmHistroyItem in alarmHistoryList\" class=\"card cardStyle  \">\r\n           <div class=\"title row\">\r\n            <div class=\"col col-10\" ng-class=\"{'心率':'icon-xindian','血氧饱和度':'icon-xueyang','血压':'icon-xueya'}[alarmHistroyItem['itemName']]\"></div>\r\n            <div class=\"name col col-33 \">{{alarmHistroyItem['itemName']}}</div>\r\n            <div class=\"time col col-50\">{{alarmHistroyItem['itemTime']| date:'yyyy-MM-dd HH:mm'}}</div>\r\n        </div>\r\n            <div class=\"value row\">\r\n                <div class=\"itemValue col  col-33 \">{{alarmHistroyItem['itemValue']}}{{alarmHistroyItem['itemUnit']}}{{alarmHistroyItem['flag']}}</div>\r\n                <div class=\"range col col-50\">{{alarmHistroyItem['range']}}&nbsp;{{alarmHistroyItem['itemUnit']}}</div>\r\n            </div>\r\n        </div>\r\n    </ion-content >\r\n</ion-view>\r\n"),e.put("templates/pat/baseInfo/baseInfo.html",'<ion-view class="baseinfoView">\r\n<!--<ion-view view-title={{titleView}} class="baseinfoView">-->\r\n\r\n    <ion-content >\r\n        <div class="baseInfoDiv">\r\n            <!--<div class="baseInfos">-->\r\n            <div class="baseInfo-name">\r\n                <div class="icon patImg" ng-class="{\'男\':\'icon-man red\',\'女\':\'icon-woman blue\'}[baseInfo[\'sex\']]"></div>\r\n                <div class=" patName" >{{baseInfo[\'name\']}}</div>\r\n            </div>\r\n            <div class="item1">\r\n                    <div class="itemValue1">{{baseInfo[\'sex\']}}</div>\r\n                    <div class="itemValue1">{{baseInfo[\'patAge\']}}</div>\r\n                    <div class="itemLastValue">{{baseInfo[\'nation\']}}</div>\r\n                </div>\r\n            <div class="item2">\r\n                    <div class="itemValue1">{{baseInfo[\'chargeType\']}}</div>\r\n                   <div class="itemArrearsValue">余额:&nbsp;{{baseInfo[\'arrears\']}}</div>\r\n                </div>\r\n        </div>\r\n        <div class="card  otherInfos">\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">住院号</div>\r\n                <div class="itemValue">{{baseInfo[\'inpNo\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">身份</div>\r\n                <div class="itemValue">{{baseInfo[\'identity\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">身份证</div>\r\n                <div class="itemValue">{{baseInfo[\'idNo\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">出生地</div>\r\n                <div class="itemValue">{{baseInfo[\'areaName\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">出生日期</div>\r\n                <div class="itemValue">{{ baseInfo[\'dateOfBirth\']|date:\'yyyy-MM-dd\'}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">联系人</div>\r\n                <div class="itemValue">{{baseInfo[\'nextOfKin\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">与病人关系</div>\r\n                <div class="itemValue">{{baseInfo[\'relationShioName\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">联系电话</div>\r\n                <div class="itemValue">{{baseInfo[\'nextOfKinPhone\']}}</div>\r\n            </div>\r\n        </div>\r\n        <!--<h3>住院情况</h3>-->\r\n        <div class="cardTitleDiv">住院情况</div>\r\n        <div class="card otherInfos">\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">入院科室</div>\r\n                <div class="itemValue">{{baseInfo[\'toDeptName\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">门诊诊断</div>\r\n                <div class="itemValue">{{baseInfo[\'diagnosis\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">入院病情</div>\r\n                <div class="itemValue">{{baseInfo[\'patientStatusName\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">过敏药物</div>\r\n                <div class="itemValue">{{baseInfo[\'alergyDrugs\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">医生</div>\r\n                <div class="itemValue">{{baseInfo[\'doctorInCharge\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">血型</div>\r\n                <div class="itemValue">{{baseInfo[\'bloodType\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">手术时间</div>\r\n                <div class="itemValue">{{baseInfo[\'operatingDate\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">出院科室</div>\r\n                <div class="itemValue">{{baseInfo[\'fromDeptName\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">入院日期</div>\r\n                <div class="itemValue">{{baseInfo[\'admissionDateTime\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">出院日期</div>\r\n                <div class="itemValue">{{baseInfo[\'dischargeDateTime\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">入科日期</div>\r\n                <div class="itemValue">{{baseInfo[\'admWardDateTime\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">住院次数</div>\r\n                <div class="itemValue">{{baseInfo[\'visitId\']}}</div>\r\n            </div>\r\n        </div>\r\n        <!--<h3>费用记录</h3>-->\r\n        <div class="cardTitleDiv">费用记录</div>\r\n        <div class="card otherInfos">\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">预交金</div>\r\n                <div class="itemValue">{{baseInfo[\'prepayments\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">总费用</div>\r\n                <div class="itemValue">{{baseInfo[\'totalCosts\']}}</div>\r\n            </div>\r\n            <div class="itemTitle">\r\n                <div class="itemLabel">余额</div>\r\n                <div class="itemValue">{{baseInfo[\'arrears\']}}</div>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n</ion-view >\r\n'),e.put("templates/pat/exam/dExamlist.html",'<div class="card cardStyle">\r\n    <div class="TitleStyle row"  ng-click="queryExamReport(examItem)">\r\n        <div class="icon-check col col-10" ></div>\r\n        <div class="examClassDiv col col-33">{{examItem[\'examClass\']}}</div>\r\n        <div class="examStatusDiv col col-40">{{examItem[\'resultStatus\']}}</div>\r\n        <div class="icon-arrow col" ng-show="hideOrShow(examItem[\'resultStatus\'])"></div>\r\n    </div>\r\n    <div class="labelTitle row">\r\n        <div class=" col col-33">{{examItem[\'examSubClass\']}}</div>\r\n        <div class="textCenter  col  col-50" >{{examItem[\'examNo\']}}</div>\r\n      </div>\r\n    <div class="labelTitle row">\r\n        <div class=" col col-33">{{examItem[\'reqPhysician\']}}</div>\r\n        <div class="textCenter col  col-57">{{examItem[\'examDateTime\']}}</div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/pat/exam/exam.html",'<ion-view view-title={{titleView}} class="examInfos orderView">\r\n   <ion-content class="examDetailCls">\r\n       <ion-refresher pulling-icon="ion-ios-arrow-down" spinner="dots" on-refresh="refresh(false)"></ion-refresher>\r\n       <ion-spinner ng-if="!dataLoaded" icon="dots" class="load-spinner"></ion-spinner>\r\n        <exam-list ng-repeat="examItem in ExamList" > </exam-list>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/pat/exam/examFilter.html",'<ion-sidebox-view class="ordersearchView"  title="筛选" cancel-fn="cancelFn()" ok-fn="okFn()">\r\n   <ion-content overflow-scroll="true" style="overflow: hidden" ng-controller="examFilterCtrl">\r\n            <div class="itemTitle">类别</div>\r\n            <div class="itemContent">\r\n                    <div  ng-repeat="examClassItem in ExamItem" class="filterItem" ng-click="queryExamClassText(examClassItem.examClass)"\r\n                         ng-class="{true:\'select\',false:\'notselect\'}[examClassFlag[examClassItem.examClass]]"\r\n                         ng-bind=examClassItem.examClass></div>\r\n        </div>\r\n            <div class="itemTitle">子类</div>\r\n            <div class="itemContent ">\r\n                    <div ng-repeat="examSubClassItem in ExamSubClass " class="filterItem" ng-click="queryExamSubClassText(examSubClassItem)"\r\n                         ng-class="{true:\'select\',false:\'notselect\'}[examSubClassFlag[examSubClassItem]]"\r\n                         ng-bind="examSubClassItem"></div>\r\n        </div>\r\n            <div class="itemTitle">状态</div>\r\n            <div class="itemContent ">\r\n                    <div ng-repeat="resultStatusItem in ResultStatus" class="filterItem" ng-click="queryExamStatusText(resultStatusItem)"\r\n                         ng-class="{true:\'select\',false:\'notselect\'}[examStatusFlag[resultStatusItem]]"\r\n                         ng-bind="resultStatusItem"></div>\r\n        </div>\r\n    </ion-content>\r\n</ion-sidebox-view>\r\n'),e.put("templates/pat/exam/examReport.html",'<ion-view class="examReport patientinfoView">\r\n    <header-bar></header-bar>\r\n    <ion-content >\r\n        <div class="card cardStyle">\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">检查类别</div>\r\n                <div class="lineValue">{{examReport[\'examClass\']}}</div>\r\n            </div>\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">检查子类</div>\r\n                <div class="lineValue">{{examReport[\'examSubClass\']}}</div>\r\n            </div>\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">申请医生</div>\r\n                <div class="lineValue">{{examReport[\'reqPhysician\']}}</div>\r\n            </div>\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">申请日期</div>\r\n                <div class="lineValue">{{examReport[\'reqDateTime\'] }}</div>\r\n            </div>\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">报告医生</div>\r\n                <div class="lineValue">{{examReport[\'reporter\']}}</div>\r\n            </div>\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">报告日期</div>\r\n                <div class="lineValue">{{examReport[\'examDateTime\'] }}</div>\r\n            </div>\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">相关内容</div>\r\n                <div class="lineValue">{{examReport[\'examPara\']}}</div>\r\n            </div>\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">检查所见</div>\r\n                <div class="lineValue">{{examReport[\'description\']}}</div>\r\n            </div>\r\n            <div class="cardLine item">\r\n                <div class="lineLabel">印象</div>\r\n                <div class="lineValue">{{examReport[\'impression\']}}</div>\r\n            </div>\r\n        </div>\r\n        <button class=" button button-block mobileAppBaseButton" ng-show="false"\r\n                ng-click="queryExamReport(examItem[\'EXAM_NO\'])">查看影像\r\n        </button>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/pat/lab/dLablist.html",'<div class="card cardStyle">\r\n    <div class="TitleStyle row" ng-click="queryLabReport(labItem)">\r\n        <div class="icon-test  col col-10"></div>\r\n        <div class="examClassDiv  col col-50">{{labItem[\'subject\']}}</div>\r\n        <div class="examStatusDiv  col col-33">{{labItem[\'examResultStatusName\']}}</div>\r\n        <div class="icon-arrow  col " ng-show="hideOrShow(labItem[\'examResultStatusName\'])"></div>\r\n    </div>\r\n    <div class="labelTitle row">\r\n        <div class=" col col-33">{{labItem[\'specimen\']}}</div>\r\n        <div class="textCenter col col-57 ">{{labItem[\'deptName\']}}</div>\r\n    </div>\r\n    <div class="labelTitle row">\r\n        <div class=" col col-33">{{labItem[\'orderingProvider\']}}</div>\r\n        <div class="textCenter col col-57 ">{{labItem[\'requestedDateTime\']}}</div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/pat/lab/dLabReportlist.html",'<div class="card cardStyle">\r\n    <div class="TitleStyle row" >\r\n        <div class="icon-time col col-10" ></div>\r\n        <div class="labReportDateTime col " ng-bind="labReportItemDateTime"></div>\r\n       </div>\r\n    <div class="labelTitle row" ng-repeat="labReportItem in labReportList|filterList:labReportItemDateTime"\r\n         ng-click="queryLabTrendChart(labReportItem)" >\r\n        <div class="col col-33">{{labReportItem[\'reportItemName\']}}</div>\r\n        <div class="col col-25">{{labReportItem[\'referenceRange\']}}</div>\r\n        <div class="col col-25">{{labReportItem[\'result\']}}{{labReportItem[\'units\']}}&nbsp;{{labReportItem[\'exception\']}}</div>\r\n        <div class="icon-arrow col col-10" ng-show="hideOrShow(labReportItem[\'result\'])"></div>\r\n\r\n    </div>\r\n</div>-->\r\n<div class="card cardStyle">\r\n    <div class="TitleStyle" >\r\n        <div class="icon-time" ></div>\r\n        <div class="labReportDateTime" ng-bind="labReportItemDateTime"></div>\r\n       </div>\r\n    <div class="labelTitle" ng-repeat="labReportItem in labReportList|filterList:labReportItemDateTime"\r\n         ng-click="queryLabTrendChart(labReportItem[\'reportItemCode\'])" >\r\n        <div class="labLeft">{{labReportItem[\'reportItemName\']}}</div>\r\n        <div class="labCenter">{{labReportItem[\'referenceRange\']}}</div>\r\n        <div class="labRight">{{labReportItem[\'result\']}}{{labReportItem[\'units\']}}&nbsp;{{labReportItem[\'exception\']}}</div>\r\n        <div class="icon-arrow" ng-show="hideOrShow(labReportItem[\'result\'])"></div>\r\n    </div>\r\n</div>\r\n\r\n'),e.put("templates/pat/lab/lab.html",'\r\n<ion-view view-title={{titleView}}  class="examInfos orderView">\r\n\r\n    <ion-content>\r\n        <!--\r\n         刷新操作需要添加ion-refresher元素(必须位于ion-content元素下第一行), 加载动画需要添加icon-spinner元素\r\n         class load-spinner是我（汪伟滨）写的一个css，用于将加载动画居中，写于_mobileApp.scss中\r\n         如果觉得加载动画和下拉箭头不好看的，请参考\r\n         http://ionicframework.com/docs/api/directive/ionSpinner/  加载动画\r\n         http://ionicons.com/   箭头\r\n         选择较为好看的图标，讨论后统一更换\r\n        -->\r\n        <ion-refresher pulling-icon="ion-ios-arrow-down" spinner="dots" on-refresh="refresh(false)"></ion-refresher>\r\n        <ion-spinner ng-if="!dataLoaded" icon="dots" class="load-spinner"></ion-spinner>\r\n        <lab-list ng-repeat="labItem in LabList"></lab-list>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/pat/lab/labFilter.html",'<ion-sidebox-view class="ordersearchView"  title="筛选" cancel-fn="cancelFn()" ok-fn="okFn()">\r\n\r\n    <!--<ion-header-bar  align-title="center" class="stable ">-->\r\n        <!--<div class="title">-->\r\n            <!--<div class="leftButtonStyle"  ng-click="executeSearch(0)">取消</div>-->\r\n            <!--<div class="centerDivStyle">筛选</div>-->\r\n            <!--<div class=" rightButtonStyle" ng-click="executeSearch(1)">确定</div>-->\r\n        <!--</div>-->\r\n    <!--</ion-header-bar>-->\r\n    <ion-content overflow-scroll="true" style="overflow: hidden"  ng-controller="labFilterCtrl">\r\n        <div class="itemTitle">状态</div>\r\n            <div class="filterItem" ng-click="queryLabStatusText(0)"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[flag[0]]">收到申请\r\n            </div>\r\n            <div class="filterItem" ng-click="queryLabStatusText(1)"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[flag[1]]">已执行\r\n            </div>\r\n            <div class="filterItem" ng-click="queryLabStatusText(2)"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[flag[2]]">初步报告\r\n            </div>\r\n            <div class="filterItem" ng-click="queryLabStatusText(3)"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[flag[3]]">确认报告\r\n            </div>\r\n\r\n    </ion-content>\r\n</ion-sidebox-view>\r\n'),e.put("templates/pat/lab/labReport.html",'<ion-view view-title="检验报告单"  class="labReport  ">\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n      <!--  <pat-list ng-repeat="dept in deptList" ng-init="isAttentionList=false"></pat-list>-->\r\n        <lab-report-list ng-repeat="labReportItemDateTime in labReportDateTimeList | orderBy:labReportItemDateTime:true"></lab-report-list>\r\n        <!--<lab-report-list ng-repeat="labReportItem in LabReportList"></lab-report-list>-->\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/pat/lab/labTrendChart.html",'<ion-view>\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n        <highchart config="chartConfig" class="span9"></highchart>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/pat/order/dOrderInfo.html",'<div class="card cardStyle">\r\n    <div class="itemTitle row">\r\n        <div class="icon-order col col-10"></div>\r\n        <div class="orderClassDiv col col-25">{{order[\'orderClass\']}}</div>\r\n        <div class="repeatIndicatorDiv col col-33">{{order[\'repeatIndicator\']}}</div>\r\n        <div class="orderStatusDiv col  ">{{order[\'orderStatus\']}}</div>\r\n    </div>\r\n    <div class="orderContentTitle row ">\r\n        <div class="orderTextList col col-60">\r\n            <div ng-repeat="orderitem in order.list" class="orderTextDiv ">{{orderitem[\'orderText\']}}&nbsp;&nbsp;&nbsp;{{orderitem[\'dosage\']}}{{orderitem[\'dosageUnits\']}}</div>\r\n        </div>\r\n        <div class="orderAdministration col col-27 col-center">{{order[\'administration\']}}</div>\r\n    </div>\r\n    <div class="labelTitle row ">\r\n        <div class="orderClassDiv col col-50">始{{order[\'startDateTime\'] | date:\'yyyy-MM-dd HH:mm\'}}</div>\r\n        <div class="orderClassDiv col" ng-if="order[\'stopDateTime\']!=null">至{{order[\'stopDateTime\'] }}</div>\r\n    </div>\r\n    </div>\r\n</div>\r\n'),e.put("templates/pat/order/order.html",'<ion-view  class="orderView">\r\n    <ion-content>\r\n        <ion-refresher pulling-icon="ion-ios-arrow-down" spinner="dots" on-refresh="refresh(false)"></ion-refresher>\r\n        <ion-spinner ng-if="!dataLoaded" icon="dots" class="load-spinner"></ion-spinner>\r\n        <order-info ng-repeat="order in orderInfo track by $index"></order-info>\r\n        <ion-infinite-scroll\r\n                ng-if="isMore"\r\n                on-infinite="loadMore()"\r\n                distance="1%"\r\n                spinner="dots">\r\n        </ion-infinite-scroll>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/pat/order/orderSearch.html",'    <ion-sidebox-view class="ordersearchView"  title="筛选" cancel-fn="cancelFn()" ok-fn="okFn()">\r\n        <div style="height: 100%;" ng-controller="OrderSearchCtrl">\r\n        <div class="itemTitle">长/临</div>\r\n            <div class="filterItem " ng-click="SearchLongClick(0)"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[longTempMark[0]]">长&nbsp;期\r\n            </div>\r\n            <div class="filterItem " ng-click="SearchLongClick(1)"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[longTempMark[1]]">临&nbsp;时\r\n            </div>\r\n          <div class="itemTitle">类别</div>\r\n            <div class="filterItem" ng-click="SearchOrderClassClick(0);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[class[0]]">药&nbsp;疗\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderClassClick(1);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[class[1]]">处&nbsp;置\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderClassClick(2);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[class[2]]">膳&nbsp;食\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderClassClick(3);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[class[3]]">护&nbsp;理\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderClassClick(4);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[class[4]]">手&nbsp;术\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderClassClick(5);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[class[5]]">检&nbsp;查\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderClassClick(6);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[class[6]]">化&nbsp;验\r\n            </div>\r\n        <div class="itemTitle">状态</div>\r\n            <div class="filterItem" ng-click="SearchOrderStatusClick(0);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[status[0]]">待提交\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderStatusClick(1);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[status[1]]">新&nbsp;开\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderStatusClick(2);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[status[2]]">执&nbsp;行\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderStatusClick(3);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[status[3]]">停&nbsp;止\r\n            </div>\r\n            <div class="filterItem" ng-click="SearchOrderStatusClick(4);"\r\n                 ng-class="{true:\'select\',false:\'notselect\'}[status[4]]">作&nbsp;废\r\n            </div>\r\n        </div>\r\n    </ion-sidebox-view>\r\n'),e.put("templates/pat/vitalSigns/dVitalSignsCard.html",'<div>\r\n    <div class="blockCardClass">\r\n    <div class="titleCls row">\r\n        <div class="col-75">\r\n        <div class="{{iconCls}} col-33"></div>\r\n        <div class="textCls col-33">{{titleData.itemName}}</div>\r\n        <div class="textCls unitCls col-33">({{titleData.itemUnit}})</div>\r\n        </div>\r\n        <div class="col-25">\r\n        <div class="icon-edit col-15" id="editId" ng-show="editOrCompleted" ng-click="edit(type)"></div>\r\n        <div class="completeCls col-15" id="completeId" ng-show="!editOrCompleted" ng-click="completed(type,titleData.itemCode,titleData.itemName,titleData.itemUnit)">完成</div>\r\n        </div>\r\n        </div>\r\n    <highchart config="chartConfig" class="span9 chartCls"></highchart>\r\n</div>\r\n    <div class="changeValueCls" id="changeRangeId" ng-if="!editOrCompleted">\r\n    <div class="modifyCardClass">\r\n        <div class="limitDivCls">\r\n            <div class="nameDivCls">\r\n                <div class="textCls">{{variableChange.topValue}}(b/min)</div>\r\n            </div>\r\n            <div class="valueDivCls">\r\n                <div class="item range range-assertive">\r\n                    <input id="myRange" type="range" min="0" max="100" name="maxValue" ng-model="variableChange.topValue">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="limitDivCls">\r\n            <div class="nameDivCls">\r\n                <div class="textCls">{{variableChange.minValue}}(b/min)</div>\r\n            </div>\r\n            <div class="valueDivCls">\r\n                <div class="item range range-balanced">\r\n                    <input type="range" min="0" max="100" name="minValue" ng-model="variableChange.minValue">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>'),e.put("templates/pat/vitalSigns/dVitalSignsDiv.html",'<div>\r\n    <div class="blockCardClass bloodPressCardClass">\r\n    <div class="littleDivCls">\r\n        <div class="topDivCls row">\r\n            <div class="col-75">\r\n            <div class="textCls col-33">血压</div>\r\n            <div class="textCls unitCls col-66">({{bloodChange.topValue}}/{{bloodChange.minValue}})</div>\r\n            </div>\r\n            <div class="col-25">\r\n            <div class="icon-edit col-15" ng-show="bloodPressId" ng-click="edit(type)"></div>\r\n            <div class="completeCls col-15" ng-show="!bloodPressId" ng-click="completed(type,titleData.itemCode,titleData.itemName,titleData.itemUnit)">完成</div>\r\n            </div>\r\n        </div>\r\n        <div class="bottomDivCls">\r\n            <div class="row col-66" >\r\n            <div class="valueCls col-50">{{bloodPressConfig.maxDataValue}}/{{bloodPressConfig.minDataValue}}</div>\r\n            <div class="unitAnotherCls col-33">{{bloodPressConfig.itemUnit}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n    <div class="changeValueCls" id="changeRangeId" ng-if="!bloodPressId">\r\n        <div class="modifyCardClass">\r\n            <div class="limitDivCls">\r\n                <div class="nameDivCls">\r\n                    <div class="textCls">{{bloodChange.topValue}}(b/min)</div>\r\n                </div>\r\n                <div class="valueDivCls">\r\n                    <div class="item range range-assertive">\r\n                        <input id="myRange" type="range" min="0" max="160" name="maxValue" ng-model="bloodChange.topValue">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="limitDivCls">\r\n                <div class="nameDivCls">\r\n                    <div class="textCls">{{bloodChange.minValue}}(b/min)</div>\r\n                </div>\r\n                <div class="valueDivCls">\r\n                    <div class="item range range-balanced">\r\n                        <input type="range" min="0" max="160" name="minValue" ng-model="bloodChange.minValue">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("templates/pat/vitalSigns/vitalSignsMain.html",'<ion-view view-title={{titleView}} class="vitalSignsMainView">\r\n    <ion-content class="vitalSignsNavView" id="viewCardId">\r\n        <div vital-signs-dom vital-signs-card  icon-cls="icon-xindian" title-data="heartBeatData" id="heartBeatBlock" next-node="spO2Block" upper-cls="blockCardClass" chart-config="heartBeatChartConfig" edit-or-completed="heartBeatId" do-edit=\'doEdit(type)\'\r\n             do-completed=\'doCompleted(type,itemCode,itemName,itemUnit)\' variable-change="changeValue.heartThreshold"></div>\r\n        <div vital-signs-dom vital-signs-card icon-cls="icon-xueyang" title-data="spO2data" id="spO2Block" next-node="bloodPressBlock" upper-cls="blockCardClass" chart-config="spO2ChartConfig"edit-or-completed="spO2Id"\r\n             do-edit=\'doEdit(type)\' do-completed=\'doCompleted(type,itemCode,itemName,itemUnit)\' variable-change="changeValue.spO2Threshold"></div>\r\n        <div vital-signs-dom vital-signs-div blood-press-config="bloodPressConfig" id="bloodPressBlock" upper-cls="blockCardClass bloodPressCardClass" blood-press-id="bloodPressId"\r\n             do-edit=\'doEdit(type)\' do-completed=\'doCompleted(type,itemCode,itemName,itemUnit)\' blood-change="bloodChange"></div></div>\r\n    </ion-content>\r\n</ion-view>'),e.put("templates/user/patCollection/dPatCollectlist.html","<ion-item  ng-click=\"goPatientItem(pat)\"  class=\"item item-icon-left\">\r\n    <div class=\"icon\" ng-class=\"{'男':'icon-man red','女':'icon-woman blue'}[pat['sex']]\"></div>\r\n    <div class=\"patientContent\">\r\n        <div class=\"patientName\">{{pat['name']}}</div>\r\n        <!--<div class=\"patientBed\">{{pat['bedNo']}}床</div>-->\r\n        <!--<div class=\"patientClass\">{{pat['nurseClassName']}}</div>-->\r\n        <!--<div class=\"patientStatus\" ng-class=\"{'危':'firstClass','重':'secondClass','一般':'thirdClass'}[pat['patientStatusName']]\">{{pat['patientStatusName']}}</div>-->\r\n    </div>\r\n    <ion-option-button class=\"button-positive\"style=\"background-color: aquamarine\" ng-click=\"cancelCollect(pat)\">\r\n        取消收藏\r\n    </ion-option-button>\r\n</ion-item>\r\n"),
e.put("templates/user/patCollection/patCollectlist.html",'<ion-view view-title="收藏病人"  class="patientListView">\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n        <ion-list>\r\n            <pat-collect-list ng-repeat="pat in patCollectLists"></pat-collect-list>\r\n        </ion-list>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/user/formula/addVar.html",'<ion-view class="addVarView" xmlns="http://www.w3.org/1999/html">\r\n    <header-bar></header-bar>\r\n    <ion-content ng-model="obj">\r\n        <div class="formulaShow">\r\n            <textarea rows="3" readonly="true" class="textAreaStyle">{{obj.formulaTextShow}}</textarea>\r\n        </div>\r\n        <div class="list">\r\n            <label class="item item-input" ng-repeat="item in obj.varList">\r\n                <span class="input-label">{{item.name}}</span>\r\n                <input type="text" placeholder="变量名称最多不超过8个字" ng-model="item.value">\r\n            </label>\r\n        </div>\r\n        <div class="list">\r\n            <label class="item item-input">\r\n                <span class="input-label">公式名</span>\r\n                <input type="text" placeholder="公式名最多不超过8个字" ng-model="obj.formulaName">\r\n            </label>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>'),e.put("templates/user/formula/commonFormula.html",'<ion-view class="commonFormulaView">\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n        <div class="list">\r\n            <div class="item item-divider item-choice item-selected">\r\n                已选公式\r\n            </div>\r\n            <ion-item ng-repeat="item in selectedList"\r\n                      ng-value="item.formulaName"\r\n                      ng-click="deleteFromSelectedList($index)">\r\n                {{ item.formulaName}}\r\n            </ion-item>\r\n        </div>\r\n        <div class="list">\r\n            <div class="item item-divider item-choice item-select">\r\n                通用公式\r\n            </div>\r\n            <ion-item ng-repeat="item in formulaList"\r\n                      ng-value="item.checked"\r\n                      ng-click="addToSelectedList($index)">\r\n                {{ item.formulaName}}\r\n            </ion-item>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>'),e.put("templates/user/formula/commonFormulas.html",'<ion-view class="commonFormulasView">\r\n    <ion-content>\r\n        <ion-refresher pulling-icon="ion-ios-arrow-down" spinner="dots" on-refresh="refresh()"></ion-refresher>\r\n        <ion-spinner ng-if="!dataLoaded" icon="dots" class="load-spinner"></ion-spinner>\r\n        <div class="cardStyle">\r\n            <ion-list>\r\n                <ion-item class="itemCls" ng-repeat="item in formulaList"\r\n                          ng-value="item.formulaName"\r\n                          ng-model="item.formulaName"\r\n                          ng-click="toDetail(item.formulaId,item.formulaName)">\r\n                    {{ item.formulaName}}\r\n                    <ion-option-button class="button-assertive"\r\n                                       ng-click="doRemove(item)">\r\n                        移除\r\n                    </ion-option-button>\r\n                    <span class="button button-icon icon-arrow buttonCls"></span>\r\n                </ion-item>\r\n            </ion-list>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>'),e.put("templates/user/formula/dFormulaShow.html",'<div id="rootNode" ></div>'),e.put("templates/user/formula/dPatSearchList.html",'<!--<div>{{item["NAME"]}}{{item["PATIENT_ID"]}}{{item["BED_NO"]}}</div>-->\r\n<div>{{ item}}:<input type="number" placeholder="请输入数字"><br></div>\r\n'),e.put("templates/user/formula/formulaDetail.html",'<ion-view class="formulaDetailView" xmlns="http://www.w3.org/1999/html">\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n        <div>\r\n            <div class="item item-input">\r\n                <div class="input-label">公式内容</div>\r\n                <div class="autoHeight">{{formula.formulaExpression}}</div>\r\n            </div>\r\n\r\n            <div class="item item-input" ng-repeat="item in showList track by $index">\r\n                <div class="input-label autoHeight">{{item.name}}<span ng-show="item.unit">({{item.unit}})</span>\r\n                </div>\r\n                <input type="number" min="0" max="9999" placeholder="请输入变量值" ng-model="item.attr"/>\r\n            </div>\r\n\r\n            <div class="item item-input" ng-show="showPatName">\r\n                <div class="input-label">病人姓名</div>\r\n                <div class="autoHeight patient-name">{{patientName}}</div>\r\n            </div>\r\n\r\n            <div class="item item-input result-input">\r\n                <div class="result-label">结果</div>\r\n                <div class="autoHeight result-show">{{result.toFixed(4)}}</div>\r\n                <div class="autoHeight result-unit" ng-show="result!=null">{{formula.resultUnit}}</div>\r\n            </div>\r\n\r\n            <div class="buttonAll">\r\n                <button class="button button-positive buttonStyle clcBut" ng-click="doClear()">清空</button>\r\n                <button class="button button-positive buttonStyle ccaBut" ng-click="doCalculate()">计算</button>\r\n            </div>\r\n        </div>\r\n        <div class="list">\r\n            <label class="item item-input item-stacked-label">\r\n                <span class="input-label state-input ">参数说明</span>\r\n\r\n                <div class="item item-text-wrap itemStyle">{{formula.paraState}}</div>\r\n            </label>\r\n            <label class="item item-input  item-stacked-label">\r\n                <span class="input-label state-input ">使用条件</span>\r\n\r\n                <div class="item item-text-wrap itemStyle">{{formula.condition}}</div>\r\n            </label>\r\n            <label class="item item-input item-stacked-label">\r\n                <span class="input-label state-input ">注意事项</span>\r\n\r\n                <div class="item item-text-wrap itemStyle">{{formula.tips}}</div>\r\n            </label>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/user/formula/formulaList.html",'<ion-view view-title="Formula" class="formulaView">\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n        <div class="cardStyle">\r\n            <div class="littleTitle"><label class="labelStyle">通用公式</label></div>\r\n            <ion-list>\r\n                <ion-item ng-repeat="item in formulaList"\r\n                          ng-value="item.formulaName"\r\n                          ng-model="item.formulaName"\r\n                          ng-click="toDetail(item.formulaId)">\r\n                    {{ item.formulaName}}\r\n                    <ion-option-button class="button-assertive"\r\n                                       ng-click="doRemove(item)">\r\n                        移除\r\n                    </ion-option-button>\r\n                </ion-item>\r\n                <button class="button ion-plus-circled addButton"\r\n                        ng-click="toAdd()"></button>\r\n            </ion-list>\r\n        </div>\r\n        <div class="cardStyle">\r\n            <div class="littleTitle"><label class="labelStyle">自定义公式</label></div>\r\n            <ion-list>\r\n                <ion-item ng-repeat="item in myFormulaList"\r\n                          ng-value="item.formulaName"\r\n                          ng-model="item.formulaName"\r\n                          ng-click="toMyDetail(item)">\r\n                    {{ item.formulaName}}\r\n                    <ion-option-button class="button-assertive"\r\n                                       ng-click="doDelete(item)">\r\n                        删除\r\n                    </ion-option-button>\r\n                    <ion-option-button class="button-calm"\r\n                                       ng-click="doEdit(item)">\r\n                        编辑\r\n                    </ion-option-button>\r\n                </ion-item>\r\n                <button class="button ion-plus-circled addButton"\r\n                        ng-click="toAddMine()"></button>\r\n            </ion-list>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>'),e.put("templates/user/formula/formulas.html",'<ion-pane class="formulasView">\r\n    <header-bar></header-bar>\r\n    <ion-content scroll="false">\r\n        <div class="subMenu">\r\n            <div class="commonFormulas {{classColor.commonFormulaColor}} rightDiv" ng-click="commonFormulasClick()">通用公式</div>\r\n            <div class="privateFormulas {{classColor.privateFormulaColor}} leftDiv" ng-click="privateFormulasClick()">我的公式</div>\r\n        </div>\r\n        <ion-nav-view name="formulaListContent"></ion-nav-view>\r\n    </ion-content>\r\n</ion-pane>'),e.put("templates/user/formula/formulaShow.html","<div><a href=\"/#/formulaInfo/{{formula['PATIENT_ID']}}/formulaDetail\">{{formula['FORMULA_NAME']}}</a></div>"),e.put("templates/user/formula/newFormula.html",'<ion-view class="newFormulaView" xmlns="http://www.w3.org/1999/html">\r\n    <header-bar></header-bar>\r\n    <ion-content class="newFormula" scroll="false">\r\n        <div class="formulaContext">\r\n            <textarea rows="3" class="textAreaStyle" readonly="true"\r\n                      placeHolder="请在下方键盘编辑公式">{{newFormulaText}}</textarea>\r\n\r\n            <div class="varStyle">\r\n                <div class="varDiv" ng-repeat="item in variablesList" ng-click="addValue(item.paraName)">\r\n                    {{item.paraName}}{{item.paraUnit}}\r\n                </div>\r\n                <!--<label class="labelStyle" ng-repeat="item in variablesList" ng-click="addValue(item.paraName)">{{item.paraName}}</label>-->\r\n            </div>\r\n        </div>\r\n        <div class="keyBoardClass">\r\n            <div class="buttonLine">\r\n                <button class="button-icon icon-plus buttonClass buttonOperationClass" ng-click="addValue(\'+\')"></button>\r\n                <button class="buttonClass" ng-click="addValue(\'7\')">7</button>\r\n                <button class="buttonClass" ng-click="addValue(\'8\')">8</button>\r\n                <button class="buttonClass" ng-click="addValue(\'9\')">9</button>\r\n                <button class="buttonClass buttonBackCls" ng-click="clearOne()">退格</button>\r\n            </div>\r\n            <div class="buttonLine">\r\n                <button class="button-icon icon-minus buttonClass buttonOperationClass" ng-click="addValue(\'-\')"></button>\r\n                <button class="buttonClass" ng-click="addValue(\'4\')">4</button>\r\n                <button class="buttonClass" ng-click="addValue(\'5\')">5</button>\r\n                <button class="buttonClass" ng-click="addValue(\'6\')">6</button>\r\n                <button class="buttonClass buttonClcCls" ng-click="clear()">清空</button>\r\n            </div>\r\n            <div class="buttonLine">\r\n                <button class="button-icon icon-multiplication buttonClass buttonOperationClass" ng-click="addValue(\'*\')"></button>\r\n                <button class="buttonClass" ng-click="addValue(\'1\')">1</button>\r\n                <button class="buttonClass" ng-click="addValue(\'2\')">2</button>\r\n                <button class="buttonClass" ng-click="addValue(\'3\')">3</button>\r\n                <button class="button-icon icon-power buttonClass buttonOperationClass" ng-click="addValue(\'^\')"></button>\r\n            </div>\r\n            <div class="buttonLine">\r\n                <button class="button-icon icon-division buttonClass buttonOperationClass" ng-click="addValue(\'/\')"></button>\r\n                <button class="buttonClass" ng-click="addValue(\'0\')">0</button>\r\n                <button class="buttonClass" ng-click="addValue(\'.\')">.</button>\r\n                <button class="buttonClass" ng-click="addValue(\'arg\')">变量</button>\r\n                <button class="buttonClass buttonBackCls" ng-click="addValue(\'ln\')">ln</button>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>'),e.put("templates/user/formula/patSearch.html",'  <ion-sidebox-view class="patSearchView"  title="病人选择" cancel-fn="closeModal(false)" ok-fn="closeModal(true)" ok-disabled="paraIndex==undefined">\r\n\r\n    <!--&lt;!&ndash;<header-bar></header-bar>&ndash;&gt;-->\r\n    <!--<ion-header-bar class="bar bar-header pat-search-bar">-->\r\n        <!--<div align="left" class="button button-clear button-primary button-left" ng-click="closeModal(false)">取消</div>-->\r\n        <!--<div align="center" class="button button-clear modal-title" >病人选择</div>-->\r\n        <!--<div align="right" class="button button-clear button-primary button-right" ng-click="closeModal(true)">确定</div>-->\r\n    <!--</ion-header-bar>-->\r\n    <ion-content>\r\n        <ion-list class="list-item-cls">\r\n            <ion-radio class="itemCls" ng-repeat="item in patList"\r\n                       ng-click="toRemember($index)">\r\n                <span style="float: left">{{item.name}}</span>\r\n            </ion-radio>\r\n        </ion-list>\r\n    </ion-content>\r\n</ion-sidebox-view>\r\n'),e.put("templates/user/formula/privateFormulas.html",'<ion-view class="privateFormulaView">\r\n    <ion-content>\r\n        <ion-refresher pulling-icon="ion-ios-arrow-down" spinner="dots" on-refresh="refresh()"></ion-refresher>\r\n        <ion-spinner ng-if="!dataLoaded" icon="dots" class="load-spinner"></ion-spinner>\r\n        <div class="cardStyle">\r\n            <ion-list>\r\n                <ion-item class="itemCls" ng-repeat="item in myFormulaList"\r\n                          ng-value="item.formulaName"\r\n                          ng-model="item.formulaName"\r\n                          ng-click="toMyDetail($index)">\r\n                    {{ item.formulaName}}\r\n                    <ion-option-button class="button-assertive"\r\n                                       ng-click="doDelete(item)">\r\n                        删除\r\n                    </ion-option-button>\r\n                    <ion-option-button class="button-calm"\r\n                                       ng-click="doEdit(item)">\r\n                        编辑\r\n                    </ion-option-button>\r\n                     <span class="button button-icon icon-arrow buttonCls"></span>\r\n                </ion-item>\r\n            </ion-list>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>'),e.put("templates/user/tools/noticeTools.html",'<ion-view>\r\n    <header-bar></header-bar>\r\n    <ion-content >\r\n\r\n        <li class="item item-toggle">\r\n            手术通知\r\n            <label class="toggle toggle-calm " ng-click="acceptNoticeChange(\'acceptOperationNotice\')">\r\n                <input type="checkbox" ng-checked="isCheck(ToolsResult[\'acceptOperationNotice\'])">\r\n                <div class="track">\r\n                    <div class="handle"></div>\r\n                </div>\r\n            </label>\r\n        </li>\r\n        <li class="item item-toggle">\r\n            危急值通知\r\n            <label class="toggle toggle-calm " ng-click="acceptNoticeChange(\'acceptCriticalValueNotice\')">\r\n                <input type="checkbox" ng-checked="isCheck(ToolsResult[\'acceptCriticalValueNotice\'])">\r\n\r\n                <div class="track">\r\n                    <div class="handle"></div>\r\n                </div>\r\n            </label>\r\n        </li>\r\n        <li class="item item-toggle">\r\n            会诊通知\r\n            <label class="toggle toggle-calm " ng-click="acceptNoticeChange(\'acceptConsultationNotice\')">\r\n                <input type="checkbox" ng-checked="isCheck(ToolsResult[\'acceptConsultationNotice\'])">\r\n                <div class="track">\r\n                    <div class="handle"></div>\r\n                </div>\r\n            </label>\r\n        </li>\r\n        <li  class="item item-toggle">\r\n            用药审核通知\r\n            <label class="toggle toggle-calm " ng-click="acceptNoticeChange(\'acceptDrugReviewNotice\')">\r\n                <input type="checkbox" ng-checked="isCheck(ToolsResult[\'acceptDrugReviewNotice\'])">\r\n\r\n                <div class="track">\r\n                    <div class="handle"></div>\r\n                </div>\r\n            </label>\r\n        </li>\r\n        <li class="item item-toggle">\r\n            手术安排通知\r\n            <label class="toggle toggle-calm " ng-click="acceptNoticeChange(\'acceptOperationArrangement\')">\r\n                <input type="checkbox" ng-checked="isCheck(ToolsResult[\'acceptOperationArrangement\'])">\r\n\r\n                <div class="track">\r\n                    <div class="handle"></div>\r\n                </div>\r\n            </label>\r\n        </li>\r\n    </ion-content>\r\n</ion-view>\r\n'),e.put("templates/user/tools/tools.html",'<ion-view view-title="设置">\r\n    <header-bar></header-bar>\r\n    <ion-content>\r\n            <ion-item class="item item-icon-right" ng-click="userSetting()">账号设置\r\n                <i class="icon ion-chevron-right" style=" font-size: 25px;color: #BEBEBE;"></i>\r\n            </ion-item>\r\n            <ion-item class="item  item-icon-right" ng-click="noticeTools() ">通知设置\r\n                <i class="icon ion-chevron-right" style=" font-size: 25px;color: #BEBEBE;"></i>\r\n            </ion-item>\r\n    </ion-content>\r\n</ion-view>\r\n')}]);